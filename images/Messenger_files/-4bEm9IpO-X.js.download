if (self.CavalryLogger) { CavalryLogger.start_js(["DiNpd"]); }

__d("VideoChannelCallerToPlayerOriginMap",[],(function(a,b,c,d,e,f){e.exports={internal:"unknown",www_feed_pivots:"newsfeed",www_feed_snowlift:"unknown",misc_photo_set:"unknown",mobile:"unknown",search:"search",www_feed_rhc:"newsfeed",www_notification:"notifications",www_permalink:"permalink",www_permalink_rhc:"permalink",www_permalink_rhc_from_notification:"notifications",my_video_channels_ent_query:"unknown",top_followed_video_channels_ent_query:"unknown",badge:"unknown",pagination:"unknown",subtitle:"unknown",channel_view_from_unknown:"unknown",channel_view_from_newsfeed:"newsfeed",channel_view_from_explorefeed:"unknown",live_indexer_from_explorefeed:"unknown",live_indexer_from_newsfeed:"unknown",nn_indexer_from_newsfeed:"unknown",channel_view_from_search:"unknown",channel_view_from_newsfeed_pivot:"unknown",newsfeed_pivot_inline:"unknown",mobile_newsfeed_pivot_inline:"unknown",channel_view_from_page_call_to_action:"unknown",channel_view_from_page_timeline:"page_timeline",channel_view_from_page_timeline_featured:"unknown",channel_view_from_page_video_tab:"page_timeline",channel_view_from_page_home_hero:"unknown",channel_view_from_user_timeline:"user_timeline",channel_view_from_user_video_tab:"unknown",channel_view_from_group_timeline:"group",channel_view_from_group_video_tab:"unknown",channel_view_from_video_page_spotlight:"unknown",channel_view_from_video_page_video_list:"unknown",channel_view_from_video_page_video_tab:"unknown",channel_view_from_channel_tab:"unknown",channel_view_from_pmv_unit:"page_timeline",channel_view_from_saved_story:"unknown",saved_story_inline:"unknown",channel_view_from_shared_with_you_story:"unknown",shared_with_you_story_inline:"unknown",channel_view_from_latest_from_your_channels_story:"unknown",latest_from_your_channels_story_inline:"unknown",channel_view_from_channel_pivot:"unknown",channel_pivot_inine:"unknown",channel_view_from_recommended_channel_story:"unknown",recommended_channel_story_inline:"unknown",channel_view_from_video_home:"video_home",video_home_inline:"unknown",video_home_channel_see_all:"unknown",social_player_up_next:"unknown",channel_view_from_casting:"unknown",channel_view_from_tv_candy_shelf:"unknown",channel_view_from_end_card:"unknown",connected_tv:"unknown",connected_tv_discovery:"unknown",connected_tv_player:"unknown",connected_tv_profile:"unknown",connected_tv_mini_player_feed:"unknown",video_home_feed:"unknown",video_home_hero:"unknown",feed_survey_swipe:"unknown",feed_pivots_inline:"newsfeed",channel_view_from_feed_pivots:"newsfeed",video_sets_cache_refresh:"unknown",video_sets_cache_check:"unknown",dummy_story_recommended_videos:"unknown",dummy_story_friends_enjoying:"unknown",live_event_video_set:"unknown",live_videos_set:"unknown",single_creator_video_set:"unknown",frt_tool:"unknown",dummy_story_friends_enjoying_now:"unknown",dummy_story_dummy_action:"unknown",oculus_video:"unknown",trending_demographics_live:"unknown",live_map:"live_map",unconnected_live_video:"unknown",profile_video_gallery:"unknown",channel_view_from_playlist:"unknown",oculus_social_hub:"unknown",akira:"unknown",is_live_video_chaining:"unknown",is_live_video_chaining_others:"unknown",video_creator_chaining:"unknown",tahoe:"unknown",living_room:"unknown",shows_cover_trailer:"page_timeline",shows_episodes_tab:"page_timeline",shows_playlists_tab:"page_timeline",shows_home_tab:"page_timeline",shows_more_videos_tab:"page_timeline",show_episode_feed_recommendations:"unknown",parent_page_timeline:"page_timeline",watch_watchlist_tab:"unknown",watch_feed_tab:"unknown",watch_injection:"unknown",watch_topic_feed:"unknown",watch_topic_channel_feed:"unknown",watch_subtopic_channel_feed:"unknown",watch_subtopic_aggregation:"unknown",watch_subtopic_live_feed:"unknown",live_category_query:"unknown",watch_section_see_all:"unknown",social_player_from_video_home:"unknown",watch_custom_ads:"unknown",watch_embedded_endscreen:"unknown",wns:"unknown",explore_feed_deep_dive:"unknown",voyager:"unknown",games_video_channel:"games_video_channel",games_tab_chaining_channel:"unknown",games_tab_pathing_only_live:"unknown",games_comet_chaining:"unknown",lol_video_feed:"unknown",avd:"unknown",live_chaining:"unknown",live_tab:"unknown",living_room_chaining:"unknown",fblite_trending_video:"unknown",portal:"unknown",lasso:"unknown",watch_social:"unknown",messenger:"unknown",chaining_gaming_promotion:"unknown",chaining_gaming_only:"unknown",cricket_videos:"unknown",premium_music_video:"unknown",music_channel_view_from_music_home:"unknown",music_channel_view_from_video_home:"video_home",music_channel_view_from_newsfeed:"newsfeed",music_channel_view_from_search:"search",music_channel_view_from_page:"page_timeline",channel_view_from_video_page_pmv_music_featuring_artist_list:"page_timeline",watch_laidback_consumption:"unknown",watch_nf_laidback_consumption:"unknown",channel_view_from_newsfeed_related:"newsfeed",channel_view_from_video_home_related:"video_home",feed_short_video:"unknown",photo_chaining:"unknown",youtube_share:"unknown",watch_rainbow_qp:"unknown",plaza_watch_rich_bookmark_tile:"unknown",interest_destination:"unknown",co_watch:"unknown",live_now:"unknown",live_tab_prefetch:"unknown",live_logout_user:"unknown",fb_lite:"unknown",live_destination_www:"unknown",vh_search_related_videos_feed:"unknown",test:"unknown",unknown:"unknown"}}),null);
__d("LiveTahoeInStreamChainingTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:LiveTahoeInStreamChainingLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:LiveTahoeInStreamChainingLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:LiveTahoeInStreamChainingLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCurrentVideoID=function(a){this.$1.current_video_id=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setNextVideoID=function(a){this.$1.next_video_id=a;return this};c.setNextVideoIsLive=function(a){this.$1.next_video_is_live=a;return this};return a}();c={current_video_id:!0,event:!0,next_video_id:!0,next_video_is_live:!0};e.exports=a}),null);
__d("LiveVideoViewerTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:LiveVideoViewerLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:LiveVideoViewerLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:LiveVideoViewerLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCommentID=function(a){this.$1.comment_id=a;return this};c.setCommentLocation=function(a){this.$1.comment_location=a;return this};c.setCommentReplyThreadLength=function(a){this.$1.comment_reply_thread_length=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setReplyThreadDurationMs=function(a){this.$1.reply_thread_duration_ms=a;return this};c.setTargetID=function(a){this.$1.target_id=a;return this};return a}();c={comment_id:!0,comment_location:!0,comment_reply_thread_length:!0,event:!0,reply_thread_duration_ms:!0,target_id:!0};e.exports=a}),null);
__d("TahoeTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:TahoeLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:TahoeLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:TahoeLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setChainDepth=function(a){this.$1.chain_depth=a;return this};c.setChainingContextIdentifier=function(a){this.$1.chaining_context_identifier=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setIsAutoplaying=function(a){this.$1.is_autoplaying=a;return this};c.setMediaID=function(a){this.$1.media_id=a;return this};c.setUpNextMediaID=function(a){this.$1.up_next_media_id=a;return this};c.setUpNextPosition=function(a){this.$1.up_next_position=a;return this};return a}();c={chain_depth:!0,chaining_context_identifier:!0,event:!0,is_autoplaying:!0,media_id:!0,up_next_media_id:!0,up_next_position:!0};e.exports=a}),null);
__d("UFICommentTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:UFICommentLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:UFICommentLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:UFICommentLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setDuration=function(a){this.$1.duration=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setHasPhoto=function(a){this.$1.has_photo=a;return this};c.setHasSticker=function(a){this.$1.has_sticker=a;return this};c.setIsReply=function(a){this.$1.is_reply=a;return this};c.setRequestLength=function(a){this.$1.request_length=a;return this};return a}();c={duration:!0,event:!0,has_photo:!0,has_sticker:!0,is_reply:!0,request_length:!0};e.exports=a}),null);
__d("VideoTipJarTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:VideoTipJarLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:VideoTipJarLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:VideoTipJarLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setContentID=function(a){this.$1.content_id=a;return this};c.setGamesOrderID=function(a){this.$1.games_order_id=a;return this};c.setIsCustomAmount=function(a){this.$1.is_custom_amount=a;return this};c.setMatchingQuantity=function(a){this.$1.matching_quantity=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setPaymentID=function(a){this.$1.payment_id=a;return this};c.setProductID=function(a){this.$1.product_id=a;return this};c.setSparkQuantity=function(a){this.$1.spark_quantity=a;return this};c.setSpendID=function(a){this.$1.spend_id=a;return this};c.setSpendingSubtype=function(a){this.$1.spending_subtype=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setTipJarEvent=function(a){this.$1.tip_jar_event=a;return this};c.setTipPaymentID=function(a){this.$1.tip_payment_id=a;return this};c.setUsdAmount=function(a){this.$1.usd_amount=a;return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setVirtualGiftID=function(a){this.$1.virtual_gift_id=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={content_id:!0,games_order_id:!0,is_custom_amount:!0,matching_quantity:!0,name:!0,payment_id:!0,product_id:!0,spark_quantity:!0,spend_id:!0,spending_subtype:!0,surface:!0,tip_jar_event:!0,tip_payment_id:!0,usd_amount:!0,video_id:!0,virtual_gift_id:!0};e.exports=a}),null);
__d("UFICommentLogger",["UFICommentTypedLogger"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={},this.$2={}}var c=a.prototype;c.logNewCommentPost=function(a,c,d){this.$2[a]=babelHelpers["extends"]({timestamp:c},d),new(b("UFICommentTypedLogger"))().setEvent("new_comment_post").setHasPhoto(d.has_photo).setHasSticker(d.has_sticker).setIsReply(d.is_reply).log()};c.logNewCommentReceived=function(a,c){var d=this.$2[a];if(d){var e=0;c&&d.timestamp&&(e=c-d.timestamp);new(b("UFICommentTypedLogger"))().setEvent("new_comment_received").setDuration(e).setHasPhoto(d.has_photo).setHasSticker(d.has_sticker).setIsReply(d.is_reply).log()}delete this.$2[a]};c.logCommentFetch=function(a,c,d){c=babelHelpers["extends"]({timestamp:c},d);this.$1[a]===void 0?this.$1[a]=[c]:this.$1[a].push(c);new(b("UFICommentTypedLogger"))().setEvent("fetch_comment").setIsReply(d.is_reply).setRequestLength(d.request_length).log()};c.logCommentFetchReceived=function(a,c){if(this.$1[a]){var d=this.$1[a].shift(),e=0;c&&d.timestamp&&(e=c-d.timestamp);new(b("UFICommentTypedLogger"))().setEvent("fetch_comment_received").setDuration(e).setIsReply(d.is_reply).setRequestLength(d.request_length).log();this.$1[a].length===0&&delete this.$1[a]}};return a}();c=new a();e.exports=c}),null);
__d("CommentVoteReactionType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,UPVOTE:1,DOWNVOTE:2});e.exports=a}),null);
__d("CommentVoteUIVersion",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:"none",INSIDE_BLING_BAR:"inside_bling_bar",VERTICAL_ON_THE_SIDE:"vertical_on_the_side",COMMUNITY_REPUTATION:"community_reputation"});e.exports=a}),null);
__d("FeedbackActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({CHANGE_ACCEPTED_ANSWER:"fa-type:change-accepted-answer",COMMENT_LIKE:"fa-type:comment-like",COMMENT_REACTION:"fa-type:comment-reaction",COMMENT_SET_SPAM:"fa-type:mark-spam",COMMENT_KEEP_SPAM:"fa-type:keep_spam",COMMENT_VOTE:"fa-type:comment_vote",DELETE_COMMENT:"fa-type:delete-comment",DELETE_COMMENT_REMOVE_COMMENTER:"fa-type:delete_comment_remove_commenter",DISABLE_COMMENTS:"fa-type:disable-comments",LIVE_DELETE_COMMENT:"fa-type:live-delete-comment",LIKE_ACTION:"fa-type:like",SUBSCRIBE_ACTION:"fa-type:subscribe",SHARE_COUNT_UPDATE_ACTION:"fa-type:share_count_update",REMOVE_PREVIEW:"fa-type:remove-preview",MARK_COMMENT_SPAM:"fa-type:mark-spam",MUTE_MEMBER:"fa-type:mute-member",CONFIRM_COMMENT_REMOVAL:"fa-type:confirm-remove",TRANSLATE_COMMENT:"fa-type:translate-comment",TRANSLATE_ALL:"fa-type:translate-all-comments",COMMENT_LIKECOUNT_UPDATE:"fa-type:comment-likecount-update",ADD_COMMENT_ACTION:"fa-type:add-comment",REACTION:"fa-type:reaction",UPDATE_CONSTITUENT_BADGE:"fa-type:comment_update_constituent_title",COMMENT_AUTHOR_PIN_CHANGE:"fa-type:comment_author_pin_change"});e.exports=a}),null);
__d("FeedbackPayloadSourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,INITIAL_SERVER:1,LIVE_SEND:2,USER_ACTION:3,STREAMING:4,COLLAPSE_ACTION:7,ENDPOINT_LIKE:10,ENDPOINT_COMMENT_LIKE:11,ENDPOINT_ADD_COMMENT:12,ENDPOINT_EDIT_COMMENT:13,ENDPOINT_DELETE_COMMENT:14,ENDPOINT_HIDE_COMMENT:16,ENDPOINT_REMOVE_PREVIEW:17,ENDPOINT_ID_COMMENT_FETCH:18,ENDPOINT_COMMENT_FETCH:19,ENDPOINT_TRANSLATE_COMMENT:20,ENDPOINT_BAN:21,ENDPOINT_SUBSCRIBE:22,ENDPOINT_COMMENT_LIKECOUNT_UPDATE:23,ENDPOINT_DISABLE_COMMENTS:24,ENDPOINT_ACTOR_CHANGE:25,ENDPOINT_REACTION:26,ENDPOINT_PAGES_MODERATION:27,ENDPOINT_COMMENT_REACTION:28,ENDPOINT_COMMENT_ANSWER_ACCEPT:29,ENDPOINT_COMMENT_KEEP_SPAM:30,ENDPOINT_COMMENT_APPEAL_SPAM:31,ENDPOINT_COMMENT_SECURE_ACCOUNT:32,ENDPOINT_DELETE_COMMENT_AND_REMOVE_COMMENTER:33,ENTPOINT_MUTE_MEMBER:34,ENDPOINT_SUBSCRIBE_COMMENT:35,ENDPOINT_HIDE_TEXT_DELIGHTS:36,ENDPOINT_SEND_MESSAGE:37,ENDPOINT_COMMENT_VOTE:38,ENDPOINT_AUTHOR_PINNED_COMMENT:39,ENDPOINT_DELETE_COMMENT_WTH_FEEDBACK:40});e.exports=a}),null);
__d("UFIFeedbackMode",[],(function(a,b,c,d,e,f){a=Object.freeze({EXPANDED:"expanded",NONE:"none",NEVER:"never",TOGGLE:"toggle"});e.exports=a}),null);
__d("UFIPaging",[],(function(a,b,c,d,e,f){a=Object.freeze({TOP:"top",BOTTOM:"bottom",ALL:"all"});e.exports=a}),null);
__d("UFIStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({DELETED:"status:deleted",SPAM:"status:spam",SPAM_DISPLAY:"status:spam-display",LIVE_DELETED:"status:live-deleted",FAILED_ADD:"status:failed-add",FAILED_EDIT:"status:failed-edit",PENDING_EDIT:"status:pending-edit"});e.exports=a}),null);
__d("UFIConstants",["FeedbackActionType","CommentVoteReactionType","CommentVoteUIVersion","UFIFeedbackMode","FeedbackSourceType","FeedbackPayloadSourceType","UFIStatus","UFIPaging"],(function(a,b,c,d,e,f){"use strict";a=80;f.attachmentTruncationLength=a;f.UFIActionType=b("FeedbackActionType");f.UFICommentVoteType=b("CommentVoteReactionType");f.UFICommentVoteUIVersion=b("CommentVoteUIVersion");f.UFIFeedbackMode=b("UFIFeedbackMode");f.UFIFeedbackSourceType=b("FeedbackSourceType");f.UFIPayloadSourceType=b("FeedbackPayloadSourceType");f.UFIStatus=b("UFIStatus");f.UFIPaging=b("UFIPaging");c=420;f.commentTruncationLength=c;d=3;f.commentTruncationMaxLines=d;e=.6;f.commentTruncationPercent=e;a=60;f.commentURLTruncationLength=a;b=1e3;f.infiniteScrollRangeForQANDAPermalinks=b;c=60;f.maxScrollDistanceForAutoScroll=c;d=1;f.minCommentsForOrderingModeSelector=d;e="unavailable_comment_key";f.unavailableCommentKey=e}),null);
__d("UFIRootRegistry",[],(function(a,b,c,d,e,f){"use strict";f.registerController=a;f.registerSnowliftID=b;f.isSnowliftNode=c;f.getInstanceIDFromFTEntIdentifier=d;f.getFTEntIdentifierFromInstanceID=e;f.cleanupInstance=k;f.cleanupSnowliftNodes=l;var g={},h={},i={},j=[];function a(a,b,c,d){g[a]=d,h[c]=[].concat(h[c]||[],[b]),i[b]=c}function b(a){j.push(a)}function c(a){return j.indexOf(a)>=0}function d(a){return h[a]||null}function e(a){return i[a]||null}function k(a){var b=i[a],c=h[b];c&&c.includes(a)&&(h[b]=c.filter(function(b){return b!=a}),h[b].length==0&&delete h[b]);delete i[a]}function l(){j.forEach(function(a){return g[a]&&g[a]()}),g={},j=[]}}),null);
__d("UFIAddCommentActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({CANCEL:"add_comment_cancel",CHANGE_CONTENT:"add_comment_change_content",RETRY_SUBMIT:"add_comment_retry_submit",SUBMIT_EDIT:"add_comment_submit_edit",SUBMIT_NEW:"add_comment_submit_new",PIVOT_SEND_MESSAGE:"pivot_send_message"});e.exports=a}),null);
__d("UFIInstanceActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({CHANGE_ORDER_MODE:"story_change_order_mode",CHANGE_VISIBILITY:"story_change_visibility",INIT:"instance_init",RECEIVED_VOD_COMMENTS:"received_vod_comments",REMOVE:"story_remove",REQUESTED_VOD_COMMENTS:"requested_vod_comments",TOGGLE_AUTO_TRANSLATE_COMMENTS:"toggle_auto_translate_comments",TOGGLE_COMMENTS:"story_toggle_comments",TOGGLE_COMMERCIAL_BREAK:"story_toggle_commercial_break",TRANSLATE_ALL:"translate_all",FOUND_VIDEO_PLAYER_CONTROLLER:"found_video_player_controller"});e.exports=a}),null);
__d("UFIStoryActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({CHANGE_ACCEPTED_ANSWER:"story_change_accepted_answer",COMMENTS_ARRIVED:"story_comments_arrived",PAGE_IN_COMMENTS:"story_page_in_comments",SHOW_REPLIES:"story_show_replies",SHOW_COMMENTS:"story_show_comments",SPAM_FETCHED:"story_spam_fetched",CHANGE_REACTION:"story_change_reaction",CHANGE_REACTION_FAILURE:"story_change_reaction_failure",CHANGE_REACTION_SUCCESS:"story_change_reaction_success",TOGGLE_REPLIES:"story_toggle_replies",FRIEND_TYPING:"story_friend_typing",SOMEONE_TYPING:"story_someone_typing",TYPING_STOPPED:"story_typing_stopped",LIVE_PIN_COMMENT:"story_live_pin_comment",LIVE_UNPIN_COMMENT:"story_live_unpin_comment",SHOW_FACECAST_REPLIES:"story_show_facecast_replies",HIDE_FACECAST_REPLIES:"story_hide_facecast_replies",ADD_FACECAST_REPLY:"story_add_facecast_reply",ADD_FACECAST_REPLIES:"story_add_facecast_replies",FACECAST_REPLIES_LOADED:"facecast_replies_loaded",SET_COMMENTS_SCROLL_DISTANCE:"set_comments_scroll_distance",HANDLE_NEW_COMMENTS:"handle_new_comments",HANDLE_NEW_FACECAST_REPLY:"handle_new_facecast_reply",SET_COMMENT_REACTIONS_MENU_SHOWN:"set_comment_reactions_menu_shown"});e.exports=a}),null);
__d("UFIActionTypes",["UFIInstanceActionType","UFIStoryActionType","UFIAddCommentActionType","UFICommentActionType"],(function(a,b,c,d,e,f){"use strict";f.INSTANCE=b("UFIInstanceActionType"),f.STORY=b("UFIStoryActionType"),f.ADD_COMMENT=b("UFIAddCommentActionType"),f.COMMENT=b("UFICommentActionType")}),null);
__d("UFICommentVoteSyncStore",["FluxReduceStore","UFIActionTypes","UFIConstants","UFIDispatcherBase"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return{}};d.reduce=function(a,c){var d;switch(c.type){case b("UFIActionTypes").INSTANCE.INIT:var e=c.payload,f=e.feedbacktarget?e.feedbacktarget:e.feedbacktargets&&e.feedbacktargets[0];if(!f)return a;f=e.comments.reduce(function(a,b){a[b.fbid]={voteCount:b.voteCount,voteState:b.voteState};return a},{});return babelHelpers["extends"]({},a,f);case b("UFIActionTypes").COMMENT.UPDATE_VOTE_COUNT_AND_STATE:return babelHelpers["extends"]({},a,(e={},e[c.fbid]={voteCount:c.voteCount?c.voteCount:0,voteState:c.voteState?c.voteState:b("UFIConstants").UFICommentVoteType.NONE},e));case b("UFIActionTypes").COMMENT.CHANGE_VOTE:f=this.getOptimisticVoteState(this.getVoteState(c.fbid),c.arrowType);e=this.getOptimisticVoteCount(c.fbid,f);return babelHelpers["extends"]({},a,(d={},d[c.fbid]={voteCount:e,voteState:f},d));case b("UFIActionTypes").COMMENT.CHANGE_VOTE_SUCCESS:case b("UFIActionTypes").COMMENT.CHANGE_VOTE_FAILURE:return babelHelpers["extends"]({},a,(e={},e[c.fbid]={voteCount:c.voteCount,voteState:c.voteState},e));default:return a}};d.getVoteCount=function(a){return!this.getState()[a]?0:this.getState()[a].voteCount};d.getVoteState=function(a){return!this.getState()[a]?b("UFIConstants").UFICommentVoteType.NONE:this.getState()[a].voteState};d.$UFICommentVoteSyncStore1=function(a){switch(a){case b("UFIConstants").UFICommentVoteType.UPVOTE:return 1;case b("UFIConstants").UFICommentVoteType.DOWNVOTE:return-1;case b("UFIConstants").UFICommentVoteType.NONE:default:return 0}};d.$UFICommentVoteSyncStore2=function(a,b){return this.$UFICommentVoteSyncStore1(b)-this.$UFICommentVoteSyncStore1(a)};d.getOptimisticVoteCount=function(a,b){var c=this.getVoteCount(a);a=this.$UFICommentVoteSyncStore2(this.getVoteState(a),b);return c+a};d.getOptimisticVoteState=function(a,c){return a===c?b("UFIConstants").UFICommentVoteType.NONE:c};return c}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFICommercialBreakStore",["UFIDispatcherBase","UFIKeyValueStore"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getValueFor=function(b){return!!a.prototype.getValueFor.call(this,b)};c.getStateValue=function(a){switch(a.type){case"story_toggle_commercial_break":return a.inCommercial}return null};return b}(b("UFIKeyValueStore"));c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFIFeedbackStore",["FluxReduceStore","UFIDispatcherBase"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getInitialState=function(){return{}};c.reduce=function(a,b){var c;switch(b.type){case"instance_init":var d=b.payload;d=d.feedbacktarget?d.feedbacktarget:d.feedbacktargets&&d.feedbacktargets[0];return!d?a:babelHelpers["extends"]({},a,(c={},c[b.ftentidentifier]=babelHelpers["extends"]({orderingmodes:[],defaultcommentorderingmode:""},d),c))}return a};return b}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFIInteractionStore",["UFIDispatcherBase","UFIKeyValueStore"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getValueFor=function(b){return!!a.prototype.getValueFor.call(this,b)};c.getStateValue=function(a){switch(a.type){case"add_comment_change_content":case"add_comment_submit_edit":case"add_comment_submit_new":case"comment_change_reaction":case"comment_edit":case"comment_remove":case"comment_toggle_like":case"comment_toggle_mark_as_spam":case"comment_translate":case"story_change_order_mode":case"story_toggle_comments":case"story_page_in_comments":case"story_show_replies":case"story_toggle_replies":return!0}return null};return b}(b("UFIKeyValueStore"));c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFILiveTypingStore",["FluxReduceStore","UFIDispatcherBase"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.getNewFeedbackState=function(a){switch(a){case"story_friend_typing":case"story_someone_typing":return!0;case"story_typing_stopped":return!1;default:return null}};var c=b.prototype;c.getInitialState=function(){return{}};c.reduce=function(a,c){var d=b.getNewFeedbackState(c.type);if(d!==null){var e;a=babelHelpers["extends"]({},a,(e={},e[c.ftentidentifier]=d,e))}return a};return b}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFILiveVideoLoggingStore",["FluxReduceStore","LiveVideoViewerTypedLogger","UFIDispatcherBase"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return{}};d.reduce=function(a,c){switch(c.type){case"story_show_facecast_replies":var d;new(b("LiveVideoViewerTypedLogger"))().setEvent("opened_reply_thread_from_comment").setCommentID(c.commentID).log();return babelHelpers["extends"]({},a,(d={},d[c.instanceID]={comment_id:c.commentID,time_opened_ms:Date.now()},d));case"story_hide_facecast_replies":if(!c.isExplicit)return a;d=a[c.instanceID];if(d==null)return a;new(b("LiveVideoViewerTypedLogger"))().setEvent("closed_reply_thread_explicitly").setCommentID(d.comment_id).setReplyThreadDurationMs(Date.now()-d.time_opened_ms).log();return babelHelpers["extends"]({},a,(c={},c[d.comment_id]=null,c));default:return a}};return c}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFIOrderingModeStore",["invariant","FluxReduceStore","UFIDispatcherBase","UFIFeedbackStore"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return a.filter(function(a){return a.selected}).map(function(a){return a.value}).pop()||b}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new Map()};d.areEqual=function(a,b){return a===b};d.isLiveStreaming=function(a){return this.getState().get(a)=="live_streaming"};d.isInverted=function(a,c){var d=!1;c=b("UFIFeedbackStore").getState()[c];if(c){c=c.orderingmodes.filter(function(a){return a.selected}).pop();c&&(d=c.isBottomUpVideoCommentSreamingEnabled)}switch(a){case"recent_activity":case"ranked_threaded":case"ranked_unfiltered":case"live_streaming":return!d}return!1};d.getOrderingMode=function(a){a=this.getState().get(a);a!==void 0||g(0,2896);return a};d.reduce=function(a,c){switch(c.type){case"instance_init":if(a.has(c.instanceID))return a;b("UFIDispatcherBase").waitFor([b("UFIFeedbackStore").getDispatchToken()]);var d=b("UFIFeedbackStore").getState()[c.ftentidentifier];a=new Map(a);return a.set(c.instanceID,h(d.orderingmodes,d.defaultcommentorderingmode));case"story_change_order_mode":(!a.has(c.instanceID)||a.get(c.instanceID)!==c.mode)&&(a=new Map(a),a.set(c.instanceID,c.mode));return a}return a};return c}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFIReactionPendingRequestsStore",["FluxReduceStore","UFIActionTypes","UFIDispatcherBase"],(function(a,b,c,d,e,f){"use strict";function g(a){return a+"-comment"}function h(a){return a+"-story"}function i(a,b){var c;return babelHelpers["extends"]({},a,(c={},c[b]=(a[b]||0)+1,c))}function j(a,b){var c;return babelHelpers["extends"]({},a,(c={},c[b]=(a[b]||0)-1,c))}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return{}};d.reduce=function(a,c){switch(c.type){case b("UFIActionTypes").STORY.CHANGE_REACTION:return i(a,h(c.ftentidentifier));case b("UFIActionTypes").COMMENT.CHANGE_REACTION:return i(a,g(c.fbid));case b("UFIActionTypes").STORY.CHANGE_REACTION_SUCCESS:case b("UFIActionTypes").STORY.CHANGE_REACTION_FAILURE:return j(a,h(c.ftentidentifier));case b("UFIActionTypes").COMMENT.CHANGE_REACTION_FAILURE:case b("UFIActionTypes").COMMENT.CHANGE_REACTION_SUCCESS:return j(a,g(c.fbid))}return a};d.getPendingRequestsForComment=function(a){return this.getState()[g(a)]||0};d.getPendingRequests=function(a){return this.getState()[h(a)]||0};return c}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFIReactionSyncStore",["FluxReduceStore","UFIActionTypes","UFIDispatcherBase"],(function(a,b,c,d,e,f){"use strict";function g(a){return a+"-comment"}function h(a){return a+"-story"}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return{}};d.reduce=function(a,c){switch(c.type){case b("UFIActionTypes").INSTANCE.INIT:var d=c.payload;d=d.feedbacktarget?d.feedbacktarget:d.feedbacktargets&&d.feedbacktargets[0];if(!d)return a;var e=c.payload.comments.reduce(function(a,b){a[g(b.fbid)]=b.viewerreaction;return a},{});return babelHelpers["extends"]({},a,e,(e={},e[h(c.ftentidentifier)]=d.viewerreaction,e));case b("UFIActionTypes").STORY.CHANGE_REACTION_SUCCESS:return babelHelpers["extends"]({},a,(d={},d[h(c.ftentidentifier)]=c.reactionType,d));case b("UFIActionTypes").COMMENT.CHANGE_REACTION_SUCCESS:return babelHelpers["extends"]({},a,(e={},e[g(c.fbid)]=c.reactionType,e));default:return a}};d.getLastKnownCommentReaction=function(a){return this.getState()[g(a)]};d.getLastKnownReaction=function(a){return this.getState()[h(a)]};return c}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFIVideoPlayerControllerStore",["FluxReduceStore","UFIDispatcherBase"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getInitialState=function(){return{}};c.reduce=function(a,b){switch(b.type){case"found_video_player_controller":var c;return babelHelpers["extends"]({},a,(c={},c[b.instanceID]={videoPlayerController:b.videoPlayerController},c));default:return a}};c.getVideoPlayerController=function(a){var b;return(b=this.getState())!=null?(b=b[a])!=null?b.videoPlayerController:b:b};return b}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFISharedDispatcher",["UFIDispatcherBase","UFIFeedbackStore","UFICommentEditIDStore","UFICommentVisibilityStore","UFICommentVoteSyncStore","UFICommercialBreakStore","UFIComposerIsTypingStore","UFIInteractionStore","UFILivePinnedCommentStore","UFILiveTypingStore","UFILocallyComposedCommentStore","UFIOrderingModeStore","UFIReactionPendingRequestsStore","UFIReactionSyncStore","UFISpamStore","UFIThreadedFacecastCommentsStore","UFILiveVideoLoggingStore","UFIVideoPlayerControllerStore"],(function(a,b,c,d,e,f){"use strict";b("UFIFeedbackStore");b("UFICommentEditIDStore");b("UFICommentVisibilityStore");b("UFICommentVoteSyncStore");b("UFICommercialBreakStore");b("UFIComposerIsTypingStore");b("UFIFeedbackStore");b("UFIInteractionStore");b("UFILivePinnedCommentStore");b("UFILiveTypingStore");b("UFILocallyComposedCommentStore");b("UFIOrderingModeStore");b("UFIReactionPendingRequestsStore");b("UFIReactionSyncStore");b("UFISpamStore");b("UFIThreadedFacecastCommentsStore");b("UFILiveVideoLoggingStore");b("UFIVideoPlayerControllerStore");a=b("UFIDispatcherBase");e.exports=a}),null);
__d("UFICentralUpdatesLocalCommentAdapter",["ClientIDs","UFICentralUpdates","UFIDispatcherBase"],(function(a,b,c,d,e,f){"use strict";f.subscribeOnce=d;var g={},h=(e={},e[3]=a,e[12]=c,e);function i(){return b("UFICentralUpdates").subscribe("update-comments",function(a,b){if(b.comments){a=h[b.payloadsource];a&&b.comments.forEach(a)}})}function a(a){if(!b("ClientIDs").isExistingClientID(a.id))return;g[a.id]=a.ufiinstanceid;b("UFIDispatcherBase").dispatch({type:"CENTRALUPDATES_ADDED_COMMENT",instanceID:a.ufiinstanceid,ftentidentifier:a.ftentidentifier,clientID:a.id})}function c(a){if(!b("ClientIDs").isExistingClientID(a.clientid))return;var c=g[a.clientid];delete g[a.clientid];if(!c)return;b("UFIDispatcherBase").dispatch({type:"CENTRALUPDATES_SAVED_COMMENT",instanceID:c,ftentidentifier:a.ftentidentifier,clientID:a.clientid,commentID:a.id})}var j;function d(){if(!j){j=i();return j}return null}}),null);
__d("UFIPagedCommentListImpl",["ClientIDs","KeyedCallbackManager","UFICentralUpdates","UFICommentLogger","UFIConfig","UFIConstants","UFIFeedbackTargets"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var c=this;this.actorID=null;this.basePermalink=null;this.commentPermalinks=Object.create(null);this.count=0;this.dataSource=new(b("KeyedCallbackManager"))();this.deletedComments=Object.create(null);this.deletedCount=0;this.lastRequestedLength=0;this.lastRequestedOffset=0;this.feedbackTargetID=a;b("UFIFeedbackTargets").getFeedbackTarget(this.feedbackTargetID,function(a){c.actorID=a.actorforpost,c.basePermalink=a.permalink})}var c=a.prototype;c.setClientHasAll=function(a){};c.addOrUpdateComment=function(a){if(!a)return;a.__typename==="local"?this.$1(a.id):this.$2(a.id,a.clientid,a.legacyid);b("UFICentralUpdates").didUpdateFeedback(this.feedbackTargetID)};c.$1=function(a){this.dataSource.setResource(this.count,a),this.count++};c.$2=function(a,c,d){var e=c&&b("ClientIDs").isExistingClientID(c),f=this.dataSource.getAllResources(),g={};for(var h in f){var i=f[Number(h)];g[i]=h}if(e&&c&&c in g){g[a]=g[c];i=g[c];this.dataSource.setResource(i,a);b("UFIConfig").logCommentPost&&b("UFICommentLogger").logNewCommentReceived(c,Date.now())}else!g[a]&&c&&this.$1(a);d&&a in g&&(this.commentPermalinks[a]=this.buildCommentPermalink(a,d,g[a]))};c.addCommentIDs=function(a,c,d){var e={};for(var f=0;f<c;f++)e[a+f]=d[f]||b("UFIConstants").unavailableCommentKey;this.dataSource.addResourcesAndExecute(e);b("UFICentralUpdates").didUpdateFeedback(this.feedbackTargetID)};c.getComments=function(a,b,c,d){var e=this,f=new Array(b).fill().map(function(b,c){return c+a}),g=this.dataSource.getUnavailableResourcesFromRequest(f);if(g.length){var h=Math.min.apply(Math,g);g=Math.max.apply(Math,g);var i=h;g=g-h+1;(i<this.lastRequestedOffset||i+g>this.lastRequestedOffset+this.lastRequestedLength)&&(this.lastRequestedOffset=i,this.lastRequestedLength=g,this.fetchComments(i,g,c))}else this.dataSource.executeOrEnqueue(f,function(c){return d(e.commentsFromCommentIDs(c,a,b))})};c.getCommentsOrThrow=function(a){var b=this;a=[a.getLength(),a.getOffset()];var c=a[0],d=a[1],e={};new Array(c).fill().forEach(function(a,c){a=c+d;c=b.dataSource.getResource(a);if(!c)throw new Error("Tried to get nonexistent comment");e[a]=c});return this.commentsFromCommentIDs(e,d,c)};c.fetchComments=function(a,b,c){};c.commentsFromCommentIDs=function(a,b,c){return{}};c.reset=function(){var a=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return a};c.deleteComment=function(a){a in this.deletedComments||(this.deletedComments[a]=!0,this.deletedCount++)};c.updateCommentCount=function(a){this.count=a,this.deletedCount=0};c.getFeedbackTargetID=function(){return this.feedbackTargetID};c.getCommentCount=function(){return this.count};c.getDeletedCount=function(){return this.deletedCount};c.getDisplayedCommentCount=function(){return this.count-this.deletedCount};c.getBasePermalink=function(){return this.basePermalink};c.buildCommentPermalink=function(a,b,c){return null};c.getPermalinkForComment=function(a){return this.commentPermalinks[a]};return a}();e.exports=a}),null);
__d("UFIReplyCommentListImpl",["ActorURI","MercuryServerDispatcher","UFICommentLogger","UFIComments","UFIConfig","UFIPagedCommentListImpl","URI"],(function(a,b,c,d,e,f){"use strict";var g;a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c,d){b=a.call(this,b)||this;b.parentCommentID=c;b.containerOrderingMode=d;return b}var d=c.prototype;d.fetchComments=function(a,c,d){b("UFIConfig").logCommentLoad&&b("UFICommentLogger").logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:c,is_reply:!0});a={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[a],lengths:[c],feed_context:d?d.feedContext:null,numpagerclicks:d?d.numPagerClicks:null,containerorderingmode:this.containerOrderingMode,translate_all:d?d.translateAll:null};(!d||!d.viewAs)&&(a[b("ActorURI").PARAMETER_ACTOR]=this.actorID);b("MercuryServerDispatcher").trySend("/ajax/ufi/reply_fetch.php",a)};d.commentsFromCommentIDs=function(a,c,d){var e={};for(var f=0;f<d;f++){var g=b("UFIComments").getComment(a[c+f]);g&&(e[c+f]=g)}return e};d.reset=function(){var c=a.prototype.reset.call(this),d={};for(var e in c){var f=c[e];d[f]=!0}b("UFIComments").resetComments(d);return c};d.getParentCommentID=function(){return this.parentCommentID};d.buildCommentPermalink=function(a,c,d){if(!this.basePermalink)return null;a=this.getParentCommentID().split("_");d=c;a.length===2&&(d=a[1]);return new(g||(g=b("URI")))(this.basePermalink).addQueryData({comment_id:d,reply_comment_id:c}).toString()};return c}(b("UFIPagedCommentListImpl"));e.exports=a;b("MercuryServerDispatcher").registerEndpoints({"/ajax/ufi/reply_fetch.php":{mode:b("MercuryServerDispatcher").IMMEDIATE}})}),null);
__d("UFIToplevelPagedCommentListImpl",["ActorURI","MercuryServerDispatcher","UFICommentLogger","UFIComments","UFIConfig","UFIOrderingModeStore","UFIPagedCommentListImpl","URI"],(function(a,b,c,d,e,f){"use strict";var g;a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c,d){b=a.call(this,b)||this;b.clientHasAll=!1;b.orderingMode=c;b.section=d||"default";b.clientHasAll=!1;return b}var d=c.prototype;d.fetchComments=function(a,c,d){b("UFIConfig").logCommentLoad&&b("UFICommentLogger").logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:c,is_reply:!1});a={ft_ent_identifier:this.feedbackTargetID,viewas:d&&d.viewAs?d.viewAs+"":null,source:d&&d.feedbackSource,offset:a,length:c,orderingmode:this.orderingMode,section:this.section,direction:d&&d.direction,feed_context:d?d.feedContext:null,numpagerclicks:d?d.numPagerClicks:null,translate_all:d?d.translateAll:null,clientcommentcount:this.count};(this.orderingMode!=="ranked_threaded"||this.orderingMode!=="ranked_unfiltered"||this.orderingMode!=="recent_activity")&&delete a.clientcommentcount;(!d||!d.viewAs)&&(a[b("ActorURI").PARAMETER_ACTOR]=this.actorID);d&&d.interactionRequestCorrelationID&&(a.ircid=d.interactionRequestCorrelationID);b("MercuryServerDispatcher").trySend("/ajax/ufi/comment_fetch.php",a)};d.commentsFromCommentIDs=function(a,c,d){var e={},f=c,g=c+d-1,h=b("UFIOrderingModeStore").isInverted(this.orderingMode,this.feedbackTargetID);for(var i=0;i<d;i++){var j=h?g-i:f+i;j=b("UFIComments").getComment(a[j]);j&&(e[c+i]=j)}return e};d.getOrderingMode=function(){return this.orderingMode};d.getCommentSection=function(){return this.section};d.setClientHasAll=function(a){this.clientHasAll=a};d.getClientHasAll=function(){return this.clientHasAll};d.buildCommentPermalink=function(a,c,d){return!this.basePermalink?null:new(g||(g=b("URI")))(this.basePermalink).addQueryData({comment_id:c}).toString()};return c}(b("UFIPagedCommentListImpl"));e.exports=a;b("MercuryServerDispatcher").registerEndpoints({"/ajax/ufi/comment_fetch.php":{mode:b("MercuryServerDispatcher").IMMEDIATE}})}),null);
__d("UFICentralUpdates",["Arbiter","ArbiterMixin","LiveTimer","ODS","ShortProfiles","UFIConstants","UFIUserActions"],(function(a,b,c,d,e,f){"use strict";b("ODS").setEntitySample("feedback",1e-4);var g=0,h={},i={},j=[];function k(){if(!g){var a=h,b=i;h={};i={};Object.keys(a).length&&m("feedback-updated",a);Object.keys(b).length&&m("comments-updated",b);j.pop()}}function l(){if(j.length)return j[j.length-1];else return b("UFIConstants").UFIPayloadSourceType.UNKNOWN}function m(a,b){n.inform(a,{updates:b,payloadSource:l()})}var n=babelHelpers["extends"]({},b("ArbiterMixin"),{handleUpdateWithUserAction:function(a,c){var d=this;c.actions.forEach(function(e){a==b("UFIConstants").UFIPayloadSourceType.ENDPOINT_HIDE_COMMENT?Object.prototype.hasOwnProperty.call(e,"commentid")&&(b("UFIUserActions").setHideAsSpam(e.commentid,!0,{source:13}),b("Arbiter").inform("bulk_actions_hidden",{})):d.handleUpdate(a,c)})},handleUpdate:function(a,c){var d=this;Object.keys(c).length&&this.synchronizeInforms(function(){j.push(a);var e=babelHelpers["extends"]({payloadsource:l()},c);e.adjustedRanges&&d.inform("update-ranges",e);d.inform("update-feedback",e);d.inform("update-comment-lists",e);d.inform("update-comments",e);d.inform("update-actions",e);b("ShortProfiles").setMulti(c.profiles||{});c.servertime&&b("LiveTimer").restart(c.servertime)})},didUpdateFeedback:function(a){h[a]=!0,k()},didUpdateComment:function(a){i[a]=!0,k()},synchronizeInforms:function(a){g++;try{a()}catch(a){throw a}finally{g--,k()}}});a=n;e.exports=a}),null);
__d("UFICommentAction",[],(function(a,b,c,d,e,f){"use strict";f.bulkReview=a;f.changeReaction=b;f.changeReactionSuccess=c;f.changeReactionFailure=d;f.changeVote=e;f.changeVoteFailure=g;f.changeVoteSuccess=h;f.updateVoteCountAndState=i;f.mounted=j;f.unmounted=k;f.changeVisibility=l;f.edit=m;f.remove=n;f.removeAndBlock=o;f.delete_comment_and_remove_commenter=p;f.mute_member=q;f.toggle_text_delights=r;f.removePreview=s;f.toggleLike=t;f.translate=u;f.markAsSpam=v;f.markAsNotSpam=w;f.inlineBan=x;f.undoInlineBan=y;f.inlineStreamBan=z;f.undoInlineStreamBan=A;f.inlineSuspension=B;f.undoInlineSuspension=C;f.embed=D;f.deleteCommentWithFeedback=E;f.pinByAuthor=F;f.manageConstituentBadge=G;f.keepSpam=H;f.appealSpam=I;f.secureAccount=J;function a(a,b){return{type:"bulk_review",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b}}function b(a,b,c,d){return{type:"comment_change_reaction",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,reactionType:c,target:d}}function c(a,b,c){return{type:"comment_change_reaction_success",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,reactionType:c}}function d(a,b,c){return{type:"comment_change_reaction_failure",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,reactionType:c}}function e(a,b,c,d,e){return{arrowType:e,comment:b,currentVoteState:d,fbid:b.fbid,ftentidentifier:a.ftentidentifier,instanceID:a.instanceid,target:c,type:"comment_change_vote"}}function g(a,b,c,d){return{comment:b,fbid:b.fbid,ftentidentifier:a.ftentidentifier,instanceID:a.instanceid,type:"comment_change_vote_failure",voteCount:c,voteState:d}}function h(a,b,c,d){return{comment:b,fbid:b.fbid,ftentidentifier:a.ftentidentifier,instanceID:a.instanceid,type:"comment_change_vote_success",voteCount:c,voteState:d}}function i(a,b,c,d){return{fbid:b,ftentidentifier:a.ftentidentifier,instanceID:a.instanceid,type:"comment_update_vote_count_and_state",voteCount:c,voteState:d}}function j(a,b){return{type:"comment_mounted",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.comment.fbid,renderedComment:b,contextArgs:a}}function k(a,b){return{type:"comment_unmounted",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.comment.fbid,renderedComment:b,contextArgs:a}}function l(a,b,c){return{type:"comment_change_visibility",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.comment.fbid,renderedComment:b,contextArgs:a,visibility:c}}function m(a,b){return{type:"comment_edit",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b}}function n(a,b,c,d,e){e===void 0&&(e=!1);return{type:"comment_remove",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,target:c,onConfirm:d,skipConfirmation:e}}function o(a,b,c,d){return{type:"comment_remove_and_block",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,target:c,onConfirm:d}}function p(a,b,c,d){return{type:"comment_delete_and_commenter_remove",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,target:c,onConfirm:d}}function q(a,b,c,d){return{type:"commenter_muted",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,target:c,onConfirm:d}}function r(a,b,c){return{type:"comment_toggle_text_delights",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,target:c}}function s(a,b,c){return{type:"comment_remove_preview",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,target:c}}function t(a,b,c){return{type:"comment_toggle_like",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,like:!b.hasviewerliked,target:c}}function u(a,b,c){return{type:"comment_translate",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,trigger:c}}function v(a,b,c){return{type:"comment_toggle_mark_as_spam",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,is_spam:!0,target:c}}function w(a,b,c){return{type:"comment_toggle_mark_as_spam",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,is_spam:!1,target:c}}function x(a,b,c,d){return{type:"comment_toggle_inline_ban",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,is_banned:!0,ownerid:d,target:c}}function y(a,b,c,d){return{type:"comment_toggle_inline_ban",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,is_banned:!1,ownerid:d,target:c}}function z(a,b,c,d){return{type:"comment_toggle_inline_stream_ban",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,is_banned:!0,ownerid:d,target:c}}function A(a,b,c,d){return{type:"comment_toggle_inline_stream_ban",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,is_banned:!1,ownerid:d,target:c}}function B(a,b,c,d,e){return{type:"comment_toggle_inline_suspension",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,is_suspended:!0,suspension_duration_seconds:e,ownerid:d,target:c}}function C(a,b,c,d){return{type:"comment_toggle_inline_suspension",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,is_suspended:!1,suspension_duration_seconds:0,ownerid:d,target:c}}function D(a,b){return{type:"embed",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b}}function E(a,b,c){return{type:"comment_delete_with_feedback",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,target:c}}function F(a,b,c){return{comment:b,type:"comment_change_author_pin",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,pinnedByAuthor:c}}function G(a,b){return{type:"comment_manage_constituent_badge",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b}}function H(a,b,c){return{type:"comment_toggle_keep_spam",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,fbid:b.fbid,comment:b,target:c}}function I(a,b,c,d){return{type:"comment_toggle_appeal_spam",instanceID:a.instanceid,ftentidentifier:b.fbid,fbid:b.fbid,comment:b,target:c,feedback:d}}function J(a,b,c,d){return{type:"comment_toggle_secure_account",instanceID:a.instanceid,ftentidentifier:b.fbid,fbid:b.fbid,comment:b,target:c,feedback:d}}}),null);
__d("XUFICommentVoteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/vote/",{new_vote_count:{type:"Int"},new_vote_state:{type:"Enum",enumType:0},old_vote_count:{type:"Int"},old_vote_state:{type:"Enum",enumType:0}})}),null);
__d("UFICommentVoteUserActions",["AsyncRequest","AsyncResponse","ChannelClientID","ClientIDs","UFICentralUpdates","UFICommentAction","UFIComments","UFICommentVoteSyncStore","UFIConstants","UFIFeedbackTargets","UFISharedDispatcher","XUFICommentVoteController"],(function(a,b,c,d,e,f){"use strict";f.changeCommentVote=a;var g=null;function a(a,c,d,e,f,k){var l=b("UFIComments").getComment(a),m=b("UFICommentVoteSyncStore").getVoteCount(c),n=b("UFICommentVoteSyncStore").getOptimisticVoteState(e,d),o=b("UFICommentVoteSyncStore").getOptimisticVoteCount(c,n);if(!l||l.__typename!=="saved"||e===n)return;b("UFIFeedbackTargets").getFeedbackTarget(l.ftentidentifier,function(c){c=j(l,c,o,n);b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:c});g&&g.abort();c=b("XUFICommentVoteController").getURIBuilder().getURI();g=new(b("AsyncRequest"))().setURI(c).setMethod("POST").setData({client_id:b("ClientIDs").getNewClientID(),comment_id:a,ft_ent_identifier:l.ftentidentifier,instance_id:f.instanceid,legacy_id:l.legacyid,new_vote_count:o,new_vote_state:n,old_vote_count:m,old_vote_state:e,session_id:b("ChannelClientID").getID(),source:f.source}).setErrorHandler(function(a){h(a)}).setHandler(function(a){i(a)})});g&&g.send()}function h(c){var a=c.request;if(!a||!a.data)return;a=a.data;var d=b("UFIComments").getComment(a.comment_id);if(!d||d.__typename!=="saved")return;var e=a.ft_ent_identifier,f=a.instance_id,h=a.old_vote_count;a=a.old_vote_state;if(!e||!f)return;b("UFISharedDispatcher").dispatch(b("UFICommentAction").changeVoteFailure({instanceid:f,ftentidentifier:e},d,h,a));b("AsyncResponse").defaultErrorHandler(c)}function i(a){a=a.request;if(!a||!a.data)return;a=a.data;var c=b("UFIComments").getComment(a.comment_id);if(!c||c.__typename!=="saved")return;var d=a.ft_ent_identifier,e=a.instance_id,f=a.new_vote_count;a=a.new_vote_state;if(!d||!e)return;b("UFISharedDispatcher").dispatch(b("UFICommentAction").changeVoteSuccess({instanceid:e,ftentidentifier:d},c,f,a))}function j(a,c,d,e){var f=a.id;c=[k(a,d,e,f,c.actorforpost)];a.voteState!==e&&c.push({commentID:f,actionType:b("UFIConstants").UFIActionType.COMMENT_VOTE,voteCount:d,voteEnabled:!0,voteState:e});return c}function k(a,c,d,e,f){return{actionType:b("UFIConstants").UFIActionType.COMMENT_VOTE,commentID:e,voteCount:c,voteEnabled:a.voteEnabled,voteState:d}}}),null);
__d("UFIComments",["invariant","ClientIDs","ImmutableObject","UFICentralUpdates","UFIConstants","randomInt"],(function(a,b,c,d,e,f,g){"use strict";f.getRenderKey=a;f.getLocalID=J;f.getComment=K;f.setComment=L;f.setCacheVariable=c;f.getCacheVariable=d;f.resetComments=e;f.getCommentsForAuthor=M;f.getCommentsForFTEntIdentifier=N;var h=5,i={},j={},k={},l={},m={};l.shareOnComment=m;var n="DONT_SHOW_SHARE_OPTION";function o(a){return a in j?j[a]:a}function p(a,c){a.forEach(function(a){var d=a.ftentidentifier,e=b("UFIConstants").UFIPayloadSourceType,f=a.clientid,g=!1,l=babelHelpers["extends"]({},a);if(f){delete l.clientid;g=b("ClientIDs").isExistingClientID(f);if(g&&j[f])return}(c===b("UFIConstants").UFIPayloadSourceType.LIVE_SEND||c===b("UFIConstants").UFIPayloadSourceType.STREAMING)&&(l.islive=!0);(c===e.ENDPOINT_COMMENT_FETCH||c===e.ENDPOINT_ID_COMMENT_FETCH)&&(l.fromfetch=!0);g&&i[f]&&(l.ufiinstanceid=i[f].ufiinstanceid,l.trackingID=i[f].trackingID,j[f]=a.id,k[a.id]=f,i[a.id]=i[f],delete i[f],b("UFICentralUpdates").didUpdateComment(f));if(c===e.LIVE_SEND||c===b("UFIConstants").UFIPayloadSourceType.STREAMING||c===e.USER_ACTION||c===e.ENDPOINT_ADD_COMMENT||c===e.ENDPOINT_EDIT_COMMENT){l.isunseen=!0;if(a.body&&a.body.text&&a.body.text.trim().split(/\s+/).length>=h&&(c===e.USER_ACTION||c===e.ENDPOINT_ADD_COMMENT)){g=m[d];g!==n&&(m[d]=!g||a.id===g||J(a.id)===g?a.id:n)}}L(a.id,new(b("ImmutableObject"))(l));b("UFICentralUpdates").didUpdateComment(a.id);b("UFICentralUpdates").didUpdateFeedback(d)})}function q(a,c){for(var d=0;d<a.length;d++){var e=a[d];switch(e.actiontype){case b("UFIConstants").UFIActionType.LIKE_ACTION:K(e.entidentifier)&&t(e.clientid,e.entidentifier,e.hasviewerliked,e.likecount,e.reactiondata,c);break;case b("UFIConstants").UFIActionType.COMMENT_LIKE:t(e.clientid,e.commentid,e.viewerliked,e.likecount,e.reactiondata,c);break;case b("UFIConstants").UFIActionType.MUTE_MEMBER:u(e);break;case b("UFIConstants").UFIActionType.REACTION:K(e.entidentifier)&&v(e.entidentifier,e);break;case b("UFIConstants").UFIActionType.COMMENT_REACTION:v(e.commentid,e);break;case b("UFIConstants").UFIActionType.DELETE_COMMENT:z(e);break;case b("UFIConstants").UFIActionType.LIVE_DELETE_COMMENT:A(e);break;case b("UFIConstants").UFIActionType.CHANGE_ACCEPTED_ANSWER:B(e);break;case b("UFIConstants").UFIActionType.REMOVE_PREVIEW:C(e);break;case b("UFIConstants").UFIActionType.COMMENT_SET_SPAM:D(e);break;case b("UFIConstants").UFIActionType.COMMENT_KEEP_SPAM:E(e);break;case b("UFIConstants").UFIActionType.CONFIRM_COMMENT_REMOVAL:F(e);break;case b("UFIConstants").UFIActionType.TRANSLATE_COMMENT:x(e);break;case b("UFIConstants").UFIActionType.COMMENT_LIKECOUNT_UPDATE:w(e);break;case b("UFIConstants").UFIActionType.UPDATE_CONSTITUENT_BADGE:H(e);break;case b("UFIConstants").UFIActionType.COMMENT_VOTE:s(e);break;case b("UFIConstants").UFIActionType.COMMENT_AUTHOR_PIN_CHANGE:r(e)}}}function r(a){var b=K(a.commentid);b&&I(b.id,{ispinnedbyauthor:a.ispinnedbyauthor})}function s(a){var b=K(a.commentID);b&&I(b.id,{voteCount:a.voteCount,voteEnabled:a.voteEnabled,voteState:a.voteState})}function t(a,c,d,e,f,g){g=K(c);if(g){g={};a=a&&b("ClientIDs").isExistingClientID(a);a||(g.hasviewerliked=d,g.likecount=e,f&&(g.reactioncount=f.reactioncount,g.reactioncountmap=f.reactioncountmap,g.reactioncountreduced=f.reactioncountreduced,g.viewerreaction=f.viewerreaction));g.likeconfirmhash=b("randomInt")(0,1024);I(c,g)}}function u(a){for(var b in i){var c=i[b];if(c.author===a.authorid){c={};c.ismuted=a.shouldmute;I(b,c)}}}function v(a,c){var d=K(a);if(d){var e={};if(c.clientid&&b("ClientIDs").isExistingClientID(c.clientid)&&c.viewerreaction!==d.viewerreaction)return;e.hasviewerliked=c.hasviewerliked;e.likecount=c.likecount;e.reactioncount=c.reactioncount;e.reactioncountmap=c.reactioncountmap;e.reactioncountreduced=c.reactioncountreduced;e.viewerreaction=c.viewerreaction;I(a,e)}}function w(a){var c=K(a.commentid);if(c&&a.hasviewerliked===c.hasviewerliked){c={likecount:a.likecount,likeconfirmhash:b("randomInt")(0,1024)};I(a.commentid,c)}}function x(a){var b=a.commentid,c=K(b);if(c){c={translationdata:a.translationdata};I(b,c)}}function y(a){a={reportLink:a.reportLink,commenterIsFOF:a.commenterIsFOF,userIsMinor:a.userIsMinor,giveFeedbackLink:a.giveFeedbackLink,reportOptionsLink:a.reportOptionsLink,isBroadcast:a.isBroadcast,showStreamBanControls:a.showStreamBanControls};return a}function z(a){a=K(a.commentid);a&&G(a,b("UFIConstants").UFIStatus.DELETED)}function A(a){a=K(a.commentid);a&&a.status!==b("UFIConstants").UFIStatus.DELETED&&G(a,b("UFIConstants").UFIStatus.LIVE_DELETED)}function B(a){I(a.commentid,{postacceptedanswer:a.isaccepted?a.commentid:null})}function C(a){I(a.commentid,{attachment:null})}function D(a){var c=K(a.commentid);a=a.shouldHideAsSpam?b("UFIConstants").UFIStatus.SPAM_DISPLAY:null;c&&G(c,a)}function E(a){a=K(a.commentid);a&&I(a.id,{needsApproval:!1,isApproved:!0})}function F(a){I(a.commentid,y(a))}function G(a,b){I(a.id,{priorstatus:a.status,status:b})}function H(a){var b=K(a.commentid);if(b){b={constituentTitle:a.constituentTitle,hasConstituentBadge:a.hasConstituentBadge};I(a.commentid,b)}}function I(a,c){var d=K(a)||new(b("ImmutableObject"))({});L(a,b("ImmutableObject").set(d,c));b("UFICentralUpdates").didUpdateComment(d.id);b("UFICentralUpdates").didUpdateFeedback(d.ftentidentifier)}function a(a){return"comment"+(a in k?k[a]:a)}function J(a){return a in k?k[a]:a}function K(a){return a===b("UFIConstants").unavailableCommentKey?null:i[o(a)]}function L(a,c){c instanceof b("ImmutableObject")||g(0,4388),i[o(a)]=c}function c(a,b){a.length!==0||g(0,4389),l[a]=b}function d(a){return l[a]}function e(a){for(var b in a)delete i[o(b)]}function M(a){var b=[];for(var c in i){var d=i[c];d.author==a&&b.push(d)}return b}function N(a){var b=[];for(var c in i){var d=i[c];d.ftentidentifier==a&&b.push(d)}return b}b("UFICentralUpdates").subscribe("update-comments",function(a,b){b.comments&&b.comments.length&&p(b.comments,b.payloadsource),b.privatecomments&&b.privatecomments.length&&p(b.privatecomments,b.payloadsource),b.pinnedcomments&&b.pinnedcomments.length&&p(b.pinnedcomments,b.payloadsource),b.livethreadedcomments&&b.livethreadedcomments.length&&p(b.livethreadedcomments,b.payloadsource),b.authorpinnedcomments&&b.authorpinnedcomments.length&&p(b.authorpinnedcomments,b.payloadsource)});b("UFICentralUpdates").subscribe("update-actions",function(a,b){b.actions&&b.actions.length&&q(b.actions,b.payloadsource)})}),6);
__d("UFIFeedbackTargets",["Bootloader","KeyedCallbackManager","UFICentralUpdates"],(function(a,b,c,d,e,f){"use strict";f.getFeedbackTarget=a;f.getFeedbackTargetIfExists=c;f.unsubscribe=d;var g=new(b("KeyedCallbackManager"))();function h(a){var c;if(!a)return;var d=babelHelpers["extends"]({},a);delete d.commentlist;delete d.commentcount;b("UFICentralUpdates").didUpdateFeedback(a.entidentifier);g.addResourcesAndExecute((c={},c[a.entidentifier]=d,c))}function i(a,c){b("Bootloader").loadModules(["UFIFeedbackMutator"],function(b){for(var d=0;d<a.length;d++){var e=a[d];e.arecommentsdisabled=!!e.arecommentsdisabled;e.cancomment=!!e.cancomment;e.hasviewerliked=!!e.hasviewerliked;e.hasviewersubscribed=!!e.hasviewersubscribed;e.likecount=e.likecount||0;var f=g.getResource(e.entidentifier);if(!f)break;var i=b.getHandlerForAction(e);h(i(f,e,c))}},"UFIFeedbackTargets")}function a(a,b){a=g.executeOrEnqueue(a,b);return a}function c(a){return g.getResource(a)||null}function d(a){g.unsubscribe(a)}b("UFICentralUpdates").subscribe("update-feedback",function(a,b){a=b.feedbacktarget?b.feedbacktarget:b.feedbacktargets&&b.feedbacktargets[0];a&&h(a)});b("UFICentralUpdates").subscribe("update-actions",function(a,b){b.actions&&b.actions.length&&i(b.actions,b.payloadsource)})}),6);
__d("NumberFormat",["NumberFormatConfig","intlNumUtils"],(function(a,b,c,d,e,f){f.formatIntegerWithDelimiter=a;f.formatInteger=c;var g=/(\d{3})(?=\d)/g;function h(a){return(""+a).split("").reverse().join("")}function a(a,c){if(Math.abs(a).toString().length<b("NumberFormatConfig").minDigitsForThousandsSeparator)return a.toString();a=h(""+a);return h(a.replace(g,"$1"+c))}function c(a){return b("intlNumUtils").formatNumberWithThousandDelimiters(a)}}),null);
__d("UFIReactionsUtils",[],(function(a,b,c,d,e,f){f.getReactionData=a;f.getReactionCountMapFromSummary=b;function a(a,b,c,d){b=parseInt(b,10);var e=!!b,f=a.reactorids?a.reactorids.slice(0):[],g=f.indexOf(c),h=0;e?g<0&&(c&&f.unshift(c),h=1):g>-1&&(f.splice(g,1),h=-1);g=Math.max(a.reactioncount+h,0);h=a.reactioncountreduced;h&&!isNaN(h)&&(d?h=d(g):h=g.toString());d=a.reactioncountmap||{};var i,j=a.viewerreaction;j&&d[j]&&(d[j]["default"]=Math.max((d[j]["default"]||0)-1,0),i=d[j].reduced,i&&!isNaN(i)&&(d[j].reduced=d[j]["default"].toString()));e&&d[b]&&(d[b]["default"]=(d[b]["default"]||0)+1,i=d[b].reduced,i&&!isNaN(i)&&(d[b].reduced=d[b]["default"].toString()));i=a.userreactions;(!i||Array.isArray(i))&&(i={});c&&(e?i[c]=b:delete i[c]);e=null;if(a.reactionsentences){c=!(j&&b);e={current:a.reactionsentences[c?"alternate":"current"],alternate:a.reactionsentences[c?"current":"alternate"]}}return{reactioncount:g,reactioncountmap:d,reactioncountreduced:h,reactionsentences:e,reactorids:f,userreactions:i,viewerreaction:b}}function b(a){var b={};if(!a)return b;for(var c=0;c<a.length;c++){var d=a[c],e=d.feedback_reaction.key;b[e]={"default":d.reactors&&d.reactors.count,reduced:d.reactors&&d.reactors.display_count}}return b}}),null);
__d("UFIStoryAction",[],(function(a,b,c,d,e,f){"use strict";f.changeAcceptedAnswer=a;f.commentsArrived=b;f.pageInComments=c;f.showComments=d;f.showReplies=e;f.spamFetched=g;f.changeReaction=h;f.changeReactionSuccess=i;f.changeReactionFailure=j;f.toggleReplies=k;f.someoneTyping=l;f.typingStopped=m;f.pinComment=n;f.unpinComment=o;f.showFacecastReplies=p;f.hideFacecastReplies=q;f.addFacecastReply=r;f.addFacecastReplies=s;f.facecastRepliesLoaded=t;f.setCommentsScrollDistance=u;f.handleNewComments=v;f.handleNewFacecastReply=w;f.setCommentReactionsMenuShown=x;function a(a,b,c){return{type:"story_change_accepted_answer",instanceID:a.instanceid,ftentidentifier:b.ftentidentifier,comment:b,doAccept:c}}function b(a,b,c,d,e,f,g){return{type:"story_comments_arrived",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,section:e,newOffset:b,newLength:c,source:d,interactionRequestCorrelationID:f,liveVideoCommentPermalinkID:g}}function c(a,b,c,d,e){return{type:"story_page_in_comments",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,interactionRequestCorrelationID:a.interactionRequestCorrelationID,commentID:b,direction:c,nextRange:d,section:e}}function d(a){return{type:"story_show_comments",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier}}function e(a,b,c){return{type:"story_show_replies",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,commentID:b,initiatorComment:c}}function g(a,b,c,d){return{type:"story_spam_fetched",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,viewas:b,commentIDs:c,parentCommentID:d}}function h(a,b,c,d,e){d===void 0&&(d=null);e===void 0&&(e=null);return{type:"story_change_reaction",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,contextArgs:a,reactionType:b,target:c,sphericalYaw:d,sphericalPitch:e}}function i(a,b){return{type:"story_change_reaction_success",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,reactionType:b}}function j(a,b){return{type:"story_change_reaction_failure",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,reactionType:b}}function k(a,b){return{type:"story_toggle_replies",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,commentID:b}}function l(a){return{type:"story_someone_typing",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier}}function m(a){return{type:"story_typing_stopped",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier}}function n(a,b,c){c===void 0&&(c=null);return{type:"story_live_pin_comment",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,commentID:b,pinEventID:c}}function o(a,b){b===void 0&&(b=null);return{type:"story_live_unpin_comment",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,commentID:null,pinEventID:b}}function p(a,b){return{type:"story_show_facecast_replies",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,commentID:b}}function q(a,b){return{type:"story_hide_facecast_replies",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,isExplicit:b}}function r(a,b){return{type:"story_add_facecast_reply",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,replyCommentID:b}}function s(a,b){return{type:"story_add_facecast_replies",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,replyCommentIDs:b}}function t(a,b){return{type:"facecast_replies_loaded",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,commentID:b}}function u(a,b){return{type:"set_comments_scroll_distance",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,scrollDist:b}}function v(a,b){return{type:"handle_new_comments",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,numComments:b}}function w(a,b){return{type:"handle_new_facecast_reply",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,replyCommentID:b}}function x(a,b){return{type:"set_comment_reactions_menu_shown",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,commentReactionsMenuShown:b}}}),null);
__d("UFIUserActionUtils",["Nectar","TrackingNodes","collectDataAttributes"],(function(a,b,c,d,e,f){f.trackingData=a;function a(a){if(!a)return{ft:{}};var c={ft:b("collectDataAttributes")(a,["ft"]).ft};if(g(c.ft.tn))return{};b("Nectar").addModuleData(c,a);return c}function g(a){if(a){a=b("TrackingNodes").parseTrackingNodeString(a);for(var c=0;c<a.length;c++){var d=a[c][0];switch(d){case b("TrackingNodes").types.COMMENT:return!0}}}return!1}}),null);
__d("UFIVideoPlayerRegistry",["EventEmitter","ViewportBounds","destroyOnUnload","getOrCreateDOMID"],(function(a,b,c,d,e,f){"use strict";var g=new(b("EventEmitter"))(),h=new Map(),i=new Map(),j=new Map(),k=new Map(),l=new Set(),m=new Map();b("destroyOnUnload")(function(){g.removeAllListeners(),h.clear(),i.clear(),j.clear(),k.clear(),l.clear()});function n(a){a=a;var b=[];while(a)b.unshift(a),a=a.parentElement;return b}function o(a,b){var c=n(a);a=null;var d=null;b.forEach(function(b){var e=b[0];b=b[1];e=n(e);for(var f=0;f<c.length;++f){if(c[f]!==e[f]){(d===null||f>d)&&(d=f,a=b);break}f===c.length-1&&((d===null||f>d)&&(d=f,a=b))}});return a}function p(a,b){var c=n(a);a=null;var d=null;b.forEach(function(b){var e=b[0];b=b[1];e=n(e);for(var f=0;f<c.length;++f)if(c[f]!==e[f]){(d===null||f>d)&&(d=f,a=b);break}});return a}var q={registerVideoPlayerController:function(a){var b=this,c=a.getVideoID(),d=k.get(c);d?d.push(a):(d=[a],k.set(c,d),j["delete"](c));l.forEach(function(a){return a()});a=h.get(c);if(!a)return;a.forEach(function(a){return b._associateUFIController(a,c)})},addOnRegisterListener:function(a){l.add(a)},removeOnRegisterListener:function(a){l["delete"](a)},getAvailableVideoPlayerController:function(a){return i.get(a)},seekAvailableVideoPlayerController:function(a,b){a=q.getAvailableVideoPlayerController(a);if(!a)return;["ready","playing","paused","finished"].includes(a.getState())&&(a.pause("seek_initiated"),a.seek(b),a.play("seek_initiated"))},scrollToAvailableVideo:function(a){a=q.getAvailableVideoPlayerController(a);if(!a)return;a=b("ViewportBounds").getElementPosition(a.getRootNode());window.scroll(0,a.y)},setAvailableVideoPlayerControllerSphericalViewport:function(a,b){a=q.getAvailableVideoPlayerController(a);if(!a)return;a.emit("SphericalVideoViewportTagComment/click",b)},getAvailableVideoPlayerControllerForElement:function(a,c){if(!a)return null;var d=j.get(c)||new Map(),e=b("getOrCreateDOMID")(a);a=d.get(e)||this.findVideoPlayerControllerForElement(a,c);d.set(e,a);j.set(c,d);return a},getAvailableVideoPlayerControllerTimeForElement:function(a,b){if(!a)return null;a=q.getAvailableVideoPlayerControllerForElement(a,b);if(!a)return null;b=a.getCurrentTimePosition();return b>=0?Math.floor(b):null},getAvailableVideoPlayerControllerTime:function(a){a=q.getAvailableVideoPlayerController(a);if(!a)return null;a=a.getCurrentTimePosition();return a>=0?Math.floor(a):null},registerUFIController:function(a,b,c){var d=a.getInstanceID(),e=a.getFluentContentToken();if(!e)return;var f=h.get(e);f?f.push(a):(f=[a],h.set(e,f));g.addListener(d+"/register",b);g.addListener(d+"/unregister",c);this._associateUFIController(a,e)},getAvailableUFIController:function(a){var b=m.get(a);if(b)return b;var c=h.get(a.getVideoID());if(!c)return null;c.length===1?b=c[0]:b=p(a.getRootNode(),c.map(function(a){return[a.getRootNode(),a]}));if(b){c=this.findVideoPlayerControllerForElement(b.getRootNode(),a.getVideoID());if(c!==a)return null;m.set(a,b)}return b},findVideoPlayerControllerForElement:function(a,b){b=k.get(b);if(!b)return null;if(b.length===1)return b[0];return!a?null:o(a,b.filter(function(a){return!a.isState("destroyed")}).map(function(a){return[a.getRootNode(),a]}))},unregisterVideoPlayerControllerForElement:function(a,b){var c=k.get(b);if(!c)return;var d=this.findVideoPlayerControllerForElement(a,b);if(d==null)return;a=c.findIndex(function(a){return a.getRootNode()===d.getRootNode()});c.splice(a,1);k.set(b,c)},_associateUFIController:function(a,c){var d=a.getInstanceID();a=this.findVideoPlayerControllerForElement(a.getRootNode(),c);if(!a||a.isState("destroyed"))return;c=i.get(d);if(c){if(!c.isState("destroyed")&&b("getOrCreateDOMID")(c.getRootNode())===b("getOrCreateDOMID")(a.getRootNode()))return;g.emit(d+"/unregister")}i.set(d,a);g.emit(d+"/register",a)}};e.exports=q}),null);
__d("XUFICommentReactionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/reaction/",{reaction_type:{type:"Enum",enumType:0}})}),null);
__d("XUFIReactionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/reaction/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},is_inline:{type:"Bool",defaultValue:!1},is_comment:{type:"Bool",defaultValue:!1},is_permalink:{type:"Bool",defaultValue:!1},action_source:{type:"String"},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:!1},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:!1},bgsync_id:{type:"String"},aftercursor:{type:"String"},tab:{type:"String"},_ft_:{type:"String"}})}),null);
__d("UFIReactionUserActions",["ActorURI","AsyncResponse","ChannelClientID","ClientIDs","MercuryServerDispatcher","NumberFormat","QE2Logger","UFICentralUpdates","UFICommentAction","UFIComments","UFIConfig","UFIConstants","UFIFeedbackTargets","UFIReactionPendingRequestsStore","UFIReactionsUtils","UFIReactionSyncStore","UFIReactionTypes","UFISharedDispatcher","UFIStoryAction","UFIUserActionUtils","UFIVideoPlayerRegistry","XUFICommentReactionController","XUFIReactionController","ifRequired","setImmediate"],(function(a,b,c,d,e,f){"use strict";f.changeReaction=a;f.changeCommentReaction=c;function a(a,c,d,e,f,g){f===void 0&&(f=null),g===void 0&&(g=null),b("UFIFeedbackTargets").getFeedbackTarget(a,function(h){var i=p(h,c);b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:i});i=b("UFIUserActionUtils").trackingData(e);var j={};j[b("ActorURI").PARAMETER_ACTOR]=h.actorforpost;var k=babelHelpers["extends"]({client_id:b("ClientIDs").getNewClientID(),ft_ent_identifier:a,reaction_type:c,root_id:d.rootid,session_id:b("ChannelClientID").getID(),source:d.source,feedback_referrer:d.feedbackReferrer,instance_id:d.instanceid},j,i);if(d.fluentContentToken){h=d.fluentContentToken;var l=b("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerForElement(e,h);l&&l.isSpherical()&&(k.video_playback_timestamp=b("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(e,h));d.isLiveVOD?k.on_demand_content_time_offset=b("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(e,h):d.islivestreaming&&(k.live_content_time_offset=b("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(e,h));l&&l.isSpherical()&&b("ifRequired")("SphericalViewportControlStore",function(a){a=a.getOrientation(l.getVideoPlayerID());a&&(f!==null&&g!==null?(k.spherical_yaw=f,k.spherical_pitch=g):(k.spherical_pitch=Math.round(a.pitch),k.spherical_yaw=Math.round(a.yaw)))})}b("MercuryServerDispatcher").trySend(b("XUFIReactionController").getURIBuilder().getURI(),k)})}function c(a,c,d,e){var f=b("UFIComments").getComment(a);f&&f.__typename==="saved"&&f.viewerreaction!=c&&b("UFIFeedbackTargets").getFeedbackTarget(f.ftentidentifier,function(g){var h=b("UFIUserActionUtils").trackingData(e),i=o(f,g,c);b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:i});i={};i[b("ActorURI").PARAMETER_ACTOR]=g.actorforpost;b("MercuryServerDispatcher").trySend(b("XUFICommentReactionController").getURIBuilder().getURI(),babelHelpers["extends"]({comment_id:a,legacy_id:f.legacyid,reaction_type:c,ft_ent_identifier:f.ftentidentifier,source:d.source,instance_id:d.instanceid,client_id:b("ClientIDs").getNewClientID(),session_id:b("ChannelClientID").getID()},h,i))})}a={};f=b("XUFIReactionController").getURIBuilder().getURI();a[f]={mode:b("MercuryServerDispatcher").IMMEDIATE,error_handler:k,handler:j};c=b("XUFICommentReactionController").getURIBuilder().getURI();a[c]={mode:b("MercuryServerDispatcher").BATCH_CONDITIONAL,batch_if:d,batch_function:e,error_handler:n,handler:m};b("MercuryServerDispatcher").registerEndpoints(a);function d(a,b){return a&&a.ft_ent_identifier==b.ft_ent_identifier&&a.comment_id==b.comment_id}function e(a,b){return b}var g="feedback_reactions_www_rollback_universe";function h(){b("QE2Logger").logExposureForUser(g)}function i(a,c){var d=b("UFIReactionPendingRequestsStore").getPendingRequests(a);if(d>0)return;var e=b("UFIReactionSyncStore").getLastKnownReaction(a);if(c===e)return;b("UFIFeedbackTargets").getFeedbackTarget(a,function(a){a=p(a,e);b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:a})})}function j(a,c){a=c.data;var d=a.ft_ent_identifier,e=a.reaction_type;b("UFISharedDispatcher").dispatch(b("UFIStoryAction").changeReactionSuccess({instanceid:a.instance_id,ftentidentifier:d},e));b("setImmediate")(function(){return i(d,e)})}function k(a){var c=a.request.data,d=c.ft_ent_identifier,e=c.reaction_type;h();var f=b("UFIConfig").reactionsHasReactionsRollback,g=b("UFIConfig").reactionsHasReactionsRetry;if(g&&!c.retry_attempt){b("MercuryServerDispatcher").trySend(b("XUFIReactionController").getURIBuilder().getURI(),babelHelpers["extends"]({},c,{retry_attempt:1}));return}b("UFISharedDispatcher").dispatch(b("UFIStoryAction").changeReactionFailure({instanceid:c.instance_id,ftentidentifier:d},e));f&&b("setImmediate")(function(){return i(d,e)});b("AsyncResponse").defaultErrorHandler(a)}function l(a,c,d){var e=b("UFIReactionPendingRequestsStore").getPendingRequestsForComment(c.fbid);if(e>0)return;var f=b("UFIReactionSyncStore").getLastKnownCommentReaction(c.fbid);if(d===f)return;b("UFIFeedbackTargets").getFeedbackTarget(a,function(a){a=o(c,a,f);b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:a})})}function m(a,c){a=c.data;var d=a.ft_ent_identifier,e=a.reaction_type,f=b("UFIComments").getComment(a.comment_id);if(!f||f.__typename!=="saved")return;b("UFISharedDispatcher").dispatch(b("UFICommentAction").changeReactionSuccess({instanceid:a.instance_id,ftentidentifier:d},f,e));b("setImmediate")(function(){return l(d,f,e)})}function n(a){var c=a.request.data,d=c.ft_ent_identifier,e=c.reaction_type,f=b("UFIComments").getComment(c.comment_id);if(!f)return;h();var g=b("UFIConfig").reactionsHasCommentReactionsRollback,i=b("UFIConfig").reactionsHasCommentReactionsRetry;if(i&&!c.retry_attempt){b("MercuryServerDispatcher").trySend(b("XUFICommentReactionController").getURIBuilder().getURI(),babelHelpers["extends"]({},c,{retry_attempt:1}));return}f&&f.__typename==="saved"&&(b("UFISharedDispatcher").dispatch(b("UFICommentAction").changeReactionFailure({instanceid:c.instance_id,ftentidentifier:d},f,e)),g&&b("setImmediate")(function(){return l(d,f,e)}));b("AsyncResponse").defaultErrorHandler(a)}function o(a,c,d){var e=a.id,f=[r(a,d,e,c.supportedreactions||[],c.actorforpost)];d=d===b("UFIReactionTypes").LIKE;if(c.hasviewerliked!==d){c=d?1:-1;f.push({commentid:e,actiontype:b("UFIConstants").UFIActionType.COMMENT_LIKE,viewerliked:d,likecount:(a.likecount||0)+c})}return f}function p(a,c){var d=[q(a,c)];c=c!==b("UFIReactionTypes").NONE;if(a.hasviewerliked!==c){var e=c?1:-1;d.push({actiontype:b("UFIConstants").UFIActionType.LIKE_ACTION,actorid:a.actorforpost,hasviewerliked:c,likecount:(a.likecount||0)+e,entidentifier:a.entidentifier,likesentences:{current:a.likesentences.alternate,alternate:a.likesentences.current}})}return d}function q(a,c){return Object.assign({actiontype:b("UFIConstants").UFIActionType.REACTION,actorid:a.actorforpost,entidentifier:a.entidentifier},b("UFIReactionsUtils").getReactionData(a,c,a.actorforpost,b("NumberFormat").formatInteger))}function r(a,c,d,e,f){var g={};for(var h=0;h<e.length;h++){var i=e[h],j=a.reactioncountmap?a.reactioncountmap[i]:null;g[i]={"default":j?j["default"]:0,reduced:j?j.reduced:"0"}}i=b("UFIReactionsUtils").getReactionData({viewerreaction:a.viewerreaction,reactioncount:a.reactioncount,reactioncountreduced:a.reactioncountreduced,reactioncountmap:g,reactorids:a.viewerreaction?[f]:[]},c,f);return{actiontype:b("UFIConstants").UFIActionType.COMMENT_REACTION,commentid:d,hasviewerliked:!!c,likecount:i.reactioncountmap[1]["default"],reactioncount:i.reactioncount,reactioncountmap:i.reactioncountmap,reactioncountreduced:i.reactioncountreduced,viewerreaction:c}}}),null);
__d("UFIReplyCommentList",["UFICentralUpdates","UFIComments","UFIConstants","UFIReplyCommentListImpl","getObjectValues"],(function(a,b,c,d,e,f){"use strict";f.getCommentList=h;f.getReplyListsForParentCommentID=i;f.resetWithContext=a;var g={};function h(a,c,d){g[c]||(g[c]={});if(!g[c][d]){a=new(b("UFIReplyCommentListImpl"))(a,c,d);var e=i(String(c));e.length&&a.updateCommentCount(e[0].getCommentCount());g[c][d]=a}return g[c][d]}function i(a){return b("getObjectValues")(g[a]||{})}function a(a,b,c,d){a=(g[b]||{})[d];if(!a)return;a.reset();a.actorID=c}function j(a){a=b("UFIComments").getComment(a.commentid);if(!a)return;var c=a.id,d=a.parentcommentid;if(!d)return;a.status!==b("UFIConstants").UFIStatus.DELETED&&a.status!==b("UFIConstants").UFIStatus.FAILED_ADD&&i(d).forEach(function(a){a.deleteComment(c)})}b("UFICentralUpdates").subscribe("update-actions",function(a,c){if(c.actions&&c.actions.length)for(var a=0;a<c.actions.length;a++){var d=c.actions[a];switch(d.actiontype){case b("UFIConstants").UFIActionType.DELETE_COMMENT:j(d);break}}});b("UFICentralUpdates").subscribe("update-comment-lists",function(a,b){a=b.commentlists;if(a&&a.replies&&Object.keys(a).length)for(var c in a.replies){b=a.replies[c];var d=b.ftentidentifier,e=b.containerorderingmode;d=h(String(d),String(c),e);d.addCommentIDs(b.range.offset,b.range.length,b.values);d.updateCommentCount(b.count)}});b("UFICentralUpdates").subscribe("update-comments",function(a,b){(b.comments||[]).concat(b.privatecomments||[]).concat(b.authorpinnedcomments||[]).forEach(function(a){var b=a.parentcommentid;if(!b)return;i(String(b)).forEach(function(b){b.addOrUpdateComment(a)})})})}),6);
__d("UFIThreadedFacecastCommentsStore",["FluxReduceStore","UFIComments","UFIDispatcherBase"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return{}};d.reduce=function(a,c){switch(c.type){case"story_show_facecast_replies":var d;return babelHelpers["extends"]({},a,(d={},d[c.instanceID]={comment_id:c.commentID,reply_comment_ids:this.getReplyCommentIDs(c.instanceID),is_loaded:!1},d));case"story_hide_facecast_replies":return babelHelpers["extends"]({},a,(d={},d[c.instanceID]={comment_id:null,reply_comment_ids:[],is_loaded:!1},d));case"story_add_facecast_reply":if(this.getCommentID(c.instanceID)===null)return a;d=c.replyCommentID;var e=this.getReplyCommentIDs(c.instanceID);e.indexOf(d)===-1&&(e=e.slice(0),e.push(d));return babelHelpers["extends"]({},a,(d={},d[c.instanceID]={comment_id:this.getCommentID(c.instanceID),reply_comment_ids:e,is_loaded:this.getIsLoaded(c.instanceID)},d));case"story_add_facecast_replies":if(this.getCommentID(c.instanceID)===null)return a;var f=this.getReplyCommentIDs(c.instanceID);e=c.replyCommentIDs.filter(function(a){return f.indexOf(a)===-1});e.length!==0&&(f=f.concat(e));return babelHelpers["extends"]({},a,(d={},d[c.instanceID]={comment_id:this.getCommentID(c.instanceID),reply_comment_ids:f,is_loaded:this.getIsLoaded(c.instanceID)},d));case"facecast_replies_loaded":e=this.getCommentID(c.instanceID);return e!==c.commentID?a:babelHelpers["extends"]({},a,(d={},d[c.instanceID]={comment_id:this.getCommentID(c.instanceID),reply_comment_ids:this.getReplyCommentIDs(c.instanceID),is_loaded:!0},d));case"story_comments_arrived":if(c.source!==1||c.liveVideoCommentPermalinkID==null)return a;e=b("UFIComments").getComment(c.liveVideoCommentPermalinkID);return e==null?a:babelHelpers["extends"]({},a,(d={},d[c.instanceID]={comment_id:e.parentcommentid||e.id,reply_comment_ids:this.getReplyCommentIDs(c.instanceID),is_loaded:this.getIsLoaded(c.instanceID)},d));case"CENTRALUPDATES_SAVED_COMMENT":e=this.getReplyCommentIDs(c.instanceID);if(e.length===0)return a;d=e.indexOf(c.clientID);if(d===-1)return a;e.slice(0)[d]=c.commentID;return babelHelpers["extends"]({},a,(d={},d[c.instanceID]={comment_id:this.getCommentID(c.instanceID),reply_comment_ids:e,is_loaded:this.getIsLoaded(c.instanceID)},d));default:return a}};d.getCommentID=function(a){a=this.getState()[a];return!a?null:a.comment_id};d.getReplyCommentIDs=function(a){a=this.getState()[a];return!a?[]:a.reply_comment_ids};d.getIsLoaded=function(a){a=this.getState()[a];return!a?!1:a.is_loaded};return c}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFIToplevelPagedCommentList",["UFICentralUpdates","UFIComments","UFIConstants","UFIReplyCommentList","UFIToplevelPagedCommentListImpl","UFIToplevelStreamedCommentList","forEachObject"],(function(a,b,c,d,e,f){"use strict";f.getCommentList=h;f.getAllCommentListsForFeedbackTargetID=a;f.getSectionedCommentListsForFeedbackTargetID=i;f.getPagedCommentCountForFeedbackTargetID=c;f.getDisplayedCommentCountForFeedbackTargetID_UNSAFE=d;f.resetCommentListsForFeedbackTargetID=e;f.resetCommentListsWithContext=j;var g={};function h(a,c,d){d=d||"default";g[a]||(g[a]={});g[a][d]||(g[a][d]={});if(!g[a][d][c]){var e=new(b("UFIToplevelPagedCommentListImpl"))(a,c,d),f=i(a,d);f.length&&e.updateCommentCount(f[0].getCommentCount());g[a][d][c]=e}return g[a][d][c]}function a(a){var c=[];b("forEachObject")(g[a]||{},function(a){b("forEachObject")(a,function(a){c.push(a)})});return c}function i(a,b){var c=[];a=(g[a]||{})[b]||{};for(var d in a)c.push(a[d]);return c}function c(a,b){a=i(a,b);return a.length?a[0].getCommentCount():null}function d(a){var c=i(a,"default");c=c.length?c[0].getDisplayedCommentCount():null;a=b("UFIToplevelStreamedCommentList").getAllExistingCommentLists(a);a=a.length?a[0].getDisplayedCommentCount():null;return c===null&&a===null?null:Math.max(c||0,a||0)}function e(a){a=g[a];if(!a)return;var c={};for(var d in a){var e=a[d];for(var f in e){var h=e[f];h=h.reset();for(var i in h){var j=h[i];c[j]=!0}}}b("UFIComments").resetComments(c)}function j(a,c){var d=g[a];if(!d)return;var e={};for(var f in d){var h=d[f];for(var i in h){var j=h[i];j.actorID=c;j=j.reset();for(var k in j){var l=j[k];e[l]=!0;b("UFIReplyCommentList").resetWithContext(a,l,c,i)}}}b("UFIComments").resetComments(e)}function k(a){var c=b("UFIComments").getComment(a.commentid);if(!c)return;var d=c.id,e=c.ftentidentifier,f=c.parentcommentid;if(f)return;f="default";(c.privacy_value===2||c.privacy_value===3)&&g[e]&&g[e].friends&&(f="friends");(a.islocal||c.status!==b("UFIConstants").UFIStatus.DELETED&&c.status!==b("UFIConstants").UFIStatus.FAILED_ADD)&&i(e,f).forEach(function(a){a.deleteComment(d)})}function l(a,c){b("forEachObject")(a,function(a,d){b("forEachObject")(a,function(a,b){b=h(d,b,c);b.addCommentIDs(a.range.offset,a.range.length,a.values);b.setClientHasAll(!!a.clienthasall);typeof a.count==="number"&&a.count!==b.getCommentCount()&&b.updateCommentCount(a.count)})})}function m(a,b){a.forEach(function(a){if(a.parentcommentid)return;var c=a.ftentidentifier;i(c,b).forEach(function(b){b.addOrUpdateComment(a)})})}(a=b("UFICentralUpdates")).subscribe("update-actions",function(a,c){if(c.actions&&c.actions.length)for(var a=0;a<c.actions.length;a++){var d=c.actions[a];switch(d.actiontype){case b("UFIConstants").UFIActionType.DELETE_COMMENT:k(d);break}}});a.subscribe("update-comment-lists",function(a,b){a=b.commentlists;b=b.privatecommentlists;a&&a.comments&&l(a.comments,"default");b&&b.comments&&l(b.comments,"friends")});a.subscribe("update-comments",function(a,b){a=b.comments;var c=b.privatecomments;b=b.authorpinnedcomments;a&&a.length&&m(a,"default");c&&c.length&&m(c,"friends");b&&b.length&&m(b,"default")});a.subscribe("update-feedback",function(a,b){var c=b.feedbacktarget?b.feedbacktarget:b.feedbacktargets&&b.feedbacktargets[0];if(c){var d=c.entidentifier;a=c.defaultcommentorderingmode;var e=new Set();a&&e.add(a);c.orderingmodes&&c.orderingmodes.forEach(function(a){if(a.value==="live_streaming")return;e.add(a.value)});b=c.privatecommentcount;e.forEach(function(a){h(d,a,"default").updateCommentCount(c.commentcount)});typeof b==="number"&&h(d,"toplevel","friends").updateCommentCount(b)}})}),6);
__d("UFIRange",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){a===void 0&&(a=0),b===void 0&&(b=0),this.offset=a,this.length=b,this.requestedOffset=this.offset,this.requestedLength=this.length}var b=a.prototype;b.getOffset=function(){return this.offset};b.getLength=function(){return this.length};b.getRequestedOffset=function(){return this.requestedOffset};b.getRequestedLength=function(){return this.requestedLength};b.updateRequestedRange=function(a,b){this.requestedOffset=a;this.requestedLength=b;return this};b.isLoadingNext=function(){var a=this.requestedOffset+this.requestedLength,b=this.offset+this.length;return a>b};b.isLoadingPrev=function(){return this.requestedOffset<this.offset};a.combine=function(b,c){if(!c)return b;var d=Math.min(b.getOffset(),c.getOffset());b=Math.max(b.getLength(),c.getLength());var e=new a(d,b);if(c.getRequestedLength()>0){var f=Math.min(d,c.getRequestedOffset());d=Math.max(d+b,c.getRequestedOffset()+c.getRequestedLength());e.updateRequestedRange(f,d-f)}return e};return a}();e.exports=a}),null);
__d("UFIToplevelStreamedCommentList",["invariant","ClientIDs","LiveVideoUFIConfig","UFICentralUpdates","UFICommentLogger","UFIComments","UFIConfig","UFIConstants","UFIRange","UFIThreadedFacecastCommentsStore","gkx","objectValues"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a){this.feedbackTargetID=a,this.commentIDs=[],this.deletedCount=0,this.totalCommentCount=0,this.addedCommentCountForUnseenCounter=0}var c=a.prototype;c.getFeedbackTargetID=function(){return this.feedbackTargetID};c.getClientHasAll=function(){return!1};c.getActualCommentCount=function(){return this.commentIDs.length};c.getCommentCount=function(){return this.totalCommentCount};c.getAddedCommentCountForUnseenCounter=function(){return this.addedCommentCountForUnseenCounter};c.getDisplayedCommentCount=function(){return this.getCommentCount()-this.getDeletedCount()};c.getDeletedCount=function(){return this.deletedCount};c.getPermalinkForComment=function(a){return""};c.getComments=function(a,c,d,e){e(this.getCommentsOrThrow(new(b("UFIRange"))(a,c),d))};c.getCommentsOrThrow=function(a,c){a=[a.getLength(),a.getOffset()];var d=a[0];a=a[1];a===0||g(0,2239);a=c.streamingOrderReversed;c={};for(var e=0;e<Math.min(d,this.commentIDs.length);++e){var f=a?this.commentIDs.length-1-e:e;f=b("UFIComments").getComment(this.commentIDs[f]);f&&(c[e]=f)}return c};c.$3=function(){var a=this.commentIDs;this.commentIDs=[];return a};c.hasComment=function(a){for(var b=0;b<this.commentIDs.length;++b)if(this.commentIDs[b]===a.id)return!0;return!1};c.addCommentIDs=function(a,b,c){};c.setClientHasAll=function(a){};c.addOrUpdateComment=function(a,c){c===void 0&&(c=null);var d=a.clientid;if(d&&b("ClientIDs").isExistingClientID(d))for(var e=0;e<this.commentIDs.length;++e)this.commentIDs[e]===d&&(this.commentIDs[e]=a.id,b("UFIConfig").logCommentPost&&b("UFICommentLogger").logNewCommentReceived(d,Date.now()));else if(c||a.__typename==="local"){if(this.hasComment(a))return;this.commentIDs.push(a.id);c!=="on_demand"&&!a.isAnnouncement&&!a.tipOptionIndex&&(this.totalCommentCount+=1,a.__typename!=="local"&&((b("gkx")("678270")||!b("objectValues")(b("UFIThreadedFacecastCommentsStore").getState()||{}).map(function(a){return(a=a)!=null?a.comment_id:a}).includes(a.parentcommentid))&&(this.addedCommentCountForUnseenCounter+=1)))}e=b("LiveVideoUFIConfig").live_video_scrollable_comments;this.commentIDs.length>e&&this.commentIDs.shift();b("UFICentralUpdates").didUpdateFeedback(this.feedbackTargetID)};c.deleteComment=function(a){this.deletedCount+=1;var c=[];for(var d=0;d<this.commentIDs.length;++d){var e=this.commentIDs[d],f=b("UFIComments").getComment(e);e!==a&&((f=f)!=null?f.parentcommentid:f)!==a&&c.push(e)}this.commentIDs=c};c.updateCommentCount=function(a){this.totalCommentCount=a,this.deletedCount=0};a.getCommentList=function(b,c){c===void 0&&(c=a.GLOBAL_ID);var d=a.$1.get(b);d||(d=new Map(),a.$1.set(b,d));var e=d.get(c);e||(e=new a(b),d.set(c,e));return e};a.getExistingCommentList=function(b,c){c===void 0&&(c=a.GLOBAL_ID);b=a.$1.get(b);return!b?null:b.get(c)};a.getAllExistingCommentLists=function(b){b=a.$1.get(b);return!b?[]:Array.from(b.values())};a.$4=function(b,c){var d=a.$2.get(b);if(d){c.forEach(function(a){d[a]=!0});return}var e={};c.forEach(function(a){e[a]=!0});a.$2.set(b,e)};a.resetCommentList=function(b,c){c===void 0&&(c=a.GLOBAL_ID);c=a.getExistingCommentList(b,c);if(!c)return;a.$4(b,c.$3())};a.resetAllCommentLists=function(c){var d=a.getAllExistingCommentLists(c);if(d.length===0)return;d.forEach(function(b){a.$4(c,b.$3())});d=a.$2.get(c);d&&(a.$2["delete"](c),b("UFIComments").resetComments(d))};return a}();e.exports=h;h.GLOBAL_ID="GLOBAL_ID";h.$1=new Map();h.$2=new Map();b("UFICentralUpdates").subscribe("update-actions",function(a,c){if(!c.actions)return;c.actions.forEach(function(a){if(a.actiontype!==b("UFIConstants").UFIActionType.DELETE_COMMENT)return;var c=b("UFIComments").getComment(a.commentid);if(!c)return;var d=c.id,e=c.ftentidentifier,f=c.parentcommentid;if(f)return;(a.islocal||c.status!==b("UFIConstants").UFIStatus.DELETED&&c.status!==b("UFIConstants").UFIStatus.FAILED_ADD)&&h.getAllExistingCommentLists(e).forEach(function(a){return a.deleteComment(d)})})});b("UFICentralUpdates").subscribe("update-comments",function(a,b){if(!b.comments)return;var c=b.targetufiinstanceid;b.comments.forEach(function(a){c?h.getCommentList(a.ftentidentifier,c).addOrUpdateComment(a,b.streamingstate):h.getAllExistingCommentLists(a.ftentidentifier).forEach(function(c){c.addOrUpdateComment(a,b.streamingstate)})})})}),6);
__d("XGroupsMuteMembersController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/mutemember/",{group_id:{type:"FBID"},user_id:{type:"FBID"},mute_duration:{type:"Enum",enumType:1},source:{type:"Enum",enumType:1},should_reload:{type:"Bool",defaultValue:!1},mute_reason:{type:"FBID"},custom_expiration:{type:"Int"},share_feedback:{type:"Bool",defaultValue:!1},selected_rules:{type:"FBIDVector",defaultValue:[]},admin_notes:{type:"String",defaultValue:""}})}),null);
__d("XTownHallController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/townhall/",{ref:{type:"Enum",enumType:1},notif_id:{type:"Int"},setting_nux:{type:"Bool",defaultValue:!1},hide_nux:{type:"Bool",defaultValue:!1},new_reps:{type:"Int"},tab:{type:"Enum",enumType:1}})}),null);
__d("XUFIActorChangeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/actor/change/",{})}),null);
__d("XUFIAddCommentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/add/comment/",{privacy_mutation_token:{type:"String"}})}),null);
__d("XUFIAuthorPinnedCommentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/author_pin/",{})}),null);
__d("XUFICommentLikeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/like/",{})}),null);
__d("XUFIDeleteCommentAndRemoveCommenterController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/deletecommentandremovecommenter/",{})}),null);
__d("XUFIDeleteCommentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/delete/comment/",{privacy_mutation_token:{type:"String"}})}),null);
__d("XUFIEditCommentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/edit/comment/",{privacy_mutation_token:{type:"String"}})}),null);
__d("XUFIHideCommentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/hide/comment/",{})}),null);
__d("XUFILikeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/like/",{})}),null);
__d("XUFIToggleTextDelightsAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/textdelights/hide_comment_text_delights/",{comment_id:{type:"String"},should_hide:{type:"Bool",defaultValue:!1}})}),null);
__d("XUFITranslateCommentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/translate/comment/",{})}),null);
__d("UFIUserActions",["errorCode","fbt","invariant","ActorURI","AsyncResponse","Bootloader","ChannelClientID","ClientIDs","ImmutableObject","MercuryServerDispatcher","UFICentralUpdates","UFICommentLogger","UFIComments","UFICommentVoteUserActions","UFIConfig","UFIConstants","UFIFeedbackTargets","UFINewCommentsPillUtils","UFIReactionUserActions","UFIStoryAction","UFIToplevelPagedCommentList","UFIToplevelStreamedCommentList","UFIUserActionUtils","UFIVideoPlayerRegistry","UnicodeBidi","XGroupsMuteMembersController","XTownHallController","XUFIActorChangeController","XUFIAddCommentController","XUFIAuthorPinnedCommentController","XUFICommentLikeController","XUFIDeleteCommentAndRemoveCommenterController","XUFIDeleteCommentController","XUFIEditCommentController","XUFIHideCommentController","XUFILikeController","XUFIToggleTextDelightsAsyncController","XUFITranslateCommentController","goURI","ifRequired"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=Object.freeze({BAN:"ban",UNDO_BAN:"undo_ban"}),l={changeActor:function(a,c){b("UFIFeedbackTargets").getFeedbackTarget(a,function(d){b("UFIToplevelPagedCommentList").resetCommentListsWithContext(a,c);b("UFIToplevelStreamedCommentList").resetAllCommentLists(a);b("UFICentralUpdates").inform("actor-changed",{actorID:c});d=(d={from_actor_id:d.actorforpost,ft_ent_identifier:a},d[b("ActorURI").PARAMETER_ACTOR]=c,d);var e=b("XUFIActorChangeController").getURIBuilder().getURI();b("MercuryServerDispatcher").trySend(e,d)})},changeCommentLike:function(a,c,d){var e=b("UFIComments").getComment(a);if(e&&e.__typename==="saved"&&e.hasviewerliked!=c){var f=d.target?b("UFIUserActionUtils").trackingData(d.target):{},g=c?1:-1;g={commentid:a,actiontype:b("UFIConstants").UFIActionType.COMMENT_LIKE,viewerliked:c,likecount:(e.likecount||0)+g};b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[g]});b("UFIFeedbackTargets").getFeedbackTarget(e.ftentidentifier,function(g){var h={};h[b("ActorURI").PARAMETER_ACTOR]=g.actorforpost;g=b("XUFICommentLikeController").getURIBuilder().getURI();b("MercuryServerDispatcher").trySend(g,babelHelpers["extends"]({comment_id:a,legacy_id:e.legacyid,like_action:c,ft_ent_identifier:e.ftentidentifier,source:d.source,client_id:b("ClientIDs").getNewClientID(),session_id:b("ChannelClientID").getID()},f,h))})}},_getAttachment:function(a){return a},_getLocalComment:function(a,c,d,e,f,g){e=b("ClientIDs").getNewClientID();var i=b("UnicodeBidi").isDirectionLTR(d)?"ltr":"rtl",j=this._getAttachment(f.attachedsticker),k=f.replyid,l=null;if(k!=null){k=b("UFIComments").getComment(k);l=k!=null?k.author:null}return{__typename:"local",ftentidentifier:c,body:{text:d,dir:i},author:a.actorforpost,cancomment:!1,clientid:null,fbid:null,id:e,ufiinstanceid:f.ufiinstanceid,likecount:0,hasviewerliked:!1,parentcommentid:f.replyid,parentcommentauthorid:l,replycommentparentid:f.replycommentparentid,attachment:j,photo_comment:f.attachedphoto,video_comment:f.attachedvideo,file_comment:f.attachedfile,timestamp:{time:Math.floor(Date.now()/1e3),text:h._("a few seconds ago")},photoTextTagID:f.photoTextTagID,isPhotoTag:f.isPhotoTag,photoTagX:f.photoTagX,photoTagY:f.photoTagY,privacy_value:f.privacyValue,videoTimeOffset:g,postedLiveState:f.islivestreaming?"Live":"OnDemand",trackingID:f.trackingID,voteEnabled:!1,voteCount:0,voteState:b("UFIConstants").UFICommentVoteType.NONE}},addComment:function(a,c,d,e){var f=this;b("UFIFeedbackTargets").getFeedbackTarget(a,function(g){var h=f.createComment(a,c,d,e);if(!h)return;var i={actiontype:b("UFIConstants").UFIActionType.SUBSCRIBE_ACTION,actorid:g.actorforpost,hasviewersubscribed:!0,entidentifier:g.entidentifier};g={actiontype:b("UFIConstants").UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:g.targetfbid};var j=[],k=[];(h.privacy_value===2||h.privacy_value===3?k:j).push(h);b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:j,privatecomments:k,actions:[i,g]});if(h.parentcommentid&&(e.islivestreaming||e.isLiveVOD||e.isActiveLivingRoom)&&e.ufiinstanceid!=null){j={ftentidentifier:a,instanceid:e.ufiinstanceid};b("UFINewCommentsPillUtils").dispatchNewCommentAction(b("UFIStoryAction").handleNewFacecastReply(j,h.id),j)}})},createComment:function(a,c,d,e){var f=b("UFIFeedbackTargets").getFeedbackTargetIfExists(a);if(!(f&&f.actorforpost))return null;var g=null,h=null;if(e.isBroadcasterUFI)g=b("ifRequired")("LiveVideoBroadcastBroadcastStore",function(a){return a.getCurrentBroadcastTime()});else if(e.isActiveLivingRoom&&e.livingRoomID!=null){var i=b("ifRequired")("LivingRoomStore",function(a){return a.getVideoPlayerController(e.livingRoomID)});g=i?Math.round(i.getCurrentTimePosition()):null;h=b("ifRequired")("LivingRoomStore",function(a){return(a=a.getCurrentContentItem(e.livingRoomID))==null?void 0:a.id})}else if(e.fluentContentToken&&(e.isLiveVOD||e.islivestreaming||e.enableVODCommentTimestamps)){i=b("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(e.target,e.fluentContentToken)||0;if(e.isLiveVOD||e.islivestreaming)g=i;else{var j=b("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerForElement(e.target,e.fluentContentToken);j!=null&&i>0&&i<Math.floor(j.getPlaybackDuration())&&(g=i)}}j=this._getLocalComment(f,a,c,d,e,g);this._sendCommentToServer(a,f.actorforpost,c,d,e,j.id,g,h);return j},_sendCommentToServer:function(a,c,d,e,f,g,h,j){d=null;if(f.reply_fbid)d=f.reply_fbid;else if(f.replyid){var k=b("UFIComments").getComment(f.replyid);k||i(0,199);d=k.fbid}var l;b("UFIConfig").logCommentPost&&b("UFICommentLogger").logNewCommentPost(g,f.timestamp||0,{has_photo:!!f.attachedphoto,has_video:!!f.attachedvideo,has_file:!!f.attachedfile,has_sticker:!!f.attachedsticker,is_reply:!!f.replyid});k={};f.liveVideoQuickCommentQuality!=null&&(k={live_video_quick_comment_quality:f.liveVideoQuickCommentQuality});var m={};m[b("ActorURI").PARAMETER_ACTOR]=c;c=b("XUFIAddCommentController").getURIBuilder().getURI();b("MercuryServerDispatcher").trySend(c,babelHelpers["extends"]({ft_ent_identifier:a,comment_text:e,source:f.source,client_id:g,session_id:b("ChannelClientID").getID(),reply_fbid:d,parent_comment_id:f.parent_comment_id||f.replyid,reply_comment_parent_id:f.replycommentparentid,rootid:f.rootid,clp:l,attached_sticker_fbid:f.attachedsticker?f.attachedsticker.fbid:null,attached_photo_fbid:f.attachedphoto?f.attachedphoto.fbid:null,attached_video_fbid:f.attachedvideo?f.attachedvideo.fbid:null,attached_file_fbid:f.attachedfile?f.attachedfile.fbid:null,attached_share_url:f.attachedshareurl,feedback_referrer:f.feedbackReferrer,feed_context:f.feedcontext,video_time_offset:h,is_live_streaming:f.islivestreaming,is_markdown:f.isMarkdown},b("UFIUserActionUtils").trackingData(f.target),m,{living_room_content_item_id:j,photo_text_tag_id:f.photoTextTagID,is_photo_tag:f.isPhotoTag,photo_fbid:f.photoFBID,photo_tag_x:f.photoTagX,photo_tag_y:f.photoTagY,privacy_value:f.privacyValue,delight_ranges:f.delightRanges,selected_insight_point:f.selectedInsightPoint},k))},_hasCommentTextChanged:function(a,b){return!!a.body&&a.body.text!=b},_hasCommentPhotoChanged:function(a,b){return!!((a||b)&&!(a&&b)||a&&b&&a.fbid!=b.fbid)},_hasCommentVideoChanged:function(a,b){return!!((a||b)&&!(a&&b)||a&&b&&a.fbid!=b.fbid)},_hasCommentFileChanged:function(a,b){return!!((a||b)&&!(a&&b)||a&&b&&a.fbid!=b.fbid)},_hasCommentStickerChanged:function(a,b){return!!((a||b)&&!(a&&b)||a&&a.type=="sticker"&&b&&a.fbid!=b.fbid)},_hasCommentShareURLChanged:function(a,b){if(b)return!0;else return Boolean(a&&a.type=="share")},editComment:function(a,c,d,e){var f=b("UFIUserActionUtils").trackingData(e.target),g=b("UFIComments").getComment(a);if(!g)return;a=this._hasCommentTextChanged(g,c)||this._hasCommentPhotoChanged(g.photo_comment,e.attachedPhoto)||this._hasCommentStickerChanged(g.attachment,e.attachedSticker)||this._hasCommentVideoChanged(g.video_comment,e.attachedVideo)||this._hasCommentFileChanged(g.file_comment,e.attachedFile)||this._hasCommentShareURLChanged(g.attachment,e.attachedShareURL);g=b("ImmutableObject").set(g,{status:b("UFIConstants").UFIStatus.PENDING_EDIT,body:{text:c},editnux:null,attachment:e.attachedSticker,photo_comment:e.attachedPhoto,video_comment:e.attachedVideo,file_comment:e.attachedFile});a&&(g=b("ImmutableObject").set(g,{originalTimestamp:g.timestamp.time,timestamp:{time:Math.floor(Date.now()/1e3),text:h._("a few seconds ago")}}));b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[g]});b("UFIFeedbackTargets").getFeedbackTarget(g.ftentidentifier,function(a){var c={};c[b("ActorURI").PARAMETER_ACTOR]=a.actorforpost;a=b("XUFIEditCommentController").getURIBuilder().getURI();g&&b("MercuryServerDispatcher").trySend(a,babelHelpers["extends"]({ft_ent_identifier:g.ftentidentifier,comment_text:d,source:e.source,comment_id:g.id,parent_comment_id:g.parentcommentid,attached_sticker_fbid:e.attachedSticker?e.attachedSticker.fbid:0,attached_photo_fbid:e.attachedPhoto?e.attachedPhoto.fbid:0,attached_video_fbid:e.attachedVideo?e.attachedVideo.fbid:0,attached_file_fbid:e.attachedFile?e.attachedFile.fbid:0,attached_share_url:e.attachedShareURL,is_markdown:e.isMarkdown,delight_ranges:e.delightRanges},f,c))})},translateComments:function(a,c,d,e){var f=b("XUFITranslateCommentController").getURIBuilder().getURI();b("MercuryServerDispatcher").trySend(f,{ft_ent_identifier:a,comment_ids:c,source:e.source,trigger:d})},setHideAsSpam:function(a,c,d){var e=b("UFIUserActionUtils").trackingData(d.target),f=b("UFIComments").getComment(a),g={commentid:a,actiontype:b("UFIConstants").UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:c};b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[g]});f&&b("UFIFeedbackTargets").getFeedbackTarget(f.ftentidentifier,function(g){var h={};h[b("ActorURI").PARAMETER_ACTOR]=g.actorforpost;g=b("XUFIHideCommentController").getURIBuilder().getURI();b("MercuryServerDispatcher").trySend(g,babelHelpers["extends"]({comment_id:a,spam_action:c,ft_ent_identifier:f.ftentidentifier,source:d.source},e,h))})},removeComment:function(a,c,d){var e=b("UFIUserActionUtils").trackingData(c.target),f=b("UFIComments").getComment(a);a={actiontype:b("UFIConstants").UFIActionType.DELETE_COMMENT,commentid:a,islocal:!0,oneclick:c.oneclick};b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[a]});f&&f.__typename==="saved"&&b("UFIFeedbackTargets").getFeedbackTarget(f.ftentidentifier,function(a){var g={};g[b("ActorURI").PARAMETER_ACTOR]=a.actorforpost;a=b("XUFIDeleteCommentController").getURIBuilder().getURI();b("MercuryServerDispatcher").trySend(a,babelHelpers["extends"]({comment_id:f.id,comment_legacyid:f.legacyid,ft_ent_identifier:f.ftentidentifier,one_click:c.oneclick,source:c.source,block_author:d,client_id:b("ClientIDs").getNewClientID()},e,g))})},deleteCommentAndRemoveCommenter:function(a,c,d,e,f,g,h){var i=b("UFIUserActionUtils").trackingData(c.target),j=b("UFIComments").getComment(a);a={actiontype:b("UFIConstants").UFIActionType.DELETE_COMMENT_REMOVE_COMMENTER,commentid:a,islocal:!0,oneclick:c.oneclick};b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[a]});j&&j.__typename==="saved"&&b("UFIFeedbackTargets").getFeedbackTarget(j.ftentidentifier,function(a){var k={};k[b("ActorURI").PARAMETER_ACTOR]=a.actorforpost;a=b("XUFIDeleteCommentAndRemoveCommenterController").getURIBuilder().getURI();b("MercuryServerDispatcher").trySend(a,babelHelpers["extends"]({comment_id:j.id,comment_legacyid:j.legacyid,ft_ent_identifier:j.ftentidentifier,one_click:c.oneclick,source:c.source,delete_posts:d,delete_comments:e,decline_pending_members:f,block_permanently:g,apply_to_other_groups:h,client_id:b("ClientIDs").getNewClientID()},i,k))})},muteMember:function(a,c,d,e){c=b("UFIComments").getComment(a);a=d!==null;if(c&&c.__typename==="saved"){a={authorid:c.author,actiontype:b("UFIConstants").UFIActionType.MUTE_MEMBER,shouldmute:a};b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[a]});var f;b("Bootloader").loadModules(["GroupMemberActionSource"],function(a){f=a.GROUP_COMMENT},"UFIUserActions");a=b("XGroupsMuteMembersController").getURIBuilder().getURI();b("MercuryServerDispatcher").trySend(a,{group_id:c.group_id,user_id:c.author,mute_duration:d,custom_expiration:e,should_reload:!1,source:f})}},toggleTextDelights:function(a,c,d){var e=b("XUFIToggleTextDelightsAsyncController").getURIBuilder().getURI();b("MercuryServerDispatcher").trySend(e,{comment_id:a.id,ft_ent_identifier:a.ftentidentifier,should_hide:d,parent_comment_id:a.parentcommentid,source:c.source})},banUser:function(a,c,d,e){e=d?k.BAN:k.UNDO_BAN;b("MercuryServerDispatcher").trySend("/ajax/ufi/ban_user.php",{page_id:c,commenter_id:a.author,action:e,comment_id:a.id,client_side:!0,post_only:!1})},streamBanUser:function(a,c,d,e){e=d?k.BAN:k.UNDO_BAN;b("MercuryServerDispatcher").trySend("/ajax/ufi/ban_user.php",{page_id:c,commenter_id:a.author,action:e,comment_id:a.id,client_side:!0,stream_only:!0})},suspendUser:function(a,c,d,e,f){f=d?k.BAN:k.UNDO_BAN;b("MercuryServerDispatcher").trySend("/ajax/ufi/ban_user.php",{page_id:c,commenter_id:a.author,action:f,comment_id:a.id,suspension_duration_seconds:e,client_side:!0})},changeSubscribe:function(a,c,d){b("UFIFeedbackTargets").getFeedbackTarget(a,function(e){var f=b("UFIUserActionUtils").trackingData(d.target);if(e.hasviewersubscribed!==c){var g={actiontype:b("UFIConstants").UFIActionType.SUBSCRIBE_ACTION,actorid:e.actorforpost,hasviewersubscribed:c,entidentifier:a};b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[g]});g={};g[b("ActorURI").PARAMETER_ACTOR]=e.actorforpost;b("MercuryServerDispatcher").trySend("/ajax/ufi/subscribe.php",babelHelpers["extends"]({subscribe_action:c,ft_ent_identifier:a,source:d.source,client_id:b("ClientIDs").getNewClientID(),rootid:d.rootid,comment_expand_mode:d.commentexpandmode},f,g))}})},changeSubscribeWithLogging:function(a,c){b("UFIFeedbackTargets").getFeedbackTarget(a,function(d){if(d.hasviewersubscribed!==c){d={actiontype:b("UFIConstants").UFIActionType.SUBSCRIBE_ACTION,actorid:d.actorforpost,hasviewersubscribed:c,entidentifier:a};b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[d]});b("MercuryServerDispatcher").trySend("/ajax/litestand/follow_post",{follow:c,message_id:a})}})},fetchSpamComments:function(a,c,d,e){b("MercuryServerDispatcher").trySend("/ajax/ufi/id_comment_fetch.php",{ft_ent_identifier:a,viewas:e,comment_ids:c,parent_comment_id:d,source:null})},manageConstituentBadge:function(a){b("goURI")(b("XTownHallController").getURIBuilder().setBool("setting_nux",!0).getURI())},authorPinComment:function(a,c){b("MercuryServerDispatcher").trySend(o,{comment_id:a.id,ft_ent_identifier:a.ftentidentifier,is_pinned_by_author:c});var d={commentid:a.id,pinnedByAuthor:c,actiontype:"comment_change_author_pin"};a=b("UFIComments").getComment(a.id);if(!a)return;a=b("ImmutableObject").set(a,{ispinnedbyauthor:c});b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[a],actions:[d]})},removePreview:function(a,c){var d=b("UFIUserActionUtils").trackingData(c.target),e={commentid:a.id,actiontype:b("UFIConstants").UFIActionType.REMOVE_PREVIEW};b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[e]});b("MercuryServerDispatcher").trySend("/ajax/ufi/remove_preview.php",babelHelpers["extends"]({comment_id:a.id,ft_ent_identifier:a.ftentidentifier,source:c.source},d))}};function a(a){b("AsyncResponse").defaultErrorHandler(a)}function c(a){var c=a.request.data;b("AsyncResponse").defaultErrorHandler(a);var d=c.client_id||c.comment_id;d=b("UFIComments").getComment(d);if(!d)return;var e=d.status===b("UFIConstants").UFIStatus.PENDING_EDIT?b("UFIConstants").UFIStatus.FAILED_EDIT:b("UFIConstants").UFIStatus.FAILED_ADD;d=b("ImmutableObject").setDeep(d,{status:e,allowRetry:m(a),body:{mentionstext:c.comment_text,mentionsphoto:d.photo_comment,mentionsvideo:d.video_comment,mentionsfile:d.file_comment}});e=[];a=[];(d.privacy_value===2||d.privacy_value===3?a:e).push(d);b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:e,privatecomments:a})}function m(a){var b=a.getError();if(a.isBlockedAction())return!1;if(a.silentError)return!0;return b===1357012||b===1357006?!1:!0}function d(a){a=a.request.data;a=a.comment_id;a=b("UFIComments").getComment(a);if(!a)return;a=b("ImmutableObject").set(a,{status:a.priorstatus||null,priorstatus:void 0});b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[a]})}function f(a){var c=a.request.data,d=c.comment_id,e=b("UFIComments").getComment(d);if(e&&c.like_action===e.hasviewerliked){c=e.hasviewerliked?-1:1;d={commentid:d,actiontype:b("UFIConstants").UFIActionType.COMMENT_LIKE,viewerliked:!e.hasviewerliked,likecount:(e.likecount||0)+c};b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[d]})}b("AsyncResponse").defaultErrorHandler(a)}function g(a){var c=a.request.data,d=c.ft_ent_identifier;b("UFIFeedbackTargets").getFeedbackTarget(d,function(a){if(a.hasviewerliked===c.like_action){var e=a.hasviewerliked?-1:1;e={actiontype:b("UFIConstants").UFIActionType.LIKE_ACTION,actorid:a.actorforpost,hasviewerliked:!a.hasviewerliked,likecount:(a.likecount||0)+e,entidentifier:d,likesentences:{current:a.likesentences.alternate,alternate:a.likesentences.current}};b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[e]})}});b("AsyncResponse").defaultErrorHandler(a)}function n(a){var c=a.request.data,d=c.ft_ent_identifier;b("UFIFeedbackTargets").getFeedbackTarget(d,function(a){if(a.hasviewersubscribed===c.subscribe_action){a={actiontype:b("UFIConstants").UFIActionType.SUBSCRIBE_ACTION,actorid:a.actorforpost,hasviewersubscribed:!a.hasviewersubscribed,entidentifier:d};b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[a]})}});b("AsyncResponse").defaultErrorHandler(a)}a={"/ajax/ufi/ban_user.php":{mode:(j=b("MercuryServerDispatcher")).IMMEDIATE,error_handler:a},"/ajax/ufi/subscribe.php":{mode:j.BATCH_CONDITIONAL,error_handler:n,batch_if:r,batch_function:s},"/ajax/ufi/id_comment_fetch.php":{mode:j.IMMEDIATE},"/ajax/ufi/remove_preview.php":{mode:j.IMMEDIATE},"/profile/broadcast_request/async/add_composer_token/":{mode:j.IMMEDIATE},"/ajax/litestand/follow_post":{mode:j.BATCH_CONDITIONAL,error_handler:n,batch_if:r,batch_function:s}};n=b("XUFIAddCommentController").getURIBuilder().getURI();a[n]={mode:j.IMMEDIATE,error_handler:c};r=b("XUFIDeleteCommentController").getURIBuilder().getURI();a[r]={mode:j.IMMEDIATE,error_handler:d};n=b("XUFIDeleteCommentAndRemoveCommenterController").getURIBuilder().getURI();a[n]={mode:j.IMMEDIATE,error_handler:d};r=b("XUFICommentLikeController").getURIBuilder().getURI();a[r]={mode:j.BATCH_CONDITIONAL,error_handler:f,batch_if:p,batch_function:s};n=b("XGroupsMuteMembersController").getURIBuilder().getURI();a[n]={mode:j.IMMEDIATE};r=b("XUFIToggleTextDelightsAsyncController").getURIBuilder().getURI();a[r]={mode:j.IMMEDIATE};f=b("XUFIHideCommentController").getURIBuilder().getURI();a[f]={mode:j.IMMEDIATE,error_handler:d};p=b("XUFILikeController").getURIBuilder().getURI();a[p]={mode:j.BATCH_CONDITIONAL,error_handler:g,batch_if:q,batch_function:s};n=b("XUFIEditCommentController").getURIBuilder().getURI();a[n]={mode:j.IMMEDIATE,error_handler:c};r=b("XUFITranslateCommentController").getURIBuilder().getURI();a[r]={mode:j.IMMEDIATE};f=b("XUFIActorChangeController").getURIBuilder().getURI();a[f]={mode:j.IMMEDIATE};var o=b("XUFIAuthorPinnedCommentController").getURIBuilder().getURI();a[o]={mode:j.IMMEDIATE};j.registerEndpoints(a);function p(a,b){return a&&a.ft_ent_identifier==b.ft_ent_identifier&&a.comment_id==b.comment_id}function q(a,b){return a&&a.ft_ent_identifier==b.ft_ent_identifier}function r(a,b){return a&&a.ft_ent_identifier==b.ft_ent_identifier}function s(a,b){return b}d=babelHelpers["extends"]({},l,b("UFIReactionUserActions"),b("UFICommentVoteUserActions"));e.exports=d}),null);
__d("UFICommentEditIDStore",["FluxReduceStore","UFICentralUpdates","UFIDispatcherBase"],(function(a,b,c,d,e,f){"use strict";function g(a){a=h(a,"string");return typeof a==="symbol"?a:String(a)}function h(a,b){if(typeof a!=="object"||a===null)return a;var c=a[typeof Symbol==="function"?Symbol.toPrimitive:"@@toPrimitive"];if(c!==void 0){c=c.call(a,b||"default");if(typeof c!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(a)}a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;b("UFICentralUpdates").subscribe("actor-changed",function(a,c){b("UFIDispatcherBase").dispatch({type:"PRIVATE_ACTOR_CHANGED",instanceID:!0,ftentidentifier:!0})});return c}var d=c.prototype;d.getInitialState=function(){return{}};d.getForInstance=function(a){return this.getState()[a]||null};d.reduce=function(a,b){switch(b.type){case"PRIVATE_ACTOR_CHANGED":return{};case"add_comment_cancel":case"story_show_facecast_replies":case"story_hide_facecast_replies":case"add_comment_submit_edit":a[b.instanceID];var c=babelHelpers.objectWithoutPropertiesLoose(a,[b.instanceID].map(g));return c;case"comment_edit":return babelHelpers["extends"]({},a,(c={},c[b.instanceID]=b.comment.id,c))}return a};return c}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFIVisibility",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({VISIBLE:"visible",HIDDEN:"hidden"});e.exports=a}),null);
__d("UFICommentVisibilityStore",["invariant","FluxReduceStore","UFIComments","UFIDispatcherBase","UFILivePinnedCommentStore","UFIRootRegistry","UFIVisibility","filterObject"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){b===void 0&&(b=null);return b&&b.comment.fbid?a+"-"+b.comment.fbid+(b.isLivePinnedComment?"-P":"")+(b.isInLiveVideoReplyMode?"-R":""):a}function i(a,b){return a===b||a.startsWith(b+"-")}function j(a){a=b("UFIRootRegistry").getInstanceIDFromFTEntIdentifier(a);return a?a:[]}function k(a){return{instanceid:a}}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return{}};d.getVisibility=function(a,c,d){d===void 0&&(d=null);d=d?h(c.instanceid,d):h(c.instanceid);return Object.prototype.hasOwnProperty.call(a,d)?a[d]:b("UFIVisibility").HIDDEN};d.$UFICommentVisibilityStore1=function(a){a=k(a);return this.getVisibility(this.getState(),a)===b("UFIVisibility").VISIBLE};d.isFeedbackTargetVisible=function(a){var b=this;a=j(a);return a.some(function(a){return b.$UFICommentVisibilityStore1(a)})};d.reduce=function(a,c){switch(c.type){case"comment_unmounted":var d=babelHelpers["extends"]({},a);delete d[h(c.instanceID,c.renderedComment)];return d;case"comment_change_visibility":return babelHelpers["extends"]({},a,(d={},d[h(c.instanceID,c.renderedComment)]=c.visibility,d));case"story_change_visibility":d=b("UFIRootRegistry").getFTEntIdentifierFromInstanceID(c.instanceID);var e=b("UFIComments").getCommentsForFTEntIdentifier(d);c.type==="story_change_visibility"||g(0,3643);var f=c.visibility;if(e){e=e.reduce(function(a,b){a[h(c.instanceID,b.fbid?{comment:b,isLivePinnedComment:!1,isInLiveVideoReplyMode:!1}:null)]=f;return a},{});if(d){d=b("UFILivePinnedCommentStore").getPinnedCommentID(d);if(d){d=b("UFIComments").getComment(d);d&&d.__typename==="saved"&&(e[h(c.instanceID,{comment:d,isLivePinnedComment:!0,isInLiveVideoReplyMode:!1})]=f)}}return babelHelpers["extends"]({},a,(d={},d[h(c.instanceID)]=c.visibility,d),e)}case"story_remove":var j=c.instanceID,k=h(j);return b("filterObject")(a,function(a,b){return b!==k&&!i(b,j)})}return a};return c}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFILivePinnedCommentStore",["FluxReduceStore","UFIComments","UFIDispatcherBase","UFIFeedbackTargets","areEqual"],(function(a,b,c,d,e,f){"use strict";var g;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return{}};d.reduce=function(a,b){var c;switch(b.type){case"story_live_pin_comment":case"story_live_unpin_comment":var d=b.commentID,e=b.pinEventID;return babelHelpers["extends"]({},a,(c={},c[b.ftentidentifier]={commentID:d,pinEventID:e},c));default:return a}};d.areEqual=function(a,c){return(g||(g=b("areEqual")))(a,c)};d.getPinnedCommentID=function(a){var c=this.getState()[a];if(!c){a=b("UFIFeedbackTargets").getFeedbackTargetIfExists(a);return!a?null:a.livepinnedcommentid||null}return c.commentID||null};d.getPinEventID=function(a){a=this.getState()[a];return!a?null:a.pinEventID||null};d.getPinnedCommentAuthorID=function(a){a=this.getPinnedCommentID(a);if(!a)return null;a=b("UFIComments").getComment(a);return a?a.author||null:null};return c}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("setByPath",["invariant"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;function a(a,b,c){a=a;for(var d=0;d<b.length;d++){var e=b[d];if(d===b.length-1){a[e]=c;return}!Object.prototype.hasOwnProperty.call(a,e)?a[e]={}:a[e]==null?a[e]={}:Array.isArray(a[e])||Object.prototype.toString.call(a[e])==="[object Object]"||g(0,1041,a[e]);a=a[e]}}}),null);
__d("UFILocallyComposedCommentStore",["invariant","ClientIDs","FluxReduceStore","UFICentralUpdatesLocalCommentAdapter","UFIDispatcherBase","setByPath"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return babelHelpers["extends"]({},a)}a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;b("UFICentralUpdatesLocalCommentAdapter").subscribeOnce();return c}var d=c.prototype;d.getInitialState=function(){return{}};d.getStateForInstance=function(a){return a?this.getState()[a]||{}:{}};d.reduce=function(a,c){switch(c.type){case"CENTRALUPDATES_ADDED_COMMENT":b("ClientIDs").isExistingClientID(c.clientID)||g(0,3492);a=h(a);b("setByPath")(a,[c.instanceID,c.clientID],!0);return a;case"CENTRALUPDATES_SAVED_COMMENT":b("ClientIDs").isExistingClientID(c.clientID)||g(0,3492);a=h(a);b("setByPath")(a,[c.instanceID,c.commentID],!0);delete a[c.instanceID][c.clientID];return a;case"add_comment_submit_edit":a=h(a);b("setByPath")(a,[c.instanceID,c.comment.id],!0);return a}return a};return c}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFISpamStore",["FluxReduceStore","UFIDispatcherBase","UFIUserActions"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return{}};d.areEqual=function(a,b){return Object.keys(a).length===Object.keys(b).length};d.reduce=function(a,c){switch(c.type){case"story_spam_fetched":a=babelHelpers["extends"]({},a);c.commentIDs.forEach(function(b){return a[b]=!0});b("UFIUserActions").fetchSpamComments(c.ftentidentifier,c.commentIDs,c.parentCommentID,c.viewas);break}return a};return c}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFIUnseenCommentsStore",["FluxReduceStore","UFIComments","UFIConstants","UFIDispatcherBase"],(function(a,b,c,d,e,f){"use strict";var g=30;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return{}};d.reduce=function(a,c){switch(c.type){case"set_comments_scroll_distance":var d=c.instanceID,e=c.scrollDist,f=this.getInstanceState(d);f=babelHelpers["extends"]({},f,{scrollDist:e});this.shouldAddUnseenCommentsForState(f)||(f.unseenComments=0,f.unseenCommentsByThread={});return babelHelpers["extends"]({},a,(e={},e[d]=f,e));case"set_comment_reactions_menu_shown":var g;d=c.instanceID;f=c.commentReactionsMenuShown;e=this.getInstanceState(d);return babelHelpers["extends"]({},a,(g={},g[d]=babelHelpers["extends"]({},e,{commentReactionsMenuShown:f}),g));case"handle_new_comments":d=c.instanceID;e=c.numComments;if(!this.shouldAddUnseenComments(d))return a;f=this.getInstanceState(d);return babelHelpers["extends"]({},a,(g={},g[d]=babelHelpers["extends"]({},f,{unseenComments:f.unseenComments+e}),g));case"handle_new_facecast_reply":d=c.instanceID;f=b("UFIComments").getComment(c.replyCommentID);if(!this.shouldAddUnseenComments(d)||!f)return a;e=this.getInstanceState(d);g=e.unseenCommentsByThread;c=f.parentcommentid;if(c)g[c]=g[c]||0,g[c]++;else return a;return babelHelpers["extends"]({},a,(f={},f[d]=babelHelpers["extends"]({},e,{unseenCommentsByThread:g}),f));default:return a}};d.getInstanceState=function(a){a=this.getState()[a];return a||{commentsReactionMenuShown:!1,scrollDist:0,unseenComments:0,unseenCommentsByThread:{}}};d.getCommentReactionsMenuShown=function(a){return this.getInstanceState(a).commentReactionsMenuShown};d.getScrolledUp=function(a){return this.getScrollDist(a)>b("UFIConstants").maxScrollDistanceForAutoScroll};d.getScrollDist=function(a){return this.getInstanceState(a).scrollDist};d.getUnseenComments=function(a){return this.getInstanceState(a).unseenComments};d.getUnseenCommentsByThread=function(a){return this.getInstanceState(a).unseenCommentsByThread};d.getUnseenCommentsInThread=function(a,b){a=this.getUnseenCommentsByThread(a);return a[b]||0};d.shouldAddUnseenComments=function(a){return this.shouldAddUnseenCommentsForState(this.getInstanceState(a))};d.shouldAddUnseenCommentsForState=function(a){return a.scrollDist>b("UFIConstants").maxScrollDistanceForAutoScroll||a.commentReactionsMenuShown&&a.scrollDist>=g};return c}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("UFIDispatcherBase"));e.exports=c}),null);
__d("UFINewCommentsPillUtils",["UFISharedDispatcher","UFIStoryAction","UFIUnseenCommentsStore"],(function(a,b,c,d,e,f){"use strict";f.findNumNewComments=a;f.handleScroll=c;f.updateScrolledUp=d;f.scrollToBottom=e;f.dispatchNewCommentAction=g;function a(a,b){var c=a?a.length:0,d=b?b.length:0;if(!c&&!d)return 0;var e,f=0;if(a)for(var c=c-1;c>=0;c--){var g=a[c];if(g.__typename==="saved"){e=g.id;break}f++}g=0;c=!1;if(b)for(var a=d-1;a>=0;a--){d=b[a];if(d.id===e){c=!0;break}g++}d=g-f;if(!e||c)return d;else return 0}function c(a,b){b=b.target;b instanceof HTMLElement&&this.updateScrolledUp(b,a)}function d(a,c){a=a.scrollHeight-a.offsetHeight-a.scrollTop;b("UFISharedDispatcher").dispatch(b("UFIStoryAction").setCommentsScrollDistance(c,a))}function e(a,b){if(a&&b){var c=a.scrollHeight-a.offsetHeight;b=b.Animation;new b(a).to("scrollTop",c).ease(b.ease.end).duration(Math.min(400,Math.max(200,(c-a.scrollTop)/1.5))).ondone(function(){a.scrollTop=a.scrollHeight-a.offsetHeight}).go()}}function g(a,c){a.type==="handle_new_facecast_reply"&&b("UFISharedDispatcher").dispatch(b("UFIStoryAction").addFacecastReply(c,a.replyCommentID));c=c.instanceid;!b("UFIUnseenCommentsStore").getScrolledUp(c)&&b("UFIUnseenCommentsStore").getCommentReactionsMenuShown(c)?setTimeout(function(){b("UFISharedDispatcher").dispatch(a)},0):b("UFISharedDispatcher").dispatch(a)}}),null);
__d("useFullViewImpression",["React","useVisibilityObserver"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.onFullViewStart,d=g.useRef({bottomRight:!1,hasBeenFullyViewed:!1,topLeft:!1});a=g.useCallback(function(a){var b=a.entry;a=a.isElementVisible;if(!a&&d.current.hasBeenFullyViewed)d.current={bottomRight:!1,hasBeenFullyViewed:!1,topLeft:!1};else if(a&&!d.current.hasBeenFullyViewed){b.intersectionRatio===1?(d.current.bottomRight=!0,d.current.topLeft=!0):(d.current.bottomRight||(d.current.bottomRight=b.boundingClientRect.bottom<=b.rootBounds.bottom&&b.boundingClientRect.right<=b.rootBounds.right),d.current.topLeft||(d.current.topLeft=b.boundingClientRect.top>=b.rootBounds.top&&b.boundingClientRect.left>=b.rootBounds.left));if(d.current.bottomRight&&d.current.topLeft){d.current.hasBeenFullyViewed=!0;return c({currentTime:Date.now()})}}},[c]);var e=g.useCallback(function(a){a.hiddenTime,a.visibleDuration,a.visibleTime,d.current={bottomRight:!1,hasBeenFullyViewed:!1,topLeft:!1}},[]);return b("useVisibilityObserver")({onHidden:e,onIntersection:a,options:{thresholdOverride:"EXPENSIVE"}})}}),null);
__d("TabBar",["ArbiterMixin","ReactDOM","mixin"],(function(a,b,c,d,e,f){a=function(a){babelHelpers.inheritsLoose(c,a);function c(d,e,f){var g;g=a.call(this)||this;e.props=babelHelpers["extends"]({},e.props,{onTabClick:function(a){return g.inform(c.TAB_CLICK,a)}});b("ReactDOM").render(d(e),f);return g}return c}(b("mixin")(b("ArbiterMixin")));e.exports=a;a.TAB_CLICK="onTabClick"}),null);
__d("DurationFormatter",["fbt"],(function(a,b,c,d,e,f,g){"use strict";f.formatShort=a;f.formatTime=b;f.formatTimeWithMinuteGranularity=c;f._formatHours=d;f._formatMinutes=e;f._formatMinutesWithoutSeconds=j;f._formatSeconds=k;var h=60,i=3600;function a(a){var b=Math.floor(a/i);a-=b*i;var c=Math.floor(a/h);a-=c*h;a=a%60;var d=b?b.toString()+":":"";d+=!b||c>=10?c.toString():"0"+c;d+=":";d+=a>=10?a.toString():"0"+a;return d}function b(a){if(a>=i)return this._formatHours(a);else if(a>=h)return this._formatMinutes(a);else return this._formatSeconds(a)}function c(a){if(a>=i)return this._formatHours(a);else return this._formatMinutesWithoutSeconds(a)}function d(a){var b=Math.floor(a/i);a=a-b*i;a=Math.floor(a/h);if(a>0)return g._({"*":{"*":"{hours} hours and {minute} minutes","_1":"{hours} hours and 1 minute"},"_1":{"*":"1 hour and {minute} minutes","_1":"1 hour and 1 minute"}},[g._plural(b,"hours"),g._plural(a,"minute")]);else return g._({"*":"{number} hours","_1":"1 hour"},[g._plural(b,"number")])}function e(a){var b=Math.floor(a/h),c=Math.floor(a-b*h);if(c>0)return g._({"*":{"*":"{minutes} minutes and {seconds} seconds","_1":"{minutes} minutes and 1 second"},"_1":{"*":"1 minute and {seconds} seconds","_1":"1 minute and 1 second"}},[g._plural(b,"minutes"),g._plural(c,"seconds")]);else return this._formatMinutesWithoutSeconds(a)}function j(a){a=Math.floor(a/h);return g._({"*":"{number} minutes","_1":"1 minute"},[g._plural(a,"number")])}function k(a){a=Math.floor(a);return g._({"*":"{number} seconds","_1":"1 second"},[g._plural(a,"number")])}}),null);
__d("VideoDuration.react",["cx","fbt","ix","DurationFormatter","FlexLayout.react","Image.react","React"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=null;this.props.isSpherical&&(a=j.jsx(b("Image.react"),{className:"__lq",src:i("501720")}));if(this.props.isLive)return this.props.liveViewerCount?j.jsxs(b("FlexLayout.react"),{className:"_7p9t",children:[j.jsx(b("FlexLayout.react"),{className:"_7p9w",align:"center",children:h._("LIVE")}),j.jsx(b("FlexLayout.react"),{align:"center",className:"_7p9y",children:j.jsx("span",{children:this.props.liveViewerCount})})]}):j.jsxs(b("FlexLayout.react"),{className:"_2pq9",align:"center",children:[a,h._("LIVE")]});return this.props.duration?j.jsxs(b("FlexLayout.react"),{className:"_2pq8",align:"center",children:[a,j.jsx("span",{children:b("DurationFormatter").formatShort(this.props.duration)})]}):null};return c}(j.Component);e.exports=a}),null);
__d("LitestandMessages",[],(function(a,b,c,d,e,f){a=Object.freeze({NEWSFEED_LOAD:"LitestandMessages/NewsFeedLoad",LEAVE_HOME:"LitestandMessages/LeaveHome",STORIES_REQUESTED:"LitestandMessages/StoriesRequested",STORIES_INSERTED:"LitestandMessages/StoriesInserted",NEWER_STORIES_REQUESTED:"LitestandMessages/NewerStoriesRequested",NEWER_STORIES_INSERTED:"LitestandMessages/NewerStoriesInserted",NEW_STORIES_CONTAINER_CREATED:"LitestandMessages/NewStoriesContainer",RHC_RELOADED:"LitestandMessages/RHCReloaded",STREAM_LOAD_ERROR:"LitestandMessages/StreamLoadError",DUPLICATE_CURSOR_ERROR:"LitestandMessages/DuplicateCursorError",STREAM_LOAD_RETRY:"LitestandMessages/StreamLoadRetry"});e.exports=a}),null);
__d("FeedStoryCategory",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:0,ORGANIC:1,ENGAGEMENT:2,FIXED_POSITION:3,PROMOTION:4,SPONSORED:5,END_OF_FEED_CONTENT:6,FB_STORIES:7,HIGH_VALUE_PROMOTION:8,FB_STORIES_ENGAGEMENT:9,SHOWCASE:10,FB_SHORTS:11,TRENDING:12})}),null);
__d("AdAllocationIntegrityGapsInfo",["FeedStoryCategory"],(function(a,b,c,d,e,f){a=function(){function a(a){this.story_category=a,this.dist_to_top=-1,this.dist_to_fixed=-1,this.dist_to_promo=-1,this.dist_to_sponsored=-1,this.dist_to_engagement=-1}var c=a.prototype;c.setDistToTop=function(a){this.dist_to_top=a};c.setDistIfAbsent=function(a,c){if(c<0||a===b("FeedStoryCategory").UNKNOWN||a===b("FeedStoryCategory").ORGANIC)return;switch(a){case b("FeedStoryCategory").ENGAGEMENT:this.dist_to_engagement=this.$1(c,this.dist_to_engagement);break;case b("FeedStoryCategory").FIXED_POSITION:this.dist_to_fixed=this.$1(c,this.dist_to_fixed);break;case b("FeedStoryCategory").PROMOTION:this.dist_to_promo=this.$1(c,this.dist_to_promo);break;case b("FeedStoryCategory").SPONSORED:this.dist_to_sponsored=this.$1(c,this.dist_to_sponsored);break}};c.$1=function(a,b){return b===-1?a:b};return a}();e.exports=a}),null);
__d("AdAllocationIntegrityUtils",["DataAttributeUtils","FeedStoryCategory","collectDataAttributes"],(function(a,b,c,d,e,f){"use strict";f.getFeedStoryCategory=a;f.isGapRuleCategory=c;f.getDedupKey=d;var g="data-story_category",h="data-dedupekey",i="ft";function a(a){var c=b("collectDataAttributes")(a,[i]).ft;a=b("DataAttributeUtils").getDataAttribute(a,g);if(a)switch(a){case"2":return b("FeedStoryCategory").ENGAGEMENT;case"3":return b("FeedStoryCategory").FIXED_POSITION;case"4":return b("FeedStoryCategory").PROMOTION;default:return b("FeedStoryCategory").UNKNOWN}else if(c.ei)return b("FeedStoryCategory").SPONSORED;else return b("FeedStoryCategory").ORGANIC}function c(a){if(a===b("FeedStoryCategory").SPONSORED||a===b("FeedStoryCategory").ENGAGEMENT||a===b("FeedStoryCategory").FIXED_POSITION||a===b("FeedStoryCategory").PROMOTION)return!0;else return!1}function d(a){return b("DataAttributeUtils").getDataAttribute(a,h)}}),null);
__d("WwwVpvFeedTrackingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1841521");c=b("FalcoLoggerInternal").create("www_vpv_feed_tracking",a);e.exports=c}),null);
__d("viewportTrackingBuilder",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){var b=null;return{factory:a,singleton:function(){b||(b=a.apply(void 0,arguments));return b},clearSingleton:function(){b=null}}}}),null);
__d("ViewportTracking",["cx","invariant","AdAllocationIntegrityGapsInfo","AdAllocationIntegrityUtils","Arbiter","Banzai","BanzaiScuba","CSS","CurrentUser","DOM","DOMDimensions","Event","LitestandMessages","NavigationMessage","Run","SubscriptionsHandler","TimeSlice","UserActivity","ViewportTrackingHelper","WebSession","WwwVpvFeedTrackingFalcoEvent","clearTimeout","clickRefAction","collectDataAttributes","debounce","getElementPosition","getViewportDimensions","gkx","pageID","setTimeout","throttle","viewportTrackingBuilder"],(function(a,b,c,d,e,f,g,h){"use strict";var i=97,j="vpv",k=3,l=2,m=1,n=0,o=1,p=2,q=3,r=4,s=43,t=function(){function a(a){this.cachedAllStories=[],this.vpvdBoundingRect=!1,this.vpvdAnalysis=!1,this.vpvdDebug=!1,this.vpvDebug=!1,this.fireTimer=this.fireTimer.bind(this),this.markStoryRead=this.markStoryRead.bind(this),this.behavior=a}var c=a.prototype;c.init=function(a){var c=this;this.useBanzai=!0;this.vpvDebug=!!a.vpv_debug;this.vpvdBoundingRect=b("gkx")("1229480");this.vpvdDebug=!!a.vpvd_debug;this.vpvdAnalysis=!!a.vpvd_analysis;this.ctaLoggingEnabled=!!a.cta_logging_enabled;this.adAllocationIntegrityLoggingEnabled=!!a.ad_allocation_integrity_logging_enabled;this.readStoryIDs={};this.storyIDsWasInView={};this.minFractionToBeVisibleForTimetracking=.5;this.scrollThrottlingInterval=100;this.mouseThrottlingInterval=100;this.keyboardThrottlingInterval=100;this.userActivityPollingInterval=5e3;this.timeToBeConsideredInactive=15e3;this.minTimeToReportImmediately=500;this.discardVPVDIntervalThreshold=9e4;this.active_state_duration=1e3;this.height_diff_to_change_state=25;this.focused_state_duration=3500;this.minSizeToBeVisible=200;this.invalidateAllStoriesCache();this.cachedViewportHeight=b("getViewportDimensions")().height;this.isTimetrackingEnabled=!1;this.activeStories={};this.userInactiveLock=!1;this.userActivityPollerTimeoutID=null;this._headLoadStoryCount=0;this.behavior.getDataFromConfig&&this.behavior.getDataFromConfig(a,this);this.isTimetrackingEnabled&&(this.lastMouseX=-1,this.lastMouseY=-1,this.lastStreamY=-1,this.latestStreamYChangedTimeStamp=-1,this.userFocus=p,this.latestUserFocus=p,this.latestUserActivity="init",this.focusedStory=null,this.latestFocusedStory=null,this.latestActiveStory=null,this.totalVPVDuration={});a.tracking_duration_config&&(this.scrollThrottlingInterval=a.tracking_duration_config.scroll_throttling_interval,this.mouseThrottlingInterval=a.tracking_duration_config.mouse_throttling_interval,this.keyboardThrottlingInterval=a.tracking_duration_config.keyboardThrottlingInterval,this.userActivityPollingInterval=a.tracking_duration_config.user_activity_polling_interval,this.timeToBeConsideredInactive=a.tracking_duration_config.time_to_be_considered_inactive,this.minSizeToBeVisible=a.tracking_duration_config.min_height_to_be_visible,this.minFractionToBeVisibleForTimetracking=a.tracking_duration_config.min_fraction_to_be_visible,this.minTimeToReportImmediately=a.tracking_duration_config.min_time_to_report_immediately,this.active_state_duration=a.tracking_duration_config.active_state_duration,this.height_diff_to_change_state=a.tracking_duration_config.story_height_diff_to_change_state,this.focused_state_duration=a.tracking_duration_config.focused_state_duration,this.discardVPVDIntervalThreshold=a.tracking_duration_config.discard_vpvd_interval_threshold);a.record_delay!==void 0||h(0,1115);var d=b("debounce")(this.fireTimer,a.record_delay,this);this.initialStories=this.getStoriesInView();this.initialStoriesLogged=!1;this.subscriptions=new(b("SubscriptionsHandler"))();this.subscriptions.addSubscriptions(this._getScrollListener(d),b("Event").listen(window,"resize",function(){c.cachedViewportHeight=b("getViewportDimensions")().height,d()}),b("Event").listen(window,"focus",function(){c.isTimetrackingEnabled&&c.updateTimeTrackingData(!1,"window_focus")}),b("Event").listen(window,"blur",function(){c.isTimetrackingEnabled&&c.updateTimeTrackingData(!0,"window_blur")}),b("Arbiter").subscribe(b("NavigationMessage").NAVIGATION_BEGIN,this.cleanup.bind(this)),b("Arbiter").subscribe("Stream/totalHeadLoadedStories",function(a,b){c._headLoadStoryCount=b.count}),b("Arbiter").subscribe(b("LitestandMessages").STORIES_INSERTED,function(){c.initialStoriesLogged&&d(),c.isTimetrackingEnabled&&c.updateTimeTrackingData(!1,"stories_inserted")}));if(this.isTimetrackingEnabled&&this.behavior.getStream){var e;this.updateTimeTrackingData(!1,"init");a=b("throttle")(function(a){c.handleScroll(a)},this.scrollThrottlingInterval);var f=b("throttle")(function(a){return c.handleKeyboard(a)},this.keyboardThrottlingInterval),g=b("throttle")(function(a){return c.handleMouse(a)},this.mouseThrottlingInterval);this.subscriptions.addSubscriptions((e=b("Event")).listen(window,"scroll",a),e.listen(document.documentElement,"DOMMouseScroll",a,void 0,{passive:!0}),e.listen(document.documentElement,"mousewheel",a,void 0,{passive:!0}),e.listen(document.documentElement,"keydown",f),e.listen(document.documentElement,"mouseover",g),e.listen(document.documentElement,"mousemove",g),e.listen(document.documentElement,"click",function(a){c.handleMouse(a)}),b("Arbiter").subscribe("Event/stop",function(a,b){c.handleMouse(b.event)}),b("Arbiter").subscribe("PhotoSnowlift.OPEN",function(){c.userFocus=q,c.handleLayers()}),b("Arbiter").subscribe("PhotoSnowlift.CLOSE",function(){c.userFocus=o,c.focusedStory=null,c.updateTimeTrackingData(!1,"snowlift_close")}));this._userActivityPoller()}b("Run").onLeave(this.cleanup.bind(this));b("Run").onUnload(this.cleanup.bind(this))};c._getScrollListener=function(a){return b("Event").listen(window,"scroll",a)};c.cleanup=function(){this.subscriptions&&(this.subscriptions.release(),this.subscriptions=null),this.isTimetrackingEnabled&&(b("clearTimeout")(this.userActivityPollerTimeoutID),this.updateTimeTrackingData(!0,"cleanup")),this.initialStories=[],this._headLoadStoryCount=0};c.fireTimer=function(){this.initialStoriesLogged||(this.initialStories.forEach(this.markStoryRead,this),this.initialStoriesLogged=!0),this.storiesInView=this.getStoriesInView(),this.storiesInView.forEach(this.markStoryRead,this)};c.getSessionID=function(){return null};c._userActivityPoller=function(){var a=this;!this.userInactiveLock&&!b("UserActivity").isActive(this.timeToBeConsideredInactive)&&(this.userInactiveLock=!0,this.userFocus=p,this.updateTimeTrackingData(!1,"user_activity_inactive"),b("UserActivity").subscribeOnce(function(){a.userFocus=o,a.updateTimeTrackingData(!1,"user_activity_active"),a.userInactiveLock=!1}));this.userActivityPollerTimeoutID=b("setTimeout")(b("TimeSlice").guard(this._userActivityPoller.bind(this),"ViewportTracking poll setTimeout",{propagationType:b("TimeSlice").PropagationType.EXECUTION}),this.userActivityPollingInterval)};c.getQueryID=function(a){return-1};c.getFBFeedLocations=function(a){return-1};c.getFBFeedInsertionPosition=function(a){return-1};c.createVPVDTimer=function(a){var b=document.createElement("label");b.setAttribute("for",a.toString());b.setAttribute("class","vpvd_debug_timer");return b};c.updateVPVDTimer=function(a){var c=this.activeStories[a].story;if(!c)return;var d=b("DOM").scry(c,".vpvd_debug_timer");if(!d.length){d=[this.createVPVDTimer(c),this.createVPVDTimer(c)];var e=b("DOM").scry(c,".UFIRow");e.length&&e[e.length-1].clientWidth>0?e[e.length-1].appendChild(d[0]):c.appendChild(d[0]);c.insertBefore(d[1],c.firstChild)}e=this.totalVPVDuration[a];c=Math.floor(e/1e3)+"."+Math.floor(e%1e3/100);b("DOM").setContent(d[0],c);b("DOM").setContent(d[1],c)};c.updateVPVDTimers=function(){for(var a in this.activeStories)Object.prototype.hasOwnProperty.call(this.activeStories,a)&&this.updateVPVDTimer(a)};c.logVpvdAnalysis=function(a,c,d,e,f,g){var h=new(b("BanzaiScuba"))("vpv_duration");h.addDenorm("qid",this.getQueryID(this.activeStories[a].story));h.addDenorm("uid",b("CurrentUser").getID());h.addDenorm("vsid",a);h.addInteger("time",Math.round(Date.now()/1e3));h.addInteger("duration",e);h.addInteger("total_duration",f);h.addNormal("story_state",this.activeStories[a].state);h.addNormal("is_active_state",d);h.addNormal("num_visible_stories",this.numVisibleStories);h.addInteger("story_height",this.activeStories[a].story_height);h.addInteger("story_visible_height",this.activeStories[a].height);h.addInteger("state_visible_height",g);h.addInteger("total_visible_height",this.totalVisibleHeight);h.addInteger("total_height",this.totalHeight);h.addNormal("user_focus",this.latestUserFocus);h.addNormal("next_user_focus",this.userFocus);h.addInteger("vpvd",c);h.addInteger("accumulated_vpvd",this.activeStories[a].vpvd);h.addNormal("user_activity",this.latestUserActivity);h.addNormal("next_user_activity",this.userActivity);h.addInteger("story_position_y",this.activeStories[a].y);h.addInteger("feed_insertion_position",this.getFBFeedInsertionPosition(this.activeStories[a].story));h.addNormal("visible_position",this.activeStories[a].visible_position);h.addNormal("is_focused_story",this.activeStories[a].is_focused);h.post()};c.shouldDiscardStory=function(a){var b=this.activeStories[a].height||0;return b!=this.activeStories[a].story_height&&b<this.totalHeight/2};c.calculateTotalHeight=function(){this.totalHeight=0;for(var a in this.activeStories)Object.prototype.hasOwnProperty.call(this.activeStories,a)&&(this.totalHeight+=this.activeStories[a].height)};c.updateVPVDurations=function(a){var b;if(this.latestUserFocus===p||a-this.latestTimeTrackingTimestamp>this.discardVPVDIntervalThreshold)return;b=(b={},b[m]=0,b[l]=0,b[k]=0,b);var c=a-this.latestTimeTrackingTimestamp>=this.focused_state_duration;this.totalVisibleHeight=0;for(var d in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,d)&&!(this.latestUserFocus===o&&c&&this.shouldDiscardStory(d))){var e=this.activeStories[d].state||null,f=this.activeStories[d].height||0;e!==null&&Object.prototype.hasOwnProperty.call(b,e)&&(b[e]+=f);this.totalVisibleHeight+=f}e=0;f=a-this.latestTimeTrackingTimestamp;this.latestUserFocus===o&&(f=b[k]>0?this.focused_state_duration:this.active_state_duration,f=Math.min(f,a-this.latestTimeTrackingTimestamp),e=a-this.latestTimeTrackingTimestamp-f);a=0;var g=k;for(var h=k;h>=m;h--)if(b[h]>0){a=b[h];g=h;break}h=b[k]+b[l]+b[m];b=0;for(d in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,d)){if(this.latestUserFocus===o&&c&&this.shouldDiscardStory(d))continue;var i=this.activeStories[d].state||n;if(a>0&&i>=g){i=this.activeStories[d].height||0;b=f*(i/a);this.vpvdAnalysis&&f>0&&this.logVpvdAnalysis(d,b,!0,f,f+e,a);this.activeStories[d].vpvd+=b;this.totalVPVDuration[d]+=b}if(h>0){i=this.activeStories[d].height||0;b=e*(i/h);this.vpvdAnalysis&&e>0&&this.logVpvdAnalysis(d,b,!1,e,f+e,h);this.activeStories[d].vpvd+=b;this.totalVPVDuration[d]+=b}}};c.updateActiveStory=function(a,b,c,d){this.activeStories[a].state=b,this.activeStories[a].ts=c,this.activeStories[a].height_snapshot=d[a].height,this.activeStories[a].is_focused=this.focusedStory===d[a].story,this.activeStories[a].story_height=d[a].story_height,this.vpvdAnalysis&&(this.activeStories[a].visible_position=d[a].visible_position,this.activeStories[a].y=d[a].y)};c.updateActiveStories=function(a,b){for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))if(c in this.activeStories){var d=a[c].height||0;this.activeStories[c].height=d;d=d-(this.activeStories[c].height_snapshot||0);this.focusedStory===a[c].story?this.updateActiveStory(c,k,b,a):d<=-this.height_diff_to_change_state?this.updateActiveStory(c,this.shouldDiscardStory(c)?n:m,b,a):(d>=this.height_diff_to_change_state||this.activeStories[c].is_focused||this.activeStories[c].height===this.activeStories[c].story_height)&&this.updateActiveStory(c,l,b,a)}else this.storyIDsWasInView[c]=!0,this.activeStories[c]={evp_ts:b,story:a[c].story,height:a[c].height,vpvd:0},this.totalVPVDuration[c]||(this.totalVPVDuration[c]=0),this.updateActiveStory(c,l,b,a),this.behavior.afterStoryEntersViewport&&this.behavior.afterStoryEntersViewport(this.activeStories[c].story)};c.recordVPVDurations=function(a,b){for(var c in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,c)&&(b||!(c in a))){var d=this.activeStories[c].vpvd||0;(d>this.focused_state_duration||d===this.totalVPVDuration[c]||d>=250)&&this.recordTimeStoryWasInView(this.activeStories[c]);this.behavior.afterStoryExitsViewport&&this.behavior.afterStoryExitsViewport(this.activeStories[c].story);delete this.activeStories[c]}};c.updateTimeTrackingData=function(a,b){this.userActivity=b;this.activeStories||(this.activeStories={});b=Date.now();this.latestTimeTrackingTimestamp||(this.latestTimeTrackingTimestamp=b);var c=this.getAllStoriesInView();this.calculateTotalHeight();this.updateVPVDurations(b);this.updateActiveStories(c,b);this.vpvdDebug&&this.updateVPVDTimers();this.recordVPVDurations(c,a);a?this.latestTimeTrackingTimestamp=0:this.latestTimeTrackingTimestamp=b;this.latestUserActivity=this.userActivity;this.latestUserFocus=this.userFocus;this.focusedStory&&(this.latestActiveStory=this.focusedStory);this.latestFocusedStory=this.focusedStory;this.focusedStory=null};c.needsToUpdateTimeTrackingData=function(){return!(this.latestUserFocus===this.userFocus&&(this.userFocus===p||this.userFocus===o&&!this.latestFocusedStory&&!this.focusedStory))};c.getfocusedStory=function(a){var c=this.getAllStoriesInView();for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){var e=c[d].story;if(e&&b("ViewportTrackingHelper").isDescendantOf(a,e))return e}return null};c.handleLayers=function(){if(this.userFocus===q||this.userFocus===r){this.focusedStory=this.latestActiveStory;this.updateTimeTrackingData(!1,"media_layer");return!0}return!1};c.didInteractWithStream=function(a){if(!this.behavior.getStream)return!1;var c=this.behavior.getStream();return b("ViewportTrackingHelper").isDescendantOf(a,c)||b("ViewportTrackingHelper").isDescendantOf(c,a)};c.handleScroll=function(a){if(this.handleLayers())return;var c=Date.now();this.behavior.getStream||h(0,1116);var d=b("getElementPosition")(this.behavior.getStream()).y;d!=this.lastStreamY||c-this.latestStreamYChangedTimeStamp<2.5*this.scrollThrottlingInterval||this.didInteractWithStream(a.target)?(this.latestStreamYChangedTimeStamp=c,this.userFocus=o):this.userFocus=p;this.lastStreamY=d;(this.userFocus===o||this.needsToUpdateTimeTrackingData())&&this.updateTimeTrackingData(!1,"scroll")};c.handleKeyboard=function(a){if(this.handleLayers())return;this.didInteractWithStream(a.target)?(this.userFocus=o,this.focusedStory=this.getfocusedStory(a.target)):b("CSS").hasClass(a.target,"shareInput")?(this.userFocus=o,this.focusedStory=this.latestActiveStory):this.userFocus=p;(this.userFocus===o||this.needsToUpdateTimeTrackingData())&&this.updateTimeTrackingData(!1,"keyboard")};c.handleMouse=function(a){if(this.handleLayers())return;if(a.type!="click"&&a.clientX===this.lastMouseX&&a.clientY===this.lastMouseY)return;this.didInteractWithStream(a.target)?(this.userFocus=o,this.focusedStory=this.getfocusedStory(a.target)):this.userFocus=p;this.lastMouseX=a.clientX;this.lastMouseY=a.clientY;this.needsToUpdateTimeTrackingData()&&this.updateTimeTrackingData(!1,a.type)};c.getStoriesInView=function(){var a=this.behavior.getAllStories(),c=[],d=!1;for(var e=0;e<a.length;e++){var f=a[e],g=this.behavior.getStoryID(f);if(g&&this.hasBeenVisible(g))continue;if(b("ViewportTrackingHelper").isVisible(f,this.minSizeToBeVisible))f.getAttribute("data-insertion-position")===null&&f.setAttribute("data-insertion-position",(e-this._headLoadStoryCount).toString()),c.push(f),d=!0;else if(d)break}return c};c.getAllStoriesFromCache=function(){this.cachedAllStories.length===0&&(this.cachedAllStories=this.behavior.getAllStories());return this.cachedAllStories};c.invalidateAllStoriesCache=function(){this.cachedAllStories=[]};c.getBlueBarHeightDifference=function(){return window.innerHeight>=400?s:0};c.getAllStoriesInViewUsingBoundingRect=function(){var a=this.getAllStoriesFromCache(),c={},d=a.length,e=window.innerHeight-this.getBlueBarHeightDifference();for(var f=0;f<a.length;f++){var g=a[f],h=Math.min(this.minSizeToBeVisible,e/2),i=b("ViewportTrackingHelper").getHeightIfVisible(g,h);if("getBoundingClientRect"in g){var j=g.getBoundingClientRect();if(!j.top&&!j.bottom)continue;if(j.top>e-h)break;if(j.top<=e-h&&j.bottom>=h){j=this.behavior.getStoryID(g);j&&(c[j]={story:g,height:i,story_height:b("DOMDimensions").getElementDimensions(g).height},this.vpvdAnalysis&&(c[j].y=b("getElementPosition")(g).y,c[j].visible_position=f,d=Math.min(d,f)))}}}if(this.vpvdAnalysis){this.numVisibleStories=0;for(j in c)Object.prototype.hasOwnProperty.call(c,j)&&(c[j].visible_position-=d,this.numVisibleStories++)}return c};c.getAllStoriesInView=function(){if(this.vpvdBoundingRect)return this.getAllStoriesInViewUsingBoundingRect();var a=this.getAllStoriesFromCache(),c={},d=!1,e=0,f=a.length,g=1,h=a.length;this._indexOfLastVisibleStoryOnPreviousPass>f/2&&(e=f-1,f=-1,g=-g);var i=window.innerHeight-this.getBlueBarHeightDifference();for(var e=e;e!=f;e+=g){var j=a[e],k=b("ViewportTrackingHelper").getHeightIfVisible(j,Math.min(this.minSizeToBeVisible,i/2));if(k>0||j===this.focusedStory){j.getAttribute("data-insertion-position")===null&&j.setAttribute("data-insertion-position",(e-this._headLoadStoryCount).toString());var l=this.behavior.getStoryID(j);l&&(c[l]={story:j,height:k,story_height:b("DOMDimensions").getElementDimensions(j).height},d=!0,this.vpvdAnalysis&&(c[l].y=b("getElementPosition")(j).y,c[l].visible_position=e,h=Math.min(h,e)))}else if(d){this._indexOfLastVisibleStoryOnPreviousPass=e-g;break}}if(this.vpvdAnalysis){this.numVisibleStories=0;for(l in c)Object.prototype.hasOwnProperty.call(c,l)&&(c[l].visible_position-=h,this.numVisibleStories++)}return c};c.getTimetrackingDataToLog=function(a){a={evt:i,time_spent_id:b("pageID"),vpvd_start_timestamp:a.evp_ts||null,vpvd_time_delta:Math.round(a.vpvd||0),story_height:b("DOMDimensions").getElementDimensions(a.story).height,viewport_height:this.cachedViewportHeight,sid_raw:b("WebSession").getId()};return{ft:a}};c.getGapsInfoToLog=function(a){var c=this;if(a===null||a===void 0)return null;var d=b("AdAllocationIntegrityUtils").getFeedStoryCategory(a),e=new(b("AdAllocationIntegrityGapsInfo"))(d);if(!b("AdAllocationIntegrityUtils").isGapRuleCategory(d))return e;else{d=b("AdAllocationIntegrityUtils").getDedupKey(a);if(d===null)return null;a=this.behavior.getAllStories().filter(function(a){return Object.prototype.hasOwnProperty.call(c.storyIDsWasInView,c.behavior.getStoryID(a))});var f=-1;for(var g=a.length-1;g>=0;g--){var h=b("AdAllocationIntegrityUtils").getDedupKey(a[g]);if(f<0)h!==null&&d===h&&(f=g,e.setDistToTop(f+1));else{h=b("AdAllocationIntegrityUtils").getFeedStoryCategory(a[g]);b("AdAllocationIntegrityUtils").isGapRuleCategory(h)&&e.setDistIfAbsent(h,f-g)}}return e}};c.recordTimeStoryWasInView=function(a){if(!this.isTimetrackingEnabled)return;var c=a.story;if(!a.vpvd||!c)return;if(a.vpvd>0){a=this.getTimetrackingDataToLog(a);var d=b("collectDataAttributes")(c,["ft"]);Object.assign(a.ft,d.ft);if(this.adAllocationIntegrityLoggingEnabled){var e=this.getGapsInfoToLog(c);Object.assign(a.ft,e)}e=!!d.ft.ei&&a.ft.vpvd_time_delta>this.minTimeToReportImmediately;a.ei&&delete a.ei;this.sendDataToLog(c,a,e)}};c.hasBeenVisible=function(a){return a in this.readStoryIDs};c.sendDataToLog=function(a,c,d){if(this.useBanzai){var e={};d&&(e.delay=3e3);d=this.getSessionID();d&&(c.ft.session_id=d);c.ft.raw_client_time=Date.now()/1e3;b("gkx")("1841520")?b("WwwVpvFeedTrackingFalcoEvent").log(function(){return{tracking:JSON.stringify(c.ft)}}):b("Banzai").post("feed_tracking",c,e)}else b("clickRefAction")(j,a,null,"FORCE",c)};c.markStoryRead=function(a){var c=this.behavior.getStoryID(a);if(!c||this.hasBeenVisible(c))return;this.readStoryIDs[c]=!0;c=this._getDataToLogImpl(a);var d=b("collectDataAttributes")(a,["ft"]);Object.assign(c.ft,d.ft);delete c.ei;this.sendDataToLog(a,c,!1);this.vpvDebug&&b("CSS").addClass(a,"_5m7s")};c._getDataToLogImpl=function(a){a=this.behavior.getDataToLog(a);a.ft||(a.ft={});return a};return a}();e.exports=t;t.clearSingleton=function(){};var u={getAllStories:function(){return[]},getStoryID:function(a){return null},getDataToLog:function(a){return{}}};a=b("viewportTrackingBuilder")(function(a){return new t(u)});t.factory=a.factory.bind(a);t.singleton=a.singleton.bind(a);t.clearSingleton=a.clearSingleton.bind(a);t.getBehavior=function(){return u}}),null);
__d("collectSubtreeData",[],(function(a,b,c,d,e,f){function g(a,b,c,d,e){if(a.offsetWidth===0&&a.offsetHeight===0)return e;var f={};if(a.getAttribute)for(j=0;j<b.length;j++){k=b[j];var h=a.getAttribute(c[k]);if(h){f[k]={};h=JSON.parse(h);for(var i in d)h[i]!==void 0&&(f[k][i]=!0,e[k]===void 0&&(e[k]={}),e[k][i]===void 0&&(e[k][i]=[]),d[i].length>0&&e[k][i].push(d[i]),e[k][i].push("("+h[i]))}}for(var j=0;j<a.childNodes.length;j++){h=a.childNodes[j];g(h,b,c,d,e)}for(var k in f)for(var l in f[k]){h=e[k][l][e[k][l].length-1];h.length>0&&h.charAt(0)=="("?e[k][l][e[k][l].length-1]=h.substr(1):e[k][l].push(")")}return e}function a(a,b){var c={};for(var d=0;d<b.length;++d)c[b[d]]="data-"+b[d];d={tn:"","tn-debug":","};var e={};g(a,b,c,d,e);for(var f in e)for(var h in e[f])e[f][h]=e[f][h].join("");return e}e.exports=a}),null);
__d("recordTNTreeData",["collectSubtreeData"],(function(a,b,c,d,e,f){function a(a,c){var d={},e=b("collectSubtreeData")(a,["ft"]);for(var f in e.ft)d[f+"_tree"]=e.ft[f],f==="tn-debug"&&a.setAttribute("tn-debug_subtree",e.ft[f]);d.evt_value=a.offsetHeight;c&&(d.offset=Math.max(0,a.offsetTop-c.offsetTop));return d}e.exports=a}),null);
__d("StreamViewportTracking",["DataAttributeUtils","DOM","DOMDimensions","ViewportTracking","ge","recordTNTreeData","viewportTrackingBuilder"],(function(a,b,c,d,e,f){"use strict";var g=51;function h(a,c,d,e,f){e===void 0&&(e=g);f===void 0&&(f=null);return{_stream:null,getDataFromConfig:function(a,b){b.isTimetrackingEnabled=!0},getAllStories:function(){var a=b("DOM").scry(this.getStream(),d);return a.filter(function(a){return b("DataAttributeUtils").getDataFt(a)})},getStream:function(){if(c)return c;this._stream||(this._stream=b("ge")("home_stream"));return this._stream},getStoryID:function(a){var c=JSON.parse(b("DataAttributeUtils").getDataFt(a));if(c&&c.mf_story_key)return c.mf_story_key;return f!==null?f(a):null},getDataToLog:function(a){var c=this.getStream();c=b("recordTNTreeData")(a,c);var d=a.getAttribute("data-insertion-position");d!==null&&(c.inspos=d);c.evt=e;c.vpv_time=Math.round(Date.now()/1e3);d=b("DOM").scry(a,".fbStoryAttachmentImage")[0];if(d){a=b("DOMDimensions").getElementDimensions(d);c.story_image_height=a.height;c.story_image_width=a.width}return{ft:c}}}}var i=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.getQueryID=function(a){a=JSON.parse(b("DataAttributeUtils").getDataFt(a));return a.qid};d.getFBFeedLocations=function(a){a=JSON.parse(b("DataAttributeUtils").getDataFt(a));return a.fbfeed_location};d.getFBFeedInsertionPosition=function(a){a=JSON.parse(b("DataAttributeUtils").getDataFt(a));return a.insertion_position};d.getTimetrackingDataToLog=function(a){var d=c.prototype.getTimetrackingDataToLog.call(this,a);if(this.ctaLoggingEnabled){a=b("DOM").scry(a.story,"[data-is-cta]").map(function(a){a=b("DataAttributeUtils").getDataFt(a);a=a&&JSON.parse(a);return a&&a.cta_types}).filter(function(a){return!!a});a.length>0&&(d.ft.cta_types=a)}return d};d.cleanup=function(){j.clearSingleton(),c.prototype.cleanup.call(this)};return a}(b("ViewportTracking"));e.exports=i;var j=b("viewportTrackingBuilder")(function(a,b){b=new i(h(a,b,".uiStreamStory"));b.init(a);return b});i.factory=j.factory.bind(j);i.singleton=j.singleton.bind(j);i.clearSingleton=j.clearSingleton.bind(j);i.getBehavior=h}),null);
__d("LiveVideoInteractiveAlertSidePaneView.react",["Arbiter","JSResource","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=b("lazyLoadComponent")(b("JSResource")("IdentityBadgeEarnedAlertView.react").__setRef("LiveVideoInteractiveAlertSidePaneView.react"));function a(a){var c=g.useState(null),d=c[0],e=c[1];g.useEffect(function(){var a=b("Arbiter").subscribe("LiveVideoInteractiveAlert/sidePaneAlertReceived",function(a,b){return e(b)});return function(){return a&&a.unsubscribe()}});if(d===null)return null;switch(d.type){case"IDENTITY_BADGE_EARNED":return g.jsx(g.Suspense,{fallback:g.jsx("span",{}),children:g.jsx(h,{badgeName:"Familiar Face",badgeType:"frequent_watcher",videoID:a.videoID,onDismiss:function(){return e(null)}})});default:return null}}}),null);
__d("prevNextControlActionTypes",[],(function(a,b,c,d,e,f){"use strict";a="ADD_ID";f.ADD_ID=a;b="POP_ID";f.POP_ID=b}),null);
__d("prevNextControlActions",["prevNextControlActionTypes"],(function(a,b,c,d,e,f){"use strict";a=function(a){return{type:b("prevNextControlActionTypes").ADD_ID,payload:a}};f.addID=a;c=function(){return{type:b("prevNextControlActionTypes").POP_ID}};f.popID=c}),null);
__d("prevNextControlReducer",["prevNextControlActionTypes"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g={videoIdQueue:[]};function a(a,c){a===void 0&&(a=g);switch(c.type){case b("prevNextControlActionTypes").ADD_ID:if(c.payload!==void 0)return{videoIdQueue:a.videoIdQueue.concat(c.payload)};else return a;case b("prevNextControlActionTypes").POP_ID:return{videoIdQueue:a.videoIdQueue.slice(0,a.videoIdQueue.length-1)};default:return a}}}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("symbol-observable-1.2.0",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){Object.defineProperty(g,"__esModule",{value:!0});g["default"]=a;function a(a){var b;a=a.Symbol;typeof a==="function"?a.observable?b=a.observable:(b=a("observable"),a.observable=b):b="@@observable";return b}}var j=!1;function k(){j||(j=!0,i());return h.exports}var l={},m={exports:l};function n(){Object.defineProperty(l,"__esModule",{value:!0});var b=k();c=c(b);function c(a){return a&&a.__esModule?a:{"default":a}}typeof self!=="undefined"?b=self:typeof window!=="undefined"?b=window:typeof a!=="undefined"?b=a:typeof m!=="undefined"?b=m:b=Function("return this")();c=c["default"](b);l["default"]=c}var o=!1;function p(){o||(o=!0,n());return m.exports}function b(a){switch(a){case void 0:return p()}}e.exports=b}),null);
__d("redux",["redux-3.7.2"],(function(a,b,c,d,e,f){e.exports=b("redux-3.7.2")()}),null);
__d("prevNextControlStore",["prevNextControlReducer","redux"],(function(a,b,c,d,e,f){"use strict";a=b("redux").createStore(b("prevNextControlReducer"));c=a;e.exports=c}),null);
__d("TahoeActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({SET_MC:null,EXIT:null,SET_UFI_INSTANCE_ID:null});c=a;e.exports=c}),null);
__d("TahoeDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;babelHelpers.assertThisInitialized(b).dispatch=b.dispatch.bind(babelHelpers.assertThisInitialized(b));return b}return b}(b("ExplicitRegistrationReactDispatcher"));c=new a({strict:!0});e.exports=c}),null);
__d("TahoeActions",["TahoeActionTypes","TahoeDispatcher"],(function(a,b,c,d,e,f){"use strict";f.setMediaController=a;f.setUFIInstanceID=c;f.exit=d;function a(a){b("TahoeDispatcher").dispatch({type:b("TahoeActionTypes").SET_MC,mediaController:a})}function c(a){b("TahoeDispatcher").dispatch({type:b("TahoeActionTypes").SET_UFI_INSTANCE_ID,ufiInstanceID:a})}function d(){b("TahoeDispatcher").dispatch({type:b("TahoeActionTypes").EXIT})}}),null);
__d("TahoeConstants",["CurrentUser"],(function(a,b,c,d,e,f){"use strict";a=640;f.MIN_PLAYER_WIDTH=a;c=360;f.MIN_PLAYER_HEIGHT=c;d=1e3;f.MAX_PLAYER_HEIGHT=d;e=160;f.MIN_BOTTOM_PANE_HEIGHT=e;a=400;f.SIDE_PANE_WIDTH=a;c=b("CurrentUser").isLoggedIn()?49:0;f.BLUE_BAR_HEIGHT=c;d=b("CurrentUser").isWorkUser()?"Workplace":"Facebook";f.DEFAULT_BROWSER_TITLE=d;e="video-up-next-";f.UP_NEXT_UNIT_ID_PREFIX=e}),null);
__d("ResizeListener",["EventListener","SubscriptionList","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";var g,h=!1,i=new(b("SubscriptionList"))(function(){g=b("EventListener").listen(window,"resize",j)},function(){g.remove()});function j(){h||(h=!0,b("requestAnimationFrame")(function(){i.fireCallbacks(),h=!1}))}a=i;e.exports=a}),null);
__d("TahoeDOM",["csx","cx","BlueBar","BootloadedComponent.react","CSS","DialogX","DOM","DOMQuery","JSResource","React","ReactDOM","Style","XUISpinner.react","ge","getElementPosition","getVendorPrefixedName"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=876;a=function(){function a(a){this.$6=a}var c=a.prototype;c.createDialog=function(){var a={width:j},c=this.$6.getFeedLocation();this.$1=b("CSS").setClass(b("DOM").create("div"),"_5-g-");var d=b("ge")("bizBlackBar");b("CSS").conditionClass(this.$1,"_699q",!b("BlueBar").hasFixedBlueBar()&&!d);d=b("ge")("mediaManagerGlobalChromeBar");b("CSS").conditionClass(this.$1,"_1dm_",c===164||d);this.$4=b("CSS").setClass(b("DOM").create("div"),"_6444");b("DOM").appendContent(this.$1,this.$4);this.$8=b("CSS").setClass(b("DOM").create("div"),"_6445 _6j32");b("DOM").appendContent(this.$1,this.$8);c=new(b("DialogX"))(a,this.$1);d=c.getRoot();d!=null&&b("CSS").setClass(d,"_5-g_");document.body&&b("CSS").addClass(document.body,"_1_-b");c.show();this.$9(c);return c};c.$9=function(a){var c=b("DOMQuery").find(document.body,"._li");b("DOM").appendContent(c,a.getRoot())};c.placeBackAffordance=function(a,c,d,e){b("ReactDOM").render(i.jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("TahoeBackAffordanceContainer.react").__setRef("TahoeDOM"),bootloadPlaceholder:i.jsx("div",{className:"_4ua2"}),entryURI:a,isPermalink:c,landingPageType:e,mediaController:d}),this.$4)};c.insertPlaceholderMedia=function(){var a,c=b("CSS").setClass((a=b("DOM")).create("div"),"_1c_u");b("ReactDOM").render(i.jsx(b("XUISpinner.react"),{className:"_179h",size:"large",background:"dark"}),c);this.$5=c;c=b("CSS").setClass(a.create("div"),"_5-yb _5_63");a.setContent(c,this.$5);a.prependContent(this.$4,c)};c.insertMedia=function(a){var c=b("getElementPosition")(a);this.$5=a;this.$2=(a=b("DOM")).create("div");a.insertAfter(this.$5,this.$2);this.$7=!0;var d=b("CSS").setClass(a.create("div"),"_5-yb _5_63");a.setContent(d,this.$5);a.prependContent(this.getContent(),d);this.$10(d,c)};c.$10=function(a,c){var d;this.$6.setMediaState();var e=(d=b("Style")).getFloat(this.$5,"width"),f=d.getFloat(this.$5,"height"),g="translate("+c.x+"px,"+c.y+"px)";e="scale("+c.width/e+", "+c.height/f+")";d.set(a,b("getVendorPrefixedName")("transform"),g+" "+e);a.offsetWidth;d.set(a,"transition","all .4s cubic-bezier(.12,.8,.32,1)");d.set(a,b("getVendorPrefixedName")("transform"),"none")};c.returnFeedElement=function(){var a;a=(a=(a=this.$5)==null?void 0:a.clientHeight)!=null?a:0;var c=b("CSS").setClass(b("DOM").create("div"),"_1c_u _61-j");b("ReactDOM").render(i.jsx(b("XUISpinner.react"),{size:"large",background:"dark"}),c);b("Style").set(c,"height",a+"px");a=this.getContent();a!=null&&b("DOM").prependContent(a,c);this.$7?(b("DOM").insertAfter(this.$2,this.$3),b("DOM").remove(this.$2),b("Style").set(this.$3,"width",""),b("Style").set(this.$3,"height","")):a!=null&&b("DOM").remove(a.children[1]);this.$7=!1};c.cleanup=function(){var a=document.body;a&&(b("CSS").removeClass(a,"_1_-b"),b("CSS").removeClass(a,"_3yn5"));b("ReactDOM").unmountComponentAtNode(this.$4)};c.getDialogContent=function(){return this.$1};c.getContent=function(){return this.$4};c.getMediaContent=function(){return this.$5};c.setMediaContent=function(a){this.$5=a};c.setMediaContentSize=function(a,c){b("Style").set(this.$5,"width",a),b("Style").set(this.$5,"height",c)};c.setMediaSizeForTahoeV2=function(a,c){b("Style").set(this.$5,"width",a+"px"),b("Style").set(this.$5,"height",c+"px"),b("Style").set(this.$4,"width",a+"px")};c.setInitialMediaContent=function(a){this.$3=a};c.getSideContent=function(){return this.$8};return a}();e.exports=a}),null);
__d("TahoeVideoResizingController",["TahoeConstants"],(function(a,b,c,d,e,f){"use strict";f.getPlayerSize=a;function a(a,c){var d=a-(a=b("TahoeConstants")).SIDE_PANE_WIDTH;c=c-a.MIN_BOTTOM_PANE_HEIGHT-a.BLUE_BAR_HEIGHT;d=Math.max(d,a.MIN_PLAYER_WIDTH);c=Math.max(c,a.MIN_PLAYER_HEIGHT);return{width:d,height:c}}}),null);
__d("TahoeVideoStore",["FluxMapStore","TahoeActionTypes","TahoeDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.reduce=function(a,c){switch(c.type){case b("TahoeActionTypes").SET_MC:a=a.set("mediaController",c.mediaController);break;case b("TahoeActionTypes").SET_UFI_INSTANCE_ID:a=a.set("ufiInstanceID",c.ufiInstanceID);break;case b("TahoeActionTypes").EXIT:a=b("immutable").Map();break;default:break}return a};return c}(b("FluxMapStore"));a.__moduleID=e.id;c=new a(b("TahoeDispatcher"));e.exports=c}),null);
__d("TahoeCopyrightMessage.react",["ix","cx","fbt","Image.react","React","SubscriptionsHandler","XUICloseButton.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={hasCopyrightAction:c.props.videoController.isAudioBlocked()},c.$2=function(){c.setState({hasCopyrightAction:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(this.props.videoController.addListener("blockVideo",function(){a.setState({hasCopyrightAction:!1})}),this.props.videoController.addListener("blockAudio",function(){a.setState({hasCopyrightAction:!0})}),this.props.videoController.addListener("unblockAudio",function(){a.setState({hasCopyrightAction:!1})}))};d.componentWillUnmount=function(){this.$1.release()};d.render=function(){return!this.state.hasCopyrightAction?null:j.jsxs("div",{className:"_6ukn",children:[j.jsx(b("Image.react"),{src:g("519615")}),j.jsx("div",{className:"_6uko",children:this.props.videoController.isBroadcaster()?i._("Your video may be muted in some countries while you're playing this song."):i._("This video is muted because it contains music that can't be played in the country you're in.")}),j.jsx(b("XUICloseButton.react"),{className:"_6ujz",shade:"light",tooltip:"Close",onClick:this.$2})]})};return c}(j.Component);e.exports=a}),null);
__d("TahoeMainPlayerViewportTracking",["csx","StreamViewportTracking"],(function(a,b,c,d,e,f,g){"use strict";f.setup=a;var h=25,i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getTimetrackingDataToLog=function(a){a=b.prototype.getTimetrackingDataToLog.call(this,a);a.ft.src=h;return a};return a}(b("StreamViewportTracking"));function a(a,c,d){c=new i(b("StreamViewportTracking").getBehavior(a,c,"._5-yb",d));c.init(a);return c}}),null);
__d("TahoeUpNextUnitPlaceholder.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(){return h.jsxs("div",{children:[h.jsx("div",{className:"_27do"}),h.jsx("div",{className:"_27dr"}),h.jsx("div",{className:"_27em"}),h.jsx("div",{className:"_27en"})]})}}),null);
__d("TahoeSidePanePlaceholder.react",["cx","Layout.react","React","TahoeUpNextUnitPlaceholder.react","TahoeV2Config","cxMargin"],(function(a,b,c,d,e,f,g){var h=b("React"),i=b("Layout.react").Column,j=b("Layout.react").FillColumn;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("TahoeV2Config").showTahoe2UI?h.jsx("div",{className:"_wxj _6j4x",children:h.jsxs("div",{className:"_6j4y",children:[h.jsx("div",{className:"_6j4z _6j4-"}),h.jsx("div",{className:"_6j4z _6j4_"}),h.jsx("div",{className:"_6j4z _6j50"}),h.jsx("div",{className:"_6j4z _6j54"}),h.jsx("div",{className:"_6j55",children:h.jsxs(b("Layout.react"),{children:[h.jsx(i,{className:"_3-90",children:h.jsx("div",{className:"_6j56"})}),h.jsx(j,{children:h.jsx("div",{className:"_6j57"})})]})})]})}):h.jsxs("div",{className:"_wxj _1-z7",children:[h.jsx("div",{className:"_1kna"}),h.jsx("div",{className:"_1knc"}),h.jsx("div",{className:"_1knd"}),h.jsx("div",{className:"_1kne"}),h.jsx("div",{className:"_1knf"}),h.jsx("div",{className:"_1kng"}),h.jsx(b("TahoeUpNextUnitPlaceholder.react"),{})]})};return c}(h.Component);e.exports=a}),null);
__d("TahoeEndScreenProgressCircle.react",["cx","React","ReactDOM","Style","clearInterval","prop-types","setInterval"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.$2=0,c.$3=0,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$3=this.$2,this.drawProgressCircle(this.props)};d.componentWillUnmount=function(){b("clearInterval")(this.$1)};d.UNSAFE_componentWillReceiveProps=function(a){(a.makeProgress!==this.props.makeProgress||a.timeoutSec!==this.props.timeoutSec)&&this.drawProgressCircle(a)};d.drawProgressCircle=function(a){var c=this;b("clearInterval")(this.$1);var d=b("ReactDOM").findDOMNode(this.refs.progressCircle);if(!d)return;if(a.timeoutSec===0){b("Style").set(d,"stroke-dashoffset",this.$2+"px");return}var e=this.$2/100;b("Style").set(d,"stroke-dashoffset",this.$3+"px");a.makeProgress&&(this.$1=b("setInterval")(function(){c.$3-=e,b("Style").set(d,"stroke-dashoffset",c.$3+"px"),c.$3<=0&&(b("clearInterval")(c.$1),b("Style").set(d,"stroke-dashoffset","0px"),a.onProgressDone&&a.onProgressDone())},a.timeoutSec*10))};d.render=function(){var a=this.props,b=a.circleDiameter,c=a.strokeWidth;a=a.inlineBlock;var d=b/2,e=d-c/2;this.$2=e*2*Math.PI;return h.jsxs("div",{className:"_3was",children:[h.jsxs("svg",{className:"_4bcw"+(a?" _7cis":""),style:{height:b,width:b},children:[h.jsx("circle",{cx:d,cy:d,r:d,fill:this.props.ringColor}),h.jsx("circle",{ref:"progressCircle",cx:d,cy:d,r:e,fill:this.props.circleColor,stroke:this.props.ringProgressColor,strokeWidth:c,strokeDasharray:this.$2})]}),this.props.children]})};return c}(h.Component);e.exports=a;a.propTypes={children:(c=b("prop-types")).element,makeProgress:c.bool.isRequired,onProgressDone:c.func,timeoutSec:c.number.isRequired};a.defaultProps={circleDiameter:48,circleColor:"transparent",inlineBlock:!1,ringColor:"rgba(0, 0, 0, 0.3)",ringProgressColor:"#ffffff",strokeWidth:4}}),null);
__d("TahoeLivingRoomPill.react",["ix","cx","fbt","Image.react","React","Text.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return j.jsxs("div",{className:"_4s4e _6jsd",children:[j.jsx(b("Image.react"),{className:"_4s4f",src:g("487848")}),j.jsx(b("Text.react"),{className:"_4s4g",children:i._("Watch Party")})]})};return c}(j.Component);e.exports=a}),null);
__d("TahoeUpNextOverlay.react",["cx","fbt","ix","Badge.react","CenteredContainer.react","CssBackgroundImage.react","Image.react","Layout.react","LineClamp.react","Link.react","React","Tahoe","TahoeEndScreenProgressCircle.react","TahoeLivingRoomPill.react","URI","VideoDuration.react","XUIGrayText.react","XUIText.react","asset","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=b("React"),l=b("Layout.react").Column,m=b("Layout.react").FillColumn,n=145,o=257,p=52;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={shown:!0},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this,c=this.props,d=c.dismissString,e=c.ownerName,f=c.thumbURI,g=c.title,j=c.viewCount,q=c.duration,r=c.isLive,s=c.isSpherical,t=c.isLivingRoom;c=c.queueCount;var u=this.props.shouldAutoChain&&this.state.shown;return k.jsxs(b("Layout.react"),{className:"_64gd"+(u?"":" _1yks"),children:[k.jsx(l,{className:t?"_6ju4":"",children:k.jsxs(b("Link.react"),{onClick:function(){return a.$1(!1)},children:[k.jsx(b("CssBackgroundImage.react"),{height:n,width:o,imageURI:f,backgroundPosition:"50% 50%",className:"_6rcn"}),t?k.jsx(b("TahoeLivingRoomPill.react"),{}):null,k.jsx(b("CenteredContainer.react"),{className:"_4m5g",horizontal:!0,vertical:!0,fullHeight:!0,children:k.jsxs("div",{className:"_4m83",children:[k.jsx(b("TahoeEndScreenProgressCircle.react"),{makeProgress:u&&this.props.makeProgress,circleDiameter:p,onProgressDone:function(){return a.$1(!0)},timeoutSec:this.props.countdownTimeoutSec,children:k.jsx(b("Image.react"),{className:"_4m8c",src:i("101657")})}),k.jsx("div",{className:"_4m8d",children:h._("UP NEXT")})]})}),q?k.jsx("div",{className:"_4m8e",children:k.jsx(b("VideoDuration.react"),{isLive:r,isSpherical:s,duration:q})}):null]})}),k.jsxs(m,{className:"_64ge",children:[k.jsxs("div",{className:"_64gf",children:[g?k.jsx("div",{className:"_64gj",children:k.jsx(b("Link.react"),{onClick:function(){return a.$1(!1)},children:k.jsx(b("LineClamp.react"),{lines:3,fitHeightToShorterText:!0,enableTooltipOnOverflow:!0,children:k.jsx(b("XUIText.react"),{size:"header4",weight:"bold",children:g})})})}):null,e?k.jsx("div",{className:"_2pim",children:k.jsxs(b("LineClamp.react"),{lines:1,enableTooltipOnOverflow:!0,children:[k.jsx(b("XUIGrayText.react"),{size:"meta1",children:e}),this.$2()]})}):null,t&&c?k.jsx(b("XUIGrayText.react"),{display:"block",size:"meta1",children:h._("{queue_count} Videos",[h._param("queue_count",c)])}):null,j>0?t?this.$3(j):k.jsx(b("XUIGrayText.react"),{display:"block",size:"meta1",children:h._({"*":"{number} Views","_1":"1 View"},[h._plural(j,"number",b("intlSummarizeNumber")(j))])}):null]}),k.jsx("div",{className:"_64gk",children:k.jsxs(b("Link.react"),{onClick:function(){return a.$4()},children:[k.jsx(b("Image.react"),{className:"_64gl",src:i("368787")}),k.jsx(b("XUIText.react"),{className:"_64gl _2pir",size:"header3",children:d?d:h._("Cancel")})]})})]})]})};d.$3=function(a){a=a>1?k.jsx(b("XUIGrayText.react"),{display:"block",size:"meta1",children:h._("{view counter} watching now",[h._param("view counter",b("intlSummarizeNumber")(a))])}):null;return a};d.$4=function(){this.$5(),this.props.onDismiss(),this.props.logEvent("up_next_overlay_cancel")};d.$1=function(a){this.$5();if(a&&!this.props.shouldAutoChain)return;var c=b("Tahoe").get();c&&c.setPlayReason(a?"autoplay_initiated":"user_initiated");c=this.props.permalink;c&&(j||(j=b("URI"))).go(c);a?this.props.logEvent("up_next_overlay_redirect_on_countdown_finished"):this.props.logEvent("up_next_overlay_redirect_on_click")};d.$5=function(){this.setState({shown:!1})};d.$2=function(){var a=this.props,c=a.isOwnerBlueVerified;a=a.isOwnerGrayVerified;return!c&&!a?null:k.jsx("span",{className:"_3h80",children:c?k.jsx(b("Badge.react"),{size:"small",type:"verified"}):k.jsx(b("Badge.react"),{size:"small",type:"page_gray_check"})})};return c}(k.Component);e.exports=a}),null);
__d("TahoeUpNextLiveOverlay.react",["fbt","LiveTahoeInStreamChainingTypedLogger","React","TahoeUpNextOverlay.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){new(b("LiveTahoeInStreamChainingTypedLogger"))().setEvent(a).setCurrentVideoID(d.props.currentVideoID).setNextVideoID(d.props.upNextOverlayVideoData.id).setNextVideoIsLive(!!d.props.upNextOverlayVideoData.isLive).log()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return!this.props.isShown?null:h.jsx("div",{onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,children:h.jsx(b("TahoeUpNextOverlay.react"),babelHelpers["extends"]({},this.props.upNextOverlayVideoData,{countdownTimeoutSec:30,dismissString:g._("Close"),shouldAutoChain:!0,makeProgress:!1,onDismiss:function(){},logEvent:this.$1}))})};return c}(h.Component);e.exports=a}),null);
__d("XTahoeVideoDataAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/tahoe/video_data/",{current_video_id:{type:"FBID"},video_ids:{type:"FBIDSet",required:!0}})}),null);
__d("TahoeUpNextLiveOverlayController",["AsyncRequest","DeferredComponent.react","EventListener","React","ReactDOM","XTahoeVideoDataAsyncController","cancelAnimationFrame","nullthrows","requestAnimationFrame","setTimeout"],(function(a,b,c,d,e,f){var g=b("React");a=function(){function a(a,b,c,d){this.$6=a,this.$2=null,this.$3=!1,this.$1=c,this.$7=d,this.$8=b,this.$4=!1}var c=a.prototype;c.cleanup=function(){this.$2&&this.$2(),this.$9&&this.$9.remove(),this.$10&&this.$10.remove(),this.$11&&this.$11.remove()};c.setup=function(){var a=this;new(b("AsyncRequest"))(b("XTahoeVideoDataAsyncController").getURIBuilder().setFBIDSet("video_ids",this.$7).setFBID("current_video_id",this.$1).getURI()).setHandler(function(c){var d=(c=c)!=null?(c=c.payload)!=null?c.videosData:c:c;d&&d.length>0&&(a.$9=b("EventListener").listen(a.$8,"mouseenter",function(){a.$4=!0,a.render(d[0])}),a.$11=b("EventListener").listen(a.$8,"mousemove",function(){!a.$4&&a.$11&&(a.$11.remove(),a.$11=null,a.$4=!0,a.render(d[0]))}),a.$2=function(){if(a.$3)return;a.$4=!1;a.render(d[0],!0)},a.$10=b("EventListener").listen(a.$8,"mouseleave",function(){b("setTimeout")(b("nullthrows")(a.$2),10)}))}).send()};c.getCurrentVideoID=function(){return this.$1};c.render=function(a,c){c===void 0&&(c=!1),b("cancelAnimationFrame")(this.$5),this.$5=b("requestAnimationFrame")(this.renderReactComponent.bind(this,a,c))};c.renderReactComponent=function(a,c){var e=this;b("ReactDOM").render(g.jsx(b("DeferredComponent.react"),{deferredPlaceholder:g.jsx("span",{}),deferredComponent:function(a){return d(["TahoeUpNextLiveOverlay.react"],a)},currentVideoID:this.$1,isShown:!c,upNextOverlayVideoData:a,onMouseEnter:function(){e.$3=!0},onMouseLeave:function(){e.$3=!1}}),this.$6)};return a}();e.exports=a}),null);
__d("TahoeUpNextViewportTracking",["csx","StreamViewportTracking"],(function(a,b,c,d,e,f,g){"use strict";f.setup=a;var h="tahoe_up_next_videos",i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getTimetrackingDataToLog=function(a){a=b.prototype.getTimetrackingDataToLog.call(this,a);a.ft.tracking_source=h;return a};return a}(b("StreamViewportTracking"));function a(a,c,d){c=new i(b("StreamViewportTracking").getBehavior(a,c,"._bne",d));c.init(a);return c}}),null);
__d("XVideoHomeFeedController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/watch/",{extid:{type:"String"},comment_id:{type:"FBID"},cursor:{type:"String"},ref:{type:"String"},t:{type:"Int"},v:{type:"String"},external_log_id:{type:"String"},q:{type:"String"},__ft__:{type:"String"},page_id:{type:"FBID"}})}),null);
__d("TahoeWatchLogo.react",["fbt","Image.react","Link.react","React","TetraText.react","URI","VideoHomeTypedLoggerLite","XVideoHomeFeedController","stylex"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i,j=b("React"),k=b("VideoHomeTypedLoggerLite").log;(h||(h=b("stylex"))).inject(".i85zmo3j{align-items:center}",1);h.inject(".alzwoclg{display:flex}",1);h.inject(".rq8durfe{font-size:1.25rem}",1);h.inject(".igjjae4c{font-weight:bold}",1);h.inject(".dwcz42gf{line-height:24}",1);h.inject(".evpwb5b3{padding-right:10px}",1);h.inject(".d1pn00lf{margin-left:12px}",1);h.inject(".a6fdb1jh{margin-right:12px}",1);h.inject(".alzwoclg{display:flex}",1);h.inject(".juxnsli8{margin-left:10px}",1);h.inject(".fcysig3v{margin-right:8px}",1);h.inject(".l3ldwz01:hover{text-decoration:none}",7.1);function a(a){var c=a.paddingBottom,d=a.paddingTop;a=a.clickable;a=a===void 0?!1:a;var e=j.jsxs(j.Fragment,{children:[j.jsx("div",{className:"fcysig3v juxnsli8 alzwoclg",children:j.jsx(b("Image.react"),{src:"/images/litestand/bookmarks/sidebar/icons/mobile/icon-watch-tv.png"})}),j.jsx(b("TetraText.react"),{type:"headlineEmphasized2",children:g._("Watch")})]}),f=j.useCallback(function(){k({event:"click",click_target:"tahoe_watch_logo"}),(i||(i=b("URI"))).go(b("XVideoHomeFeedController").getURIBuilder().getURI(),!0)},[]);return a?j.jsx(b("Link.react"),{className:"a6fdb1jh d1pn00lf evpwb5b3 dwcz42gf igjjae4c rq8durfe alzwoclg i85zmo3j l3ldwz01",style:{paddingBottom:c,paddingTop:d},onClick:f,children:e}):j.jsx("div",{className:"a6fdb1jh d1pn00lf evpwb5b3 dwcz42gf igjjae4c rq8durfe alzwoclg i85zmo3j",style:{paddingBottom:c,paddingTop:d},children:e})}}),null);
__d("TahoeUpNextWatchEntryPoint.react",["cx","fbt","React","TahoeWatchLogo.react","TetraButton.react","VideoHomeTypedLoggerLite","XVideoHomeFeedController","useFullViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React"),j=b("VideoHomeTypedLoggerLite").log;function a(a){a.sidepaneElement;a=i.useCallback(function(a){a.currentTime,j({event:"tahoe_up_next_video_watch_entry_point_impression"})},[]);a=b("useFullViewImpression")({onFullViewStart:a});var c=i.useCallback(function(){j({event:"click",click_target:"tahoe_up_next_video_watch_entry_point"})},[]);return i.jsxs("div",{className:"_8c-h",ref:a,children:[i.jsx("div",{className:"_8c-i",children:h._("More Videos on Watch")}),i.jsx(b("TahoeWatchLogo.react"),{paddingBottom:6,paddingTop:6}),i.jsx(b("TetraButton.react"),{label:h._("Visit Watch"),onPress:c,linkProps:{url:b("XVideoHomeFeedController").getURIBuilder().getURI().toString()},size:"medium"})]})}}),null);
__d("VideoInfoBottomPaneShimmer.react",["cx","ImageBlock.react","InlineBlock.react","LeftRight.react","React","joinClasses"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsxs("div",{className:"_2ve3 _2ve4",children:[h.jsxs("div",{children:[h.jsxs(b("LeftRight.react"),{children:[h.jsx(i,{width:320}),h.jsxs("span",{children:[h.jsx(k,{}),h.jsx(k,{}),h.jsx(k,{})]})]}),h.jsx(i,{width:222}),h.jsx("div",{className:"_2vev",children:h.jsxs(b("ImageBlock.react"),{children:[h.jsx("span",{className:"_2vew"}),h.jsx(b("InlineBlock.react"),{alignv:"middle",height:36,fullWidth:!0,children:h.jsx(l,{width:90,height:16})})]})})]}),h.jsxs("div",{className:"_2vex",children:[h.jsx(j,{width:132}),h.jsx(j,{width:780}),h.jsx(j,{width:460})]})]})};return c}(h.Component);e.exports=a;var i=function(a){return h.jsx(l,{width:a.width,height:16,className:"_2vey"})},j=function(a){return h.jsx(l,{className:"_2vez",height:8,width:a.width})},k=function(){return h.jsx(l,{width:60,height:16,display:"inline-block",className:"_2ve-"})},l=function(a){var c=b("joinClasses")(a.className,"_2ve_");return h.jsx("div",{className:c,style:{width:a.width,height:a.height,display:a.display}})};l.defaultProps={display:"block"}}),null);
__d("VodPncSeeAllReactionsClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744489");c=b("FalcoLoggerInternal").create("vod_pnc_see_all_reactions_click",a);e.exports=c}),null);
__d("XTahoeAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/tahoe/async/{id}/",{id:{type:"FBID",required:!0},externallogid:{type:"String"},sponsoreddata:{type:"String"},originalmediaid:{type:"String"},preload:{type:"Bool",defaultValue:!1},playerorigin:{type:"Enum",enumType:1},playersuborigin:{type:"String"},videolistid:{type:"String"},reactionvideochanneltype:{type:"Enum",enumType:1},reactionvideochannelsubtype:{type:"String"},upstreamplayersource:{type:"Enum",enumType:1},ispermalink:{type:"Bool",defaultValue:!1},feedtracking:{type:"StringVector",defaultValue:[]},storyidentifier:{type:"String"},numcopyrightmatchedvideoplayedconsecutively:{type:"Int"},comment_id:{type:"Int"},reply_comment_id:{type:"Int"},payloadtype:{type:"Enum",enumType:1},tahoeviewhasrendered:{type:"Bool",defaultValue:!1},privacy_mutation_token:{type:"String"}})}),null);
__d("XTahoeUpNextAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/tahoe/upnext/async/{media_id}/",{channel_id:{type:"String"},media_id:{type:"FBID",required:!0},viewed_videos:{type:"FBIDSet"},caller:{type:"Enum",enumType:1},chainingindex:{type:"Int"},cursor:{type:"String"},search_keywords:{type:"String"},ispermalink:{type:"Bool",defaultValue:!1}})}),null);
__d("upNextVideoStateActionTypes",[],(function(a,b,c,d,e,f){"use strict";a="APPEND_TO_BUFFER";f.APPEND_TO_BUFFER=a;b="REMOVE_BUFFER_HEADS";f.REMOVE_BUFFER_HEADS=b;c="RETRIEVE_FROM_BUFFER";f.RETRIEVE_FROM_BUFFER=c;d="SET_CHAINING_CURSOR";f.SET_CHAINING_CURSOR=d}),null);
__d("upNextVideoStateReducer",["TahoeConstants","upNextVideoStateActionTypes"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g={upNextVideoBuffer:[],retrievedUnits:[],chainingCursor:null},h=b("TahoeConstants").UP_NEXT_UNIT_ID_PREFIX,i=20;function a(a,c){a===void 0&&(a=g);switch(c.type){case b("upNextVideoStateActionTypes").APPEND_TO_BUFFER:var d=c.payload;if(Array.isArray(d))return{upNextVideoBuffer:a.upNextVideoBuffer.concat(d),retrievedUnits:a.retrievedUnits,chainingCursor:a.chainingCursor};else return a;case b("upNextVideoStateActionTypes").REMOVE_BUFFER_HEADS:d=c.payload;if(typeof d==="string"){d=h+d;while(a.upNextVideoBuffer.length>0&&a.upNextVideoBuffer[0].id!==d)a.upNextVideoBuffer.shift();a.upNextVideoBuffer.length>0&&a.upNextVideoBuffer.shift();return{upNextVideoBuffer:a.upNextVideoBuffer,retrievedUnits:a.retrievedUnits,chainingCursor:a.chainingCursor}}else return a;case b("upNextVideoStateActionTypes").RETRIEVE_FROM_BUFFER:d=c.payload;if(typeof d==="number"){var e=Math.min(i,a.upNextVideoBuffer.length);d=a.upNextVideoBuffer.slice(d,e);return{upNextVideoBuffer:a.upNextVideoBuffer,retrievedUnits:d,chainingCursor:a.chainingCursor}}else return a;case b("upNextVideoStateActionTypes").SET_CHAINING_CURSOR:if(typeof c.payload==="string")return{upNextVideoBuffer:a.upNextVideoBuffer,retrievedUnits:a.retrievedUnits,chainingCursor:c.payload};else return a;default:return a}}}),null);
__d("upNextVideoStateStore",["redux","upNextVideoStateReducer"],(function(a,b,c,d,e,f){"use strict";a=b("redux").createStore(b("upNextVideoStateReducer"));c=a;e.exports=c}),null);
__d("TahoeVideoView",["csx","cx","ActorURI","Arbiter","AsyncRequest","Bootloader","CSS","CurrentUser","DOM","DOMQuery","Event","HTML","Keys","LiveVideoInteractiveAlertSidePaneView.react","React","ReactDOM","ReactRenderer","Run","StreamingReactionsTrayEvents","SubscriptionsHandler","TabBar","Tahoe","TahoeConstants","TahoeCopyrightMessage.react","TahoeMainPlayerViewportTracking","TahoeSidePanePlaceholder.react","TahoeUpNextLiveOverlayController","TahoeUpNextViewportTracking","TahoeUpNextWatchEntryPoint.react","TahoeV2Config","TahoeVideoStore","TimeSlice","UFICentralUpdates","UFISharedDispatcher","URI","VideoInfoBottomPaneShimmer.react","VideoPermalinkURI","VideoTipJarTypedLogger","VodPncSeeAllReactionsClickFalcoEvent","XTahoeAsyncController","XTahoeUpNextAsyncController","ge","gkx","nullthrows","qex","upNextVideoStateStore","uuid"],(function(a,b,c,d,e,f,g,h){var i,j=b("React"),k=4,l=b("TahoeV2Config").maximizeEndScreenVideoCount?16:9,m=/^[1-9]\d*$/,n=15,o="tahoe-preloaded-video",p=7,q="video-up-next-",r="video-up-next-wp-",s=4,t=97,u=7;a=function(){function a(a,c,d,e){var f=this;this.$8=null;this.$21=!1;this.$41=function(){f.$47()};this.$39=function(){b("CSS").hide(f.$20),f.$7.setFullWidth(!0),f.$47()};this.$40=function(){b("CSS").show(f.$20),f.$7.setFullWidth(!1),f.$27&&f.$27.setup()};this.$78=function(){f.$11!=null&&b("CSS").hide(f.$11)};this.$7=a;this.$9=!1;this.$16=this.$7.getID();this.$33=c;this.$34=d;this.$32=this.$7.getVideoListID();this.$35=new Set([this.$16]);this.$4=b("uuid")();this.$29=!1;this.$30=[];this.$28=null;this.$7.addEvent(b("Event").listen(document,"keydown",this.$37.bind(this)));this.$24=(c=b("CSS")).setClass((d=b("DOM")).create("div"),"_1e8c _2b-0");this.$20=c.setClass(d.create("div"),"_5-lm _3aw0 _6j1g _6j1h");this.$6=c.setClass(d.create("div"),"_17am");this.$12=c.setClass(d.create("div"),"_76-1");this.$17=c.setClass(d.create("div"),"hidden_elem");this.$18=b("TahoeConstants").DEFAULT_BROWSER_TITLE;this.$22=d.create("div");b("ReactDOM").render(j.jsx(b("TahoeSidePanePlaceholder.react"),{}),this.$20);b("gkx")("732464")&&b("ReactDOM").render(j.jsx(b("LiveVideoInteractiveAlertSidePaneView.react"),{videoID:a.getID()}),this.$12);b("TahoeV2Config").showTahoe2UI&&(this.$25=b("CSS").setClass(b("DOM").create("div"),"_437j"),b("CSS").hide(this.$24),b("DOM").appendContent(this.$7.getContent(),this.$25),b("ReactDOM").render([j.jsx(b("VideoInfoBottomPaneShimmer.react"),{},"shimmer"),j.jsx("div",{className:"_3l-q"},"inner")],this.$25));this.$24&&b("DOM").appendContent(this.$7.getContent(),this.$24);b("DOM").appendContent(this.$7.getSideContent(),this.$20);b("DOM").appendContent(this.$20,this.$6);b("DOM").appendContent(this.$20,this.$12);b("DOM").appendContent(this.$7.getContent(),this.$17);b("DOM").appendContent(this.$7.getContent(),this.$22);c=this.$7.getChannelID();d=this.$7.getCaller();this.$7.getMediaController()?(this.$38(this.$7.getID(),!1,c,d,null,e),this.setUpEndScreen(),this.setUpUFI(),this.setCopyrightMessage()):this.updateView(this.$7.getID(),c,d,null,e,!0);this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("Arbiter").subscribe("UFIAddComment/focus",function(a,c){a=b("TahoeVideoStore").getState().toObject();a=a.ufiInstanceID;a===c.instanceid&&f.selectCommentTab()}),b("Arbiter").subscribe("quiet-mode-on",this.$39),b("Arbiter").subscribe("quiet-mode-off",this.$40),b("Arbiter").subscribe("watch-and-scroll-on",this.$41),b("Arbiter").subscribe("quick-comments-visible-changed",function(a,b){return f.$42(b)}),b("UFICentralUpdates").subscribe("actor-changed",function(a,c){return f.$43(c.actorID===b("CurrentUser").getAccountID())}));b("UFISharedDispatcher").register(function(a){a.type==="story_show_comments"&&f.selectCommentTab()});this.$44();b("Run").onCleanupOrLeave(this.$7.getContent(),this.$45);b("Run").onUnload(this.$45)}var c=a.prototype;c.$45=function(){window.history.replaceState(window.history.state,"",new(i||(i=b("URI")))(location.href).addQueryData({redirect:!1}).toString())};c.$44=function(){window.history.replaceState(window.history.state,"",new(i||(i=b("URI")))(location.href).removeQueryData(["redirect"]).toString())};c.$42=function(a){var c=this.$46();if(c==null)return;a?b("CSS").addClass(c,"_4j8y"):b("CSS").removeClass(c,"_4j8y")};c.setUpUFI=function(){var a=this,b=this.$7.getMediaController();this.$48();b&&(this.$7.addEvent(b.addListener("commercialBreak/hideUFI",function(){return a.$49(!0)})),this.$7.addEvent(b.addListener("commercialBreak/showUFI",function(){return a.$49(!1)})))};c.$49=function(a){b("gkx")("678266")||b("CSS").conditionClass(this.$6,"_17an",a),this.$24&&b("CSS").conditionClass(this.$24,"_3qt9",a)};c.setCopyrightMessage=function(){if(this.$8)return;var a=this.$7.getMediaController();a=a;if(!a)return;var c=b("DOM").create("div",{className:"_6ukq"});this.$8=c;b("DOM").appendContent(this.$7.getMediaContent(),c);b("ReactDOM").render(j.jsx(b("TahoeCopyrightMessage.react"),{videoController:a}),c)};c.$50=function(){this.$8&&(b("ReactDOM").unmountComponentAtNode(this.$8),this.$8=null)};c.setUpEndScreen=function(){var a=this;this.$21=!1;var b=this.$7.getMediaController();this.$7.addEvent(b.addListener("stateChange",this.$51.bind(this)));if(b.isLiveVideo())return;this.$7.addEvent(b.addListener("toggleFullscreen",this.$51.bind(this)));var c=b;if(!c)return;c.addListener("updateStatus",function(b){var d=c.getPlaybackDuration();b=d-b.position;if(b>k){a.$28&&a.$52();return}b=c.getState();if(a.$28||b==="paused")return;a.$53(!1,!0,d>n,p)})};c.$53=function(a,c,d,e){var f=this;if(this.$28)return;var g=this.$7.getMediaController(),h=g;if(!h)return;var i=b("DOM").create("div",{className:"_4n-p"});g=b("upNextVideoStateStore").getState().upNextVideoBuffer;var j=this.$54(g);b("Bootloader").loadModules(["TahoeUpNextOverlayAndEndScreen.react"],function(g){b("ReactRenderer").constructAndRenderComponent(g,{currentVideoID:f.$7.getID(),videoIDs:b("TahoeV2Config").showMoreUpNext?j:f.$30.slice(0,l),shouldShowUpNextOverlay:d&&!f.$21,countdownTimeoutSec:e,vpc:h,logEvent:function(a){f.$7.logEvent(a)},tahoeController:f.$7,hasCustomBackgroundForUpNextOverlay:a,isCurrentVideoReplayable:c,livingRoomID:f.$14,viewportTrackingConfig:f.$36},i,function(){f.$21=!0})},"TahoeVideoView");g=h.getRootNode();g=g&&g.firstChild;g&&(g.appendChild(i),this.$28=i,this.$47())};c.$51=function(){var a=this.$7.getMediaController();a=a;!a.isLiveVideo()?this.$24&&b("CSS").conditionClass(this.$24,"_65dt",a.isState("finished")):a.isState("finished")&&!a.isGaming()&&this.$53(!0,!1,!0,p)};c.$52=function(){var a=this.$28;a&&(b("ReactDOM").unmountComponentAtNode(a),b("DOM").remove(a),this.$28=null)};c.$55=function(){b("CSS").addClass(this.$7.getContent(),"_29du"),b("CSS").addClass(this.$20,"_4f4w"),this.$25&&b("CSS").addClass(this.$25,"_1udj"),this.$24&&b("DOM").empty(this.$24)};c.$56=function(){var a=this;b("CSS").removeClass(this.$7.getContent(),"_29du");b("CSS").removeClass(this.$20,"_4f4w");this.$25&&b("CSS").removeClass(this.$25,"_1udj");var c=b("DOMQuery").find(this.$20,"._3dj6"),d=this.$36;d&&(this.$31=b("TahoeUpNextViewportTracking").setup(d,c,t),this.$26=b("TahoeUpNextViewportTracking").setup(d,c,s));if(this.$29){c=b("CSS").removeClass(c,"_3dj6");d=b("DOM").find(this.$17,"._3dj7");b("DOM").setContent(c,d);var e=b("DOMQuery").scry(this.$20,"._8fyn");if(e.length>0&&this.$30.length>=u){e=b("DOM").create("div",{className:"_8fym"});b("ReactDOM").render(j.jsx(b("TahoeUpNextWatchEntryPoint.react"),{sidepaneElement:this.$46()}),e);b("DOM").appendContent(c,e)}this.$29=!1;!this.$2&&d.childNodes&&d.childNodes[0]&&this.$57(d.childNodes[0],function(){b("TimeSlice").guard(a.$58.bind(a),"Tahoe preload next video",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()},function(){return a.selectCommentTab()})}b("TahoeV2Config").showTahoe2UI&&this.$7.resizeMedia()};c.$37=function(a){a.keyCode===b("Keys").ESC&&!a.cancelBubble&&!a.defaultPrevented&&!this.$7.getIsPermalink()&&(this.$7.logEvent("exit_with_esc"),this.$7.onExit())};c.$59=function(a,c){b("TahoeV2Config").showTahoe2UI&&(a&&this.$60(),c&&this.$61())};c.$62=function(c,d,e,f){if(!b("TahoeV2Config").showMoreUpNext){c=this.$63(c,e,f);c&&c.send()}e=b("DOMQuery").scry(this.$7.getContent(),"._1c_u");e[0]&&b("DOM").replace(e[0],b("DOMQuery").scry(d,"._5-yb")[0]);f=b("DOMQuery").scry(d,"._1w6j");c=b("DOMQuery").scry(d,"._3l-q");this.$59(f[0],c[0]);this.$24&&f[0]&&b("DOM").setContent(this.$24,f[0]);this.$25&&c[0]&&b("DOM").setContent(this.$25,c[0]);e=this.$46();e?b("DOM").replace(e,b("DOMQuery").find(d,"._1rgu")):b("DOM").appendContent(this.$20,b("DOMQuery").find(d,"._1rgu"));document.title=this.$18;a.registerPendingController(this.$19);this.$56();f=b("Tahoe").get();f&&f.emit("insertPreloadedElements")};c.$38=function(a,c,d,e,f,g,h){g===void 0&&(g=null);h===void 0&&(h=!1);this.$3=null;f=this.$64(a,c,f,h);g&&(g.commentID!=="0"&&f.setInt("comment_id",g.commentID),g.replyCommentID!=="0"&&f.setInt("reply_comment_id",g.replyCommentID));h=this.$7.getStoryIdentifier();h&&f.setString("storyidentifier",h);c&&this.$65(this.$66(f.setEnum("payloadtype","primary")));this.$67(this.$66(f.setEnum("payloadtype","secondary")),c);if(!b("TahoeV2Config").showMoreUpNext){g=this.$63(a,d,e);g&&g.send()}this.$55()};c.$68=function(a){a.disablePreload&&(this.$10=!0);a.viewportTrackingConfig&&(this.$36=a.viewportTrackingConfig);this.$9=!!a.hasNearlyCompleteLicensedMusicTag;document.title=a.videoTitle||b("TahoeConstants").DEFAULT_BROWSER_TITLE;a=this.$7.getContent();var c=this.$36;if(a&&c){var d=b("DOMQuery").scry(a,"._5-yb")[0];d&&(this.$15=b("TahoeMainPlayerViewportTracking").setup(c,a,t))}this.$56()};c.$69=function(a,c,d){d===void 0&&(d=null);if(!a)return;var e=b("DOMQuery").scry(this.$7.getContent(),"._1c_u");e[0]&&(b("DOM").replace(e[0],a),this.$70(this.$7.getContent(),d));this.$7.setAutoplayAllowed(c)};c.$71=function(a,c,d,e){if(e){d&&b("DOM").setContent(this.$24,d);if(a){e=this.$46();e?b("DOM").replace(e,a):b("DOM").appendContent(this.$20,a)}}else d&&b("DOM").appendContent(this.$24,d),a&&b("DOM").appendContent(this.$20,a);c&&b("DOM").replace(this.$25.lastChild,c)};c.$46=function(){return b("DOMQuery").scry(this.$20,"._1rgu")[0]};c.$64=function(a,c,d,e){e===void 0&&(e=!1);var f=[JSON.stringify(this.$7.getFeedTracking())];e=e&&f!=null||!c?f:this.$72(a);return b("XTahoeAsyncController").getURIBuilder().setFBID("id",a).setString("originalmediaid",this.$16).setEnum("playerorigin",this.$33).setString("playersuborigin",this.$34).setString("videolistid",this.$32).setString("sponsoreddata",d).setString("externallogid",this.$7.getExternalLogID()).setEnum("reactionvideochanneltype",this.$7.getReactionVideoChannelType()).setString("reactionvideochannelsubtype",this.$7.getReactionVideoChannelSubtype()).setEnum("upstreamplayersource",this.$7.getUpstreamPlayerSource()).setBool("ispermalink",this.$7.getIsPermalink()).setStringVector("feedtracking",e).setInt("numcopyrightmatchedvideoplayedconsecutively",this.$7.getNumCopyrightMatchedVideosPlayedConsecutively())};c.$66=function(a){var c=this.$7.getUserID();if(c)return b("ActorURI").create(a.getURI(),c);else return a.getURI()};c.$60=function(){b("CSS").show(this.$24),b("CSS").hide(this.$25),b("CSS").removeClass(this.$7.getContent(),"_-pb")};c.$61=function(){b("CSS").show(this.$25),b("CSS").hide(this.$24),b("CSS").addClass(this.$7.getContent(),"_-pb")};c.$57=function(a,c,d){a=b("DOMQuery").scry(a,"a")[0];a?(this.$3=a.getAttribute("href"),c&&c()):d&&d()};c.setUpNextChainingInfoFromReactElement=function(a){var c=this;this.$57(a,function(){b("TimeSlice").guard(c.$58.bind(c),"Tahoe preload next video",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()},function(){return c.selectCommentTab()})};c.$63=function(a,c,d){var e=this,f=b("ge")(q+a);if(f){var g=f.parentNode,h=Array.from(g.children);h.some(function(c){if(c.id!==q+a){b("DOM").remove(c);return!1}else return!0});b("DOM").remove(g.firstChild);b("DOM").appendContent(this.$17,g);if(g.children.length>=10){this.$73(Array.from(g.children));this.$29=!0;return null}}else!f&&a!==this.$16&&(this.$7.resetChannelData(),this.$5=null,c=null,d=null);h=b("XTahoeUpNextAsyncController").getURIBuilder().setFBID("media_id",a).setFBIDSet("viewed_videos",Array.from(this.$35)).setString("channel_id",c).setEnum("caller",d).setString("cursor",this.$5).setString("search_keywords",this.$7.getSearchKeywordsForVideoChaining()).setBool("ispermalink",this.$7.getIsPermalink());g=new(b("AsyncRequest"))(h.getURI()).setHandler(function(a){a=a.getPayload();e.$5=a.chainingCursor;a.viewportTrackingConfig&&(e.$36=a.viewportTrackingConfig);a=b("HTML").replaceJSONWrapper(a.upNextUnit.markup);e.$29=!0;var c=b("DOMQuery").scry(e.$20,"._3dj6"),d=b("DOMQuery").scry(e.$17,"._3dj7");if(d[0]){b("DOM").appendContent(e.$17,a);d=b("DOMQuery").scry(e.$17,"._3dj7");var f=Array.from(d[1].children);f.forEach(function(a){b("DOM").appendContent(d[0],a)});b("DOM").remove(d[1]);a=d[0];var g={};Array.from(a.children).forEach(function(a){g[a.id]?b("DOM").remove(a):g[a.id]=!0});b("DOM").remove(d[0])}f=null;if(c[0]){c=b("CSS").removeClass(c[0],"_3dj6");b("DOM").setContent(c,a);var h=b("DOMQuery").scry(e.$20,"._8fyn"),i=b("DOMQuery").scry(e.$20,"._bne");if(h.length>0&&i.length>u){h=b("DOM").create("div",{className:"_8fym"});b("ReactDOM").render(j.jsx(b("TahoeUpNextWatchEntryPoint.react"),{sidepaneElement:e.$46()}),h);b("DOM").appendContent(c,h)}e.$29=!1;f=c}else b("DOM").appendContent(e.$17,a),f=e.$17;d=b("DOMQuery").scry(f,"._3dj7");d[0]&&e.$73(Array.from(d[0].children));i=b("DOMQuery").scry(e.$20,"._bne");!e.$2&&i.childNodes&&i.childNodes[0]&&e.$57(i.childNodes[0],function(){b("TimeSlice").guard(e.$58.bind(e),"Tahoe preload next video",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()},function(){return e.selectCommentTab()})});return g};c.$65=function(a){var c=this;new(b("AsyncRequest"))(a).setHandler(function(a){a=a.getPayload();var d=a.video,e=a.autoplayAllowed;a=a.trackingData;c.$69(b("HTML").replaceJSONWrapper(d&&d.markup),e,a)}).send()};c.$67=function(a,c){var d=this;new(b("AsyncRequest"))(a).setHandler(function(a){a=a.getPayload();var e=a.ufiTray,f=a.infoBottomPane,g=a.sidePane;d.$59(e,f);d.$71(b("HTML").replaceJSONWrapper(g&&g.markup),b("HTML").replaceJSONWrapper(f&&f.markup),b("HTML").replaceJSONWrapper(e&&e.markup),c);d.$68(a)}).send()};c.$54=function(a){var b=this;return a.map(function(a){return a.id&&a.id.substring(q.length)}).filter(function(a){return b.$74(a)})};c.$75=function(a){a=a.id&&a.id.substring(r.length);return this.$74(a)?a:null};c.$74=function(a){return!a?!1:m.test(a)};c.$47=function(){this.$27&&this.$27.cleanup()};c.$48=function(){var a=this.$7.getMediaController();if(a==null||!a.isLiveVideo())return;var c=this.$7.getID(),d=b("DOMQuery").scry(this.$7.getContent(),"._170l");if(!d.length)return;this.$13&&b("DOM").remove(this.$13);if(!this.$30||this.$30.length===0)return;if(!b("qex")._("1138569"))return;(!this.$27||this.$27.getCurrentVideoID()!==c)&&(this.$47(),this.$13=b("DOM").create("div",{className:"_8k_t"}),b("DOM").insertAfter(d[0],this.$13),this.$27=new(b("TahoeUpNextLiveOverlayController"))(b("nullthrows")(this.$13),a.getRootNode(),c,this.$30.slice(0,l)),this.$27.setup())};c.$73=function(a){this.$30=this.$54(a),this.$48(),this.$30.length<a.length&&(this.$14=this.$75(a[0]),this.$2=!0)};c.getCurrentVideoHasCopyrightMusicMatch=function(){return this.$9};c.setUpNextVideoIDs=function(a){this.$30=this.$54(a)};c.getUpNextVideoIDs=function(){return this.$30};c.$58=function(){var a=this;if(this.$10)return;var c=new(i||(i=b("URI")))(this.$3),d=b("VideoPermalinkURI").parse(c);if(d===null)return;var e=d.video_id;if(!e)return;d=c.getQueryData().sp;c=this.$64(e,!0,d).setEnum("payloadtype","all").setBool("preload",!0);d=new(b("AsyncRequest"))(c.getURI()).setHandler(function(c){c=c.getPayload();var d=b("DOM").create("div",{id:"preload-"+e,"class":o});b("DOM").appendContent(d,b("HTML").replaceJSONWrapper(c.video.markup));c.ufiTray&&b("DOM").appendContent(d,b("HTML").replaceJSONWrapper(c.ufiTray.markup));c.infoBottomPane&&b("DOM").appendContent(d,b("HTML").replaceJSONWrapper(c.infoBottomPane.markup));b("DOM").appendContent(d,b("HTML").replaceJSONWrapper(c.sidePane.markup));b("DOM").appendContent(a.$17,d);a.$70(d,c.trackingData);d=typeof c.autoplayAllowed==="boolean"?c.autoplayAllowed:!0;a.$18=c.videoTitle||b("TahoeConstants").DEFAULT_BROWSER_TITLE;a.$7.setAutoplayAllowed(d);a.$9=!!c.hasNearlyCompleteLicensedMusicTag});d.send()};c.$72=function(a){var c=null;a=b("ge")(q+a);a&&a.getAttribute("data-ft")&&(c=['{"ft":'+a.getAttribute("data-ft")+"}"]);return c};c.selectAddComment=function(){var a=b("DOMQuery").scry(this.$20,".UFIAddCommentInput");a[0]&&a[0].click();this.selectCommentTab()};c.selectCommentTab=function(){var a=this.$46();a&&(b("CSS").addClass(a,"_7r9y"),b("CSS").removeClass(a,"_601i"),b("CSS").removeClass(a,"_6yny"),b("Arbiter").inform("TahoeView/selectCommentTab"))};c.selectUpNextTab=function(){var a=this.$46();a&&(b("CSS").addClass(a,"_601i"),b("CSS").removeClass(a,"_7r9y"),b("CSS").removeClass(a,"_6yny"))};c.selectFriendPresenceTab=function(){var a=this.$46();a&&(b("CSS").addClass(a,"_6yny"),b("CSS").removeClass(a,"_601i"))};c.setCommentOverlayActive=function(a){var c=this.$46();if(!c)return;a?b("CSS").addClass(c,"_2l-1"):b("CSS").removeClass(c,"_2l-1")};c.updateView=function(a,c,d,e,f,g){e===void 0&&(e=null);f===void 0&&(f=null);g===void 0&&(g=!1);this.$52();this.$35.add(a);var h=b("DOMQuery").scry(this.$17,"#preload-"+a);h[0]&&this.$19?(this.$62(a,h[0],c,d),this.$76()):(this.$76(),this.$31&&this.$31.cleanup(),this.$26&&this.$26.cleanup(),this.$15&&this.$15.cleanup(),this.$38(a,!0,c,d,e,f,g));this.$49(!1)};c.$76=function(){this.$19=null;var a=b("DOMQuery").scry(this.$17,"."+o);Array.from(a).forEach(function(a){b("DOM").remove(a)})};c.toggleNativeSupportFlyout=function(){var a=b("DOMQuery").scry(this.$20,".UFICommentSupportButton");a.length>0&&(a[0].dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),a[0].dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),a[0].click())};c.loadStickerGallery=function(a){var c=this;b("Bootloader").loadModules(["TahoeStickerGallery"],function(b){b.loadStickerGallery(c.$22,a)},"TahoeVideoView")};c.$77=function(a,c){var d=this;this.$11==null?(this.$11=b("DOM").create("div"),b("DOM").prependContent(this.$20,this.$11),b("Bootloader").loadModules(["TahoeWoodhengeSignupViewRenderer"],function(b){b.render(a,c,d.$11,d.$78)},"TahoeVideoView")):this.$11!=null&&b("CSS").show(this.$11)};c.$43=function(a){var c=this.$23;if(!c)return;a!==b("CSS").shown(c)&&b("CSS").toggle(c)};c.$70=function(a,c){a=b("DOMQuery").scry(a,"._1c_u");a.length>0&&c!=null&&a[0].setAttribute("data-ft",c)};c.getBottomTrayHeight=function(){return this.isRenderingBottomInfoPane()?this.$25&&this.$25.clientHeight:this.$24.clientHeight};c.isRenderingBottomInfoPane=function(){return!b("CSS").shown(this.$24)};c.getLiveAlertSidePaneOverlayNode=function(){return this.$12};c.onExit=function(){this.$1.release(),this.$47(),this.$52(),this.$50()};a.registerCommentLink=function(a){var c=b("Tahoe").get();c&&c.addEvent(b("Event").listen(a,"click",function(){b("Arbiter").inform(b("StreamingReactionsTrayEvents").EnableReactions),b("Arbiter").inform("quiet-mode-off"),c.getView().selectAddComment()}))};a.registerBecomeSupporterLink=function(c,d){var e=b("Tahoe").get();if(e==null)return;var f=e.getView();if(!(f instanceof a))return;var g=e.getMediaController().getMediaID();e.addEvent(b("Event").listen(c,"click",function(){f.$77(d,g)}))};a.registerPendingController=function(a){var c=b("Tahoe").get();c&&a&&(c.updateMedia(a),c.emit("TahoeController/mediaControllerRegistered"))};a.registerPreloadController=function(a){var c=b("Tahoe").get();c&&(c.getView().$19=a)};a.registerSidepaneTabbar=function(c){var d=b("Tahoe").get();if(d!=null){var e=d.getView();e instanceof a&&c.subscribe(b("TabBar").TAB_CLICK,function(a,b){switch(b){case"up-next":e.selectUpNextTab();break;case"comments":e.selectCommentTab()}})}};a.registerSupportLink=function(c){var d=b("Tahoe").get();if(d==null)return;var e=d.getView();if(!(e instanceof a))return;e.$23=c;d.addEvent(b("Event").listen(c,"click",function(){e.toggleNativeSupportFlyout(),new(b("VideoTipJarTypedLogger"))().setTipJarEvent("support_button_clicked").setVideoID(d.getMediaController().getMediaID()).log()}))};a.registerShowCommentsTabLink=function(a){var c=b("Tahoe").get(),d=c&&c.getView();c&&d&&c.addEvent(b("Event").listen(a,"click",function(){return d.selectCommentTab()}))};a.registerShowMainTabLink=function(a){var c=b("Tahoe").get(),d=c&&c.getView();c&&d&&c.addEvent(b("Event").listen(a,"click",function(){return d.selectUpNextTab()}))};a.registerShowFriendPresenceTabLink=function(a,c,d,e,f,g){var h=b("Tahoe").get(),i=h&&h.getView(),j=function(){i&&i.selectFriendPresenceTab(),b("VodPncSeeAllReactionsClickFalcoEvent").log(function(){return{video_id:c,number_of_friends:d,friend_presence_type_first:e,friend_presence_type_second:f,friend_presence_type_third:g}})};h&&i&&h.addEvent(b("Event").listen(a,"click",j))};a.loadView=function(b,c,d,e){return new a(b,c,d,e)};return a}();e.exports=a}),null);
__d("XTahoeReactionsTrayAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/tahoe/async/reactions/",{video_id:{type:"FBID",required:!0}})}),null);
__d("TahoeController",["cx","Arbiter","AsyncRequest","BlueBar","Bootloader","CSS","DialogX","Env","EventEmitter","FantaTabActions","LiveVideoStreamingReactionEligibleLocations","PageTransitions","ResizeListener","ScriptPath","Tahoe","TahoeActions","TahoeConstants","TahoeDispatcher","TahoeDOM","TahoeTypedLogger","TahoeV2Config","TahoeVideoResizingController","TahoeVideoView","URI","VideoAutoplayControllerX","VideoChannelCallerToPlayerOriginMap","VideoPermalinkURI","XTahoeReactionsTrayAsyncController","collectDataAttributes","ge","gkx","prevNextControlActions","prevNextControlStore","requireWeak","shouldWNSRenderToRHC","TahoeVideoStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b("requireWeak")("VideoProgressPreviewBar.react",function(a){j=a});var k;b("requireWeak")("VideoWatchAndScrollController",function(a){k=a});var l=48,m=0;a=1040;var n=a-b("TahoeConstants").SIDE_PANE_WIDTH,o=4,p=560,q=350;c=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.$TahoeController1=!1;d.$TahoeController3=!0;d.$TahoeController20=!1;d.$TahoeController21=!1;d.$TahoeController25="user_initiated";d.$TahoeController31=null;d.$TahoeController37=!1;d.$TahoeController39=0;d.$TahoeController52=function(){d.$TahoeController50()};b("TahoeDispatcher").explicitlyRegisterStores([b("TahoeVideoStore")]);d.$TahoeController12=[];d.$TahoeController20=c.isPermalink;d.$TahoeController23=0;d.$TahoeController36=c.storyIdentifier;d.$TahoeController40=p-b("TahoeConstants").BLUE_BAR_HEIGHT-d.$TahoeController43();d.$TahoeController31=c.userID;d.$TahoeController33=c.origin;d.$TahoeController34=c.suborigin;d.$TahoeController5=c.channelID;d.$TahoeController32=c.videoListID;d.$TahoeController4=c.caller;d.$TahoeController26=c.reactionVideoChannelType;d.$TahoeController27=c.reactionVideoChannelSubtype;d.$TahoeController30=c.upstreamPlayerSource;d.$TahoeController28=c.searchKeywordsForVideoChaining;d.$TahoeController11=c.externalLogID;d.$TahoeController41=c.feedLocation;d.$TahoeController42=!0;d.$TahoeController8=new(b("TahoeDOM"))(babelHelpers.assertThisInitialized(d));d.$TahoeController10=(h||(h=b("URI"))).getNextURI();d.$TahoeController24=d.$TahoeController44.bind(babelHelpers.assertThisInitialized(d));c.landingPage&&(d.$TahoeController38=new(h||(h=b("URI")))(c.landingPage));c.landingPageType&&(d.$TahoeController39=c.landingPageType);d.$TahoeController7=d.$TahoeController8.createDialog();if(c.mediaController)d.$TahoeController45(c.mediaController.video),d.$TahoeController14=d.$TahoeController22.getMediaID(),d.$TahoeController46(),d.$TahoeController8.setInitialMediaContent(d.getMediaContent());else{d.$TahoeController47();var e=b("VideoPermalinkURI").parse(c.uri);d.$TahoeController14=(e==null?void 0:e.video_id)||""}d.$TahoeController9=c.entryDocumentTitle;b("PageTransitions").registerHandler(d.$TahoeController24,o);!(i||(i=b("Env"))).isCQuick&&c.uri!==window.location&&b("PageTransitions").go(c.uri);b("FantaTabActions").minimizeAllTabs();b("Arbiter").inform("chat/option-changed",{name:"hide_buddylist",value:!0});d.$TahoeController13=c.feedTracking;d.$TahoeController35=b("TahoeVideoView").loadView(babelHelpers.assertThisInitialized(d),d.$TahoeController33,d.$TahoeController34,{commentID:c.uri.getQueryData().comment_id,replyCommentID:c.uri.getQueryData().reply_comment_id});return d}var d=c.prototype;d.go=function(a){b("PageTransitions").go(a)};d.onExit=function(a){this.$TahoeController1?this.$TahoeController48():a=="wns"?(this.logEvent("exit_with_wns_control"),b("PageTransitions").go(this.$TahoeController10)):b("PageTransitions").go(this.$TahoeController10);a=this.$TahoeController22;if(a.isVideo()){var c=a.getMediaID();b("Bootloader").loadModules(["CreateLivingRoomActionLinkStore","LivingRoomCreationSource"],function(a,b){a.activateLivingRoomCTAForVideo(c,b.FEED_CTA_ON_VIDEO_PRESS)},"TahoeController")}};d.getVideoPlayerOrigin=function(){return this.$TahoeController33};d.getReactionVideoChannelType=function(){return this.$TahoeController26};d.getReactionVideoChannelSubtype=function(){return this.$TahoeController27};d.getUpstreamPlayerSource=function(){return this.$TahoeController30};d.getSearchKeywordsForVideoChaining=function(){return this.$TahoeController28};d.getFeedTracking=function(){return this.$TahoeController13};d.getStoryIdentifier=function(){return this.$TahoeController36};d.getNumCopyrightMatchedVideosPlayedConsecutively=function(){return this.$TahoeController23};d.$TahoeController49=function(){var a=this.$TahoeController38?this.$TahoeController38:this.$TahoeController10;this.$TahoeController8.placeBackAffordance(a,this.$TahoeController20,this.$TahoeController22,this.$TahoeController39)};d.$TahoeController45=function(a){b("TahoeActions").setMediaController(a);this.$TahoeController22=a;a=a;var c=a.isBroadcast();c&&document.body&&b("CSS").addClass(document.body,"_3yn5");this.emit("TahoeController/mediaController",{videoController:a})};d.$TahoeController47=function(){this.$TahoeController49(),this.$TahoeController8.insertPlaceholderMedia(),this.$TahoeController50()};d.$TahoeController46=function(){this.$TahoeController49();var a=this.$TahoeController22,b=a.getRootNode();this.$TahoeController15=this.$TahoeController22;a=a.getSource();this.$TahoeController17=a?a:"inline";b&&(this.$TahoeController18=b.clientWidth);b&&(this.$TahoeController16=b.clientHeight);this.$TahoeController29=!0;b&&this.$TahoeController8.insertMedia(b)};d.setMediaState=function(){this.$TahoeController2=parseFloat(this.getMediaContent().getAttribute("data-original-aspect-ratio"));this.$TahoeController51();var a=this.$TahoeController22;a.updateSource("tahoe");b("VideoAutoplayControllerX").setShouldAutoplay(!1);this.$TahoeController19||a.unmute();this.$TahoeController6!=null&&a.setVolume(this.$TahoeController6);(this.$TahoeController3||this.$TahoeController25==="user_initiated")&&(a.play(this.$TahoeController25),this.$TahoeController19&&a.mute());this.setNumCopyrightMatchedVideosPlayedConsecutively();this.$TahoeController22.emit("TahoeController/enterTahoe");this.$TahoeController22.getRootNode().focus();j&&j.destroyComponentIfAvailable(this.$TahoeController22);this.$TahoeController50();this.$TahoeController12.push(b("ResizeListener").add(this.$TahoeController52))};d.setPlayReason=function(a){this.$TahoeController25=a};d.addEvent=function(a){this.$TahoeController12.push(a)};d.getMediaController=function(){return this.$TahoeController22};d.setNumCopyrightMatchedVideosPlayedConsecutively=function(){this.$TahoeController3&&this.$TahoeController25!=="user_initiated"&&this.$TahoeController35&&this.$TahoeController35.getCurrentVideoHasCopyrightMusicMatch()?this.$TahoeController23++:this.$TahoeController23=0};d.setFullWidth=function(a){this.$TahoeController37=a,this.$TahoeController50()};d.resizeMedia=function(){this.$TahoeController50()};d.$TahoeController51=function(){var a=this.$TahoeController15;if(!a)return;a=b("LiveVideoStreamingReactionEligibleLocations").locations.includes(a.getSource());if(a)return;var c=b("ge")("fbVideoStreamingReactionsTray");if(!c)return;var d=this.$TahoeController22;a=b("XTahoeReactionsTrayAsyncController").getURIBuilder().setFBID("video_id",d.getVideoID());var e=function(a){var e=a.payload;if(!e)return;b("Bootloader").loadModules(["StreamingReactionsTray"],function(a){new a(c,d,"tahoe",e.feedbackID,e.broadcastID,e.profilePicUri,e.actorProfilePics,!0,!0,!0)},"TahoeController")};new(b("AsyncRequest"))().setURI(a.getURI()).setAllowCrossPageTransition(!0).setMethod("GET").setReadOnly(!0).setHandler(e).send()};d.$TahoeController50=function(){if(this.$TahoeController21)return;var a=this.$TahoeController35;if(b("TahoeV2Config").showTahoe2UI&&!(a instanceof b("TahoeVideoView")&&!a.isRenderingBottomInfoPane())){a=b("TahoeVideoResizingController").getPlayerSize(window.innerWidth,window.innerHeight);var c=a.width;a=a.height;this.$TahoeController8.setMediaSizeForTahoeV2(c,a);this.$TahoeController22&&this.$TahoeController22.setDimensions(c,a)}else{c=this.$TahoeController37?window.innerWidth:window.innerWidth-b("TahoeConstants").SIDE_PANE_WIDTH;c=Math.max(c,n);a=window.innerHeight-this.$TahoeController43();b("BlueBar").hasFixedBlueBar()&&(a-=b("TahoeConstants").BLUE_BAR_HEIGHT);a=Math.max(a,this.$TahoeController40);this.$TahoeController8.setMediaContentSize(c+"px",a+"px");var d=this.$TahoeController22;d&&d.removeOffsetStylings();this.$TahoeController22&&this.$TahoeController22.setDimensions(c,a)}};d.$TahoeController44=function(a){var c;this.$TahoeController42?(c=this.$TahoeController10,this.$TahoeController42=!1):c=(h||(h=b("URI"))).getRequestURI();if(a.getPath()===this.$TahoeController10.getPath()&&a.getQueryData().ref!=="tahoe"&&!this.getIsPermalink())this.$TahoeController17==="watch_scroll"?(this.$TahoeController1=!0,b("shouldWNSRenderToRHC")()?this.$TahoeController22.emit("crossfadeWatchAndScroll"):this.$TahoeController22.emit("enterWatchAndScroll")):this.$TahoeController48();else if(!this.$TahoeController53(a)){this.$TahoeController48();return!1}else if((this.$TahoeController10.getPath()!=c.getPath()||c.getQueryData().ref==="tahoe")&&c.getPath()!=a.getPath())this.$TahoeController54(a);else if(c.getPath()===a.getPath()){c=this.$TahoeController22;c&&c.isState("fallback")&&this.$TahoeController54(a)}else this.getIsPermalink()&&this.$TahoeController54(a);b("PageTransitions").transitionComplete();return!0};d.$TahoeController53=function(a){return b("VideoPermalinkURI").isValid(a)};d.$TahoeController54=function(a){this.$TahoeController21=!0;var c=this.$TahoeController22;c.pause();this.$TahoeController8.returnFeedElement();var d=b("VideoPermalinkURI").parse(a),e=d.video_id;this.$TahoeController36=d.story_id;d=b("prevNextControlStore").getState().videoIdQueue;d.length!==0&&d[d.length-1]===e?b("prevNextControlStore").dispatch(b("prevNextControlActions").popID()):b("prevNextControlStore").dispatch(b("prevNextControlActions").addID(this.$TahoeController14));d=a.getQueryData().sp;c.emit("tahoeController/displayNewMedia");this.$TahoeController35.updateView(e,this.$TahoeController5,this.$TahoeController4,d)};d.resetChannelData=function(){this.$TahoeController5=null,this.$TahoeController4=null};d.$TahoeController43=function(){if(b("TahoeV2Config").showTahoe2UI)return l;var a=null,c=this.$TahoeController35;c instanceof b("TahoeVideoView")&&(a=c.getBottomTrayHeight());return Math.min(a||m,q)};d.$TahoeController48=function(){this.emit("TahoeController/beforeExit");this.$TahoeController35&&this.$TahoeController35.onExit();b("PageTransitions").removeHandler(this.$TahoeController24,o);this.$TahoeController12.forEach(function(a){return a.remove()});this.$TahoeController12=[];this.$TahoeController8.setMediaContentSize("","");this.$TahoeController8.returnFeedElement();var a=this.$TahoeController15;b("VideoAutoplayControllerX").setShouldAutoplay(!0);this.$TahoeController15&&(this.$TahoeController17==="watch_scroll"&&this.$TahoeController15!==this.$TahoeController22||(a.addOffsetStylings(),a.setDimensions(this.$TahoeController18,this.$TahoeController16),a.updateSource(this.$TahoeController17)),a.pause("autoplay_initiated"),a.mute(),a.getState()!=="finished"&&this.$TahoeController15.emit("resumeAutoplay"),this.$TahoeController15.emit("TahoeController/exitTahoe"));b("Arbiter").inform("TahoeController/exitTahoe");this.$TahoeController22&&this.$TahoeController22.emit("TahoeController/exitTahoe");b("ScriptPath").closeOverlayView("tahoe");if(this.$TahoeController22!==this.$TahoeController15){a=this.$TahoeController22;a.pause("user_initiated")}this.$TahoeController8.cleanup();this.$TahoeController7!=null&&(this.$TahoeController7.destroy(),this.$TahoeController7=null);this.$TahoeController9&&(document.title=this.$TahoeController9);b("TahoeActions").exit();b("Tahoe").set(null);this.$TahoeController20&&b("PageTransitions").go("/")};d.getID=function(){return this.$TahoeController14};d.getDialogContent=function(){return this.$TahoeController8.getDialogContent()};d.getContent=function(){return this.$TahoeController8.getContent()};d.getMediaContent=function(){return this.$TahoeController8.getMediaContent()};d.getSideContent=function(){return this.$TahoeController8.getSideContent()};d.getUserID=function(){return this.$TahoeController31};d.getChannelID=function(){return this.$TahoeController5};d.getVideoListID=function(){return this.$TahoeController32};d.getCaller=function(){return this.$TahoeController4};d.getExternalLogID=function(){return this.$TahoeController11};d.getIsPermalink=function(){return this.$TahoeController20};d.updateMedia=function(a){var b=this.$TahoeController22;b&&typeof b.getVolume==="function"&&typeof b.isMuted==="function"&&(this.$TahoeController6=b.getVolume(),this.$TahoeController19=b.isMuted());this.$TahoeController45(a);this.$TahoeController8.setMediaContent(this.$TahoeController22.getRootNode());this.$TahoeController14=this.$TahoeController22.getMediaID();this.$TahoeController21=!1;this.setMediaState();b=this.$TahoeController35;b.setUpEndScreen();this.$TahoeController35.setUpUFI();this.$TahoeController25="user_initiated"};d.getView=function(){return this.$TahoeController35};d.setAutoplayAllowed=function(a){this.$TahoeController3=a};d.logEvent=function(a){new(b("TahoeTypedLogger"))().setEvent(a).setMediaID(this.$TahoeController14).log()};d.getFeedLocation=function(){return this.$TahoeController41};c.openFromVideoPlayer=function(a,d,e,f,g,i,j,k,l,m,n,o,p,q){if(b("gkx")("1526988")){var r=b("ScriptPath").getScriptPath();if(a.isLiveVideo()&&r==="/groups/profile.php:feed"){(h||(h=b("URI"))).go(d);return}}b("ScriptPath").openOverlayView("tahoe");r=b("collectDataAttributes")(a.getRootNode(),["ft"]);a=new c({mediaController:{video:a},uri:d,userID:n,channelID:e,caller:f,origin:i,suborigin:j,feedTracking:r,storyIdentifier:k,feedLocation:l,entryDocumentTitle:document.title,reactionVideoChannelType:m,reactionVideoChannelSubtype:q,externalLogID:o,searchKeywordsForVideoChaining:p});b("Tahoe").set(a);switch(g){case"player_click":a.logEvent("enter_with_player_click");break;case"control_click":a.logEvent("enter_with_control_click");break;case"live_video_reply_click":a.logEvent("enter_with_live_video_reply_click");break}};c.openFromVideoLink=function(a,d){d===void 0&&(d={channelID:null,caller:null});d=d;var e=d.channelID,f=d.caller,g=d.origin,h=d.suborigin,i=d.userID,j=d.reactionVideoChannelType,l=d.reactionVideoChannelSubtype,m=d.externalLogID,n=d.searchKeywordsForVideoChaining,o=d.feedLocation,p=d.upstreamPlayerSource,q=d.videoListID;d=d.feedTracking;b("ScriptPath").openOverlayView("tahoe");k&&k.pauseActiveVideo();var r=b("Tahoe").get();if(r){document.title=b("TahoeConstants").DEFAULT_BROWSER_TITLE;b("PageTransitions").go(a);return r}g||(g=f&&f in b("VideoChannelCallerToPlayerOriginMap")?b("VideoChannelCallerToPlayerOriginMap")[f]:"unknown");r=new c({uri:a,channelID:e,caller:f,origin:g,suborigin:h,userID:i,reactionVideoChannelType:j,reactionVideoChannelSubtype:l,externalLogID:m,searchKeywordsForVideoChaining:n,feedLocation:o,entryDocumentTitle:document.title,upstreamPlayerSource:p,videoListID:q,feedTracking:d});b("Tahoe").set(r);return r};c.openFromVideoLinkHelper=function(a,d,e,f,g,i){var j=a.getAttribute("data-channel-caller");j=j;var k=a.getAttribute("data-external-log-id")||void 0;d=a.getAttribute("data-player-origin")||d;c.openFromVideoLink(new(h||(h=b("URI")))(a.getAttribute("href")).addQueryData("ref","tahoe"),{channelID:a.getAttribute("data-video-channel-id"),caller:j,origin:d,suborigin:e,userID:i,externalLogID:k,searchKeywordsForVideoChaining:a.getAttribute("data-search-keyword"),reactionVideoChannelType:f||void 0,feedLocation:g})};c.openFromVideoPermalink=function(a,d){d===void 0&&(d=null);var e=new(h||(h=b("URI")))(a),f=e.getSubdomain()==="business";b("Tahoe").set(new c({uri:e,origin:"permalink",suborigin:a.indexOf("notif_id")!==-1?"notifications":"tahoe",isPermalink:!f,storyIdentifier:d}))};c.openFromVideoPermalinkToLandingPage=function(a,d,e,f){f===void 0&&(f=null),b("Tahoe").set(new c({uri:new(h||(h=b("URI")))(a),origin:"permalink",suborigin:"tahoe",isPermalink:!0,landingPage:d,landingPageType:e,storyIdentifier:f}))};return c}(b("EventEmitter"));e.exports=c}),null);