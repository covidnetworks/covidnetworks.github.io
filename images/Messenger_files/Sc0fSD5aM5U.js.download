if (self.CavalryLogger) { CavalryLogger.start_js(["x5M\/t"]); }

__d("WorkContentActivityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:WorkContentActivityLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:WorkContentActivityLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:WorkContentActivityLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAdditionalData=function(a){this.$1.additional_data=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setAppContentID=function(a){this.$1.app_content_id=a;return this};c.setAppID=function(a){this.$1.app_id=a;return this};c.setAppVersion=function(a){this.$1.app_version=a;return this};c.setAssociatedPostID=function(a){this.$1.associated_post_id=a;return this};c.setAttachmentFileType=function(a){this.$1.attachment_file_type=a;return this};c.setContentID=function(a){this.$1.content_id=a;return this};c.setContentType=function(a){this.$1.content_type=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setParentContentID=function(a){this.$1.parent_content_id=a;return this};c.setParentContentType=function(a){this.$1.parent_content_type=a;return this};c.setSurfaceType=function(a){this.$1.surface_type=a;return this};c.setTargetID=function(a){this.$1.target_id=a;return this};return a}();c={additional_data:!0,app_content_id:!0,app_id:!0,app_version:!0,associated_post_id:!0,attachment_file_type:!0,content_id:!0,content_type:!0,event:!0,parent_content_id:!0,parent_content_type:!0,surface_type:!0,target_id:!0};e.exports=a}),null);
__d("FantaTypeFileUploaderFile",["immutable"],(function(a,b,c,d,e,f){"use strict";a={file:{},id:"",startTime:0,type:null,uploadedID:null};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("MessengerDragAndDrop.react",["Bootloader","JSResource","MercuryShareAttachmentRenderLocations","MessengerEnvironment","React","URI","lazyLoadComponent","prop-types","emptyFunction","ifRequired","setImmediate"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i=144,j=b("lazyLoadComponent")(b("JSResource")("MercurySharePreview.react").__setRef("MessengerDragAndDrop.react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){c.$4(function(b){b.removeSharePreview(a)})},c.$2=function(a,b){c.$4(function(c){c.loadedShareData(a,b)})},c.$3=function(a){c.$4(function(b){b.loadingShareData(a)})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){b("MessengerEnvironment").messengerui?b("Bootloader").loadModules(["MessengerActions"],b("emptyFunction"),"MessengerDragAndDrop.react"):b("Bootloader").loadModules(["FantaMessageActions"],b("emptyFunction"),"MessengerDragAndDrop.react")};d.shouldComponentUpdate=function(a){var b=this.props;return b.threadID!==a.threadID||!!(!b.sharePreview&&a.sharePreview)||!!(b.sharePreview&&a.sharePreview&&!b.sharePreview.equals(a.sharePreview))};d.render=function(){var a=this.props,c=a.sharePreview;a=a.threadID;c=c||{};var d=c.share;c=c.uri;return d||c&&(g||(g=b("URI"))).isValidURI(c)?h.jsx("div",{className:"fbNubFlyoutAttachments",children:h.jsx("div",{className:"chatAttachmentShelf",children:h.jsx(h.Suspense,{fallback:h.jsx("div",{}),children:h.jsx(j,{onClose:this.$1,onLoaded:this.$2,onLoading:this.$3,threadID:a,imageSize:{width:i,height:i},location:b("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW,share:d,uri:c})})})}):null};d.$4=function(a){var c=this;b("setImmediate")(function(){typeof c.props.onResize==="function"&&c.props.onResize()});b("MessengerEnvironment").messengerui?b("ifRequired")("MessengerActions",function(b){a(b)},function(){b("Bootloader").loadModules(["MessengerActions"],function(b){a(b)},"MessengerDragAndDrop.react")}):b("ifRequired")("FantaMessageActions",function(b){a(b)},function(){b("Bootloader").loadModules(["FantaMessageActions"],function(b){a(b)},"MessengerDragAndDrop.react")})};return c}(h.Component);e.exports=a;a.propTypes={threadID:b("prop-types").string.isRequired}}),null);
__d("MessengerRevokeGroupLinkDialogReact.bs",["cx","fbt","bs_curry","React","ReasonReact.bs","MercuryThreadActions","MessengerDialogReact.bs","MessengerDialogHeaderReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function j(a,b){switch(a){case 0:return{TAG:0,_0:{canClickRevokeLink:!1,shown:b.shown}};case 1:return{TAG:0,_0:{canClickRevokeLink:!0,shown:b.shown}};case 2:return{TAG:0,_0:{canClickRevokeLink:b.canClickRevokeLink,shown:!1}}}}var k=b("ReasonReact.bs").reducerComponent("MessengerRevokeGroupLinkDialogReact");function a(a,c,d,e){return{debugName:k.debugName,reactClassInternal:k.reactClassInternal,handedOffState:k.handedOffState,getDerivedStateFromProps:k.getDerivedStateFromProps,didMount:k.didMount,didUpdate:k.didUpdate,willUnmount:k.willUnmount,shouldUpdate:k.shouldUpdate,render:function(e){var f,g,j=function(a){b("bs_curry")._1(e.send,2);return b("bs_curry")._1(d,void 0)};return(f=b("ReasonReact.bs")).element(void 0,void 0,(g=b("MessengerDialogReact.bs")).Dialog.make(void 0,void 0,void 0,void 0,e.state.shown,void 0,void 0,448,void 0,void 0,[i.createElement(b("MessengerDialogHeaderReact.bs").make,{children:h._("Revoke Group Link?")}),i.jsx("div",{children:h._("Revoking this link will delete any pending requests to join this group and automatically create a new link."),className:"_6b7t"}),f.element(void 0,void 0,g.Footer.make(void 0,void 0,[f.element(void 0,void 0,g.Button.make(void 0,h._("Cancel"),void 0,void 0,function(a){return b("bs_curry")._1(e.send,2)},0,void 0,void 0,void 0,[])),f.element(void 0,void 0,g.Button.make(void 0,h._("Revoke"),!e.state.canClickRevokeLink,void 0,function(d){e.state.canClickRevokeLink?(b("bs_curry")._1(e.send,0),b("MercuryThreadActions").getForFBID(a).revokeAndRegenerateJoinableLink(c,j)):d.preventDefault()},0,"_6b7u",void 0,void 0,[]))]))]))},initialState:function(a){return{canClickRevokeLink:!0,shown:!0}},retainedProps:k.retainedProps,reducer:j,jsElementWrapped:k.jsElementWrapped}}f.reducer=j;f.component=k;f.make=a}),null);
__d("MessengerManageGroupLinkDialogReact.bs",["cx","fbt","bs_curry","React","ReasonReact.bs","MessengerDialogs.bs","FBClipboardLinkReact.bs","MessengerDialogReact.bs","MessengerDialogTitleReact.bs","MessengerDialogHeaderReact.bs","MessengerRevokeGroupLinkDialogReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("ReasonReact.bs").reducerComponent("MessengerManageGroupLinkDialogReact");function k(a,c,d,e){return{debugName:j.debugName,reactClassInternal:j.reactClassInternal,handedOffState:j.handedOffState,getDerivedStateFromProps:j.getDerivedStateFromProps,didMount:j.didMount,didUpdate:j.didUpdate,willUnmount:j.willUnmount,shouldUpdate:j.shouldUpdate,render:function(e){var f,g=function(a){return b("bs_curry")._1(e.send,0)},j=i.jsxs("div",{children:[h._("Copy Group Link"),(f=b("ReasonReact.bs")).element(void 0,void 0,b("FBClipboardLinkReact.bs").make("_6b8a",d.replace("https://",""),d.replace("https://",""),void 0,void 0,void 0,void 0,"below","center",void 0,void 0,[]))],className:"_6b88 _6b89"}),k=i.jsxs(i.Fragment,{children:[f.element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton.make(void 0,[])),i.jsx(b("MessengerDialogTitleReact.bs").make,{children:h._("Manage Group Link")}),f.element(void 0,void 0,b("MessengerDialogReact.bs").Button.make(void 0,h._("Done"),void 0,void 0,function(a){return b("bs_curry")._1(e.send,0)},0,void 0,void 0,void 0,[]))]});return f.element(void 0,void 0,b("MessengerDialogReact.bs").Dialog.make(void 0,void 0,void 0,void 0,e.state.shown,void 0,"default",544,void 0,void 0,[i.createElement(b("MessengerDialogHeaderReact.bs").make,{children:k}),j,i.jsx("div",{children:h._("Anyone with this link can join the group, see all previous messages and see your name and the group name. You can revoke it at any time. Only share it with people you trust."),className:"_6b8b _6b89"}),i.jsx("div",{children:h._("Revoke Group Link"),className:"_6b8c _6b89",onClick:function(d){return b("MessengerDialogs.bs").showDialog(function(d){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerRevokeGroupLinkDialogReact.bs").make(a,c,g,[]))})}}),i.jsx("div",{children:h._("Revoking this link will delete any pending requests to join this group and automatically create a new link."),className:"_6b8b _6b89"})]))},initialState:function(a){return{shown:!0}},retainedProps:j.retainedProps,reducer:function(a,b){return{TAG:0,_0:{shown:!1}}},jsElementWrapped:j.jsElementWrapped}}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(a.viewer,a.threadID,a.joinableLink,a.children)});f.component=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerGroupLinkSectionReact.bs",["cx","fbt","React","Link.react","bs_caml_option","ReasonReact.bs","MessengerDialogs.bs","MessengerMenu.react","FBClipboardLinkReact.bs","FBClipboardLink.react","AbstractPopoverButtonReact.bs","MessengerPopoverMenu.react","MessengerManageGroupLinkDialogReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function j(a,c,d,e){e.preventDefault();return b("MessengerDialogs.bs").showDialog(function(e){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerManageGroupLinkDialogReact.bs").make(a,c,d,[]))})}function a(a){var c=a.joinableLink,d=a.viewer,e=a.threadID;a=i.jsx(b("MessengerMenu.react"),{children:i.jsx(b("MessengerMenu.react").Item,{label:h._("Manage Group Link"),onclick:function(a){return j(d,e,c,a)}})});var f=h._("More group link options");f={button:i.jsx(b("Link.react"),{"aria-label":f,className:"_30yy _6dlm",role:"button",title:f}),defaultMaxWidth:200};return i.jsxs("div",{children:[i.jsx(b("FBClipboardLink.react"),b("FBClipboardLinkReact.bs").componentProps("_6dlo",c.replace("https://",""),c.replace("https://",""),void 0,void 0,void 0,void 0,"right",void 0,void 0,void 0)(void 0)),i.jsx(b("MessengerPopoverMenu.react"),{className:"_6dlp",menu:a,children:b("ReasonReact.bs").element(void 0,void 0,b("AbstractPopoverButtonReact.bs").make(b("bs_caml_option").some(f),!1,void 0,void 0,200,[]))})],className:"_6dln"})}c=a;f.handleManageGroupLinkClick=j;f.make=c}),null);
__d("MessengerInfoPanelGroupLinkContainerReact.bs",["fbt","React","bs_caml_option","MessengerGroupLinkSectionReact.bs","MessengerInfoPanelSectionReact.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){a.preventDefault()}function c(a){var c=a.isCollapsed,d=a.onToggle,e=a.thread;a=a.viewer;var f=e.joinable_link;if(f==null)return null;if(f==="")return null;c={isCollapsible:!0,isCollapsed:c,onToggle:d,title:g._("Group Link"),children:h.createElement(b("MessengerGroupLinkSectionReact.bs").make,{joinableLink:f,viewer:a,threadID:e.thread_id})};d=b("bs_caml_option").nullable_to_opt(e.solid_color);d!==void 0&&(c.customColor=b("bs_caml_option").valFromOption(d));return h.createElement(b("MessengerInfoPanelSectionReact.bs").make,c)}d=c;e=c;f.preventDefault=a;f.make=d;f.jsComponent=e}),null);
__d("messengerInfoPanelGroupLinkContainerReactComponent",["MessengerInfoPanelGroupLinkContainerReact.bs"],(function(a,b,c,d,e,f){"use strict";a=b("MessengerInfoPanelGroupLinkContainerReact.bs").jsComponent;e.exports=a}),null);
__d("MessengerUserControlsButtonReact.bs",["ix","fbt","React","Link.react","MercuryIDs","Image.react","ReasonReact.bs","MessengerDialogs.bs","MessengerPageUtils.bs","MessengerMenu.react","MercuryThreadActions","MessengerMuteDialogReact.bs","MessengerPopoverMenu.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=h._("Mute Notifications"),k=h._("Unmute Notifications"),l=h._("Turn Off Messages"),m=h._("Turn On Messages"),n=g("464335"),o=g("464334");function a(a){var c=a.className,d=a.isMuted,e=a.isBlocked,f=a.pageID,g=a.threadID,h=a.viewer;a=function(a){if(e){b("MercuryThreadActions").getForFBID(h).unblockOnMessengerDotCom(g);return b("MessengerPageUtils.bs").changeBlockedStatus(!1,b("MercuryIDs").getParticipantIDFromUserID(f),h)}else{b("MercuryThreadActions").getForFBID(h).blockOnMessengerDotCom(g);return b("MessengerPageUtils.bs").changeBlockedStatus(!0,b("MercuryIDs").getParticipantIDFromUserID(f),h)}};var p=function(a){b("MercuryThreadActions").getForFBID(h).updateMuteSetting(g,a)},q=function(a){if(d){b("MercuryThreadActions").getForFBID(h).unmute(g);return}else return b("MessengerDialogs.bs").showDialog(function(a){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMuteDialogReact.bs").make(p,[]))})},r=d?k:j;r=i.jsx(b("MessengerMenu.react").Item,{label:r,onclick:q});q=e?m:l;q=i.jsx(b("MessengerMenu.react").Item,{label:q,onclick:a});a=i.jsxs(b("MessengerMenu.react"),{children:[r,q]});r=e?o:n;return i.jsx(b("MessengerPopoverMenu.react"),{className:c,menu:a,children:i.jsx(b("Link.react"),{children:i.jsx(b("Image.react"),{src:r,height:32,width:40})})})}c=a;f.mute=j;f.unmute=k;f.block=l;f.unblock=m;f.unblocked_button_image_path=n;f.blocked_button_image_path=o;f.make=c}),null);
__d("MessengerSharePreviewStore",["FantaTypeSharePreview","MessengerActions","MessengerStore","immutable"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$MessengerSharePreviewStore1=b("immutable").Map({});return c}var d=c.prototype;d.getState=function(){return this.$MessengerSharePreviewStore1};d.__onDispatch=function(a){var c=a.threadID;switch(a.type){case b("MessengerActions").Types.LINK_PREVIEW:var d=a.match;this.$MessengerSharePreviewStore1=this.$MessengerSharePreviewStore1.withMutations(function(a){a.get(c)||a.set(c,new(b("FantaTypeSharePreview"))());var e=a.get(c);a.set(c,e.merge({params:null,type:null,uri:d}))});this.emitChange();break;case b("MessengerActions").Types.LOADING_SHARE_DATA:this.$MessengerSharePreviewStore1=this.$MessengerSharePreviewStore1.withMutations(function(a){var b=a.get(c);if(!b)return;a.set(c,b.merge({isLoading:!0,params:null,type:null}))});this.emitChange();break;case b("MessengerActions").Types.LOADED_SHARE_DATA:a=a.attachmentData;var e=a.share_data;this.$MessengerSharePreviewStore1=this.$MessengerSharePreviewStore1.withMutations(function(a){var d=a.get(c);if(!d)return;a.set(c,d.merge({isLoading:!1,params:b("immutable").Map({data:e.share_params}),type:e.share_type}))});this.emitChange();break;case b("MessengerActions").Types.REMOVE_SHARE_PREVIEW:this.$MessengerSharePreviewStore1=this.$MessengerSharePreviewStore1.withMutations(function(a){a.get(c)&&a.set(c,new(b("FantaTypeSharePreview"))())});this.emitChange();break}};return c}(b("MessengerStore"));c=new a();e.exports=c}),null);
__d("ChatFileUploadLoggingUtils",["CurrentUser","WorkContentActivityTypedLogger"],(function(a,b,c,d,e,f){"use strict";f.log=a;function a(a,c){c===void 0&&(c="CHAT_MAIN"),b("CurrentUser").isWorkUser()&&new(b("WorkContentActivityTypedLogger"))().setSurfaceType(c).setEvent("CHAT_FILE_UPLOAD").setAdditionalData({file_size:a.size.toString(),file_type:a.type}).log()}}),null);
__d("Dialog",["fbt","Animation","Arbiter","AsyncRequest","Button","ContextualThing","CSS","DOM","Env","Event","Focus","Form","HTML","Keys","Locale","PageTransitions","Parent","Run","Style","URI","Vector","bind","createArrayFromMixed","emptyFunction","getObjectValues","getOverlayZIndex","removeFromArray","shield"],(function $module_Dialog(global,require,requireDynamic,requireLazy,module,exports,fbt){var c_Env,c_URI,_supportsPositionFixed2=function _supportsPositionFixed(){var body=document.body;if(!body)return!1;var test=document.createElement("div"),control=document.createElement("div");body.insertBefore(test,body.firstChild);body.insertBefore(control,body.firstChild);test.style.position="fixed";test.style.top="20px";var result=test.offsetTop!==control.offsetTop;body.removeChild(test);body.removeChild(control);_supportsPositionFixed2=require("emptyFunction").thatReturns(result);return result},Dialog=function(){function Dialog(model){this._show_loading=!0,this._auto_focus=!0,this._submit_on_enter=!1,this._fade_enabled=!0,this._onload_handlers=[],this._top=125,this._uniqueID="dialog_"+Dialog._globalCount++,this._content=null,this._obj=null,this._popup=null,this._overlay=null,this._causal_elem=null,this._previous_focus=null,this._buttons=[],this._buildDialog(),model&&this._setFromModel(model),Dialog._init()}var _proto=Dialog.prototype;_proto.show=function show(){this._showing=!0;this._async_request?this._show_loading&&this.showLoading():this._update();return this};_proto.showLoading=function showLoading(){this._loading=!0;require("CSS").addClass(this._frame,"dialog_loading_shown");this._renderDialog();return this};_proto.hide=function hide(){if(!this._showing&&!this._loading)return this;this._showing=!1;this._autohide_timeout&&(clearTimeout(this._autohide_timeout),this._autohide_timeout=null);this._fade_enabled&&Dialog._stack.length<=1?this._fadeOut():this._hide();return this};_proto.cancel=function cancel(){(!this._cancelHandler||this._cancelHandler()!==!1)&&this.hide()};_proto.getRoot=function getRoot(){return this._obj};_proto.getBody=function getBody(){return require("DOM").scry(this._obj,"div.dialog_body")[0]};_proto.getButtonElement=function getButtonElement(button){typeof button==="string"&&(button=Dialog._findButton(this._buttons,button));if(!button||!button.name)return null;var inputs=require("DOM").scry(this._popup,"input"),name_filter=function name_filter(elem){return elem.name==button.name};return inputs.filter(name_filter)[0]||null};_proto.getContentNode=function getContentNode(){return require("DOM").find(this._content,"div.dialog_content")};_proto.getFormData=function getFormData(){return require("Form").serialize(this.getContentNode())};_proto.setAllowCrossPageTransition=function setAllowCrossPageTransition(allow){this._cross_transition=allow;return this};_proto.setAllowCrossQuicklingNavigation=function setAllowCrossQuicklingNavigation(allow){this._cross_quickling=allow;return this};_proto.setShowing=function setShowing(){this.show();return this};_proto.setHiding=function setHiding(){this.hide();return this};_proto.setTitle=function setTitle(title){var node=this._nodes.title,inner_node=this._nodes.title_inner,content_node=this._nodes.content;require("DOM").setContent(inner_node,this._format(title||"",!0));require("CSS").conditionShow(node,!!title);require("CSS").conditionClass(content_node,"dialog_content_titleless",!title);return this};_proto.setInvertTitleColor=function setInvertTitleColor(invert){invert?this._nodes.title.className="dialog_title_inverted":this._nodes.title.className="dialog_title";return this};_proto.setBody=function setBody(body){require("DOM").setContent(this._nodes.body,this._format(body));return this};_proto.setHiddenFields=function setHiddenFields(hidden_fields){require("DOM").setContent(this._nodes.hidden_fields,this._format(hidden_fields));return this};_proto.setExtraData=function setExtraData(data){this._extra_data=data;return this};_proto.setReturnData=function setReturnData(data){this._return_data=data;return this};_proto.setShowLoading=function setShowLoading(show){this._show_loading=show;return this};_proto.setFullBleed=function setFullBleed(is_full_bleed){this._full_bleed=is_full_bleed;this._updateWidth();require("CSS").conditionClass(this._obj,"full_bleed",is_full_bleed);return this};_proto.setCausalElement=function setCausalElement(elem){this._causal_elem=elem;return this};_proto.setUserData=function setUserData(data){this._user_data=data;return this};_proto.getUserData=function getUserData(){return this._user_data};_proto.setAutohide=function setAutohide(autohide){autohide?this._showing?this._autohide_timeout=setTimeout(require("shield")(this.hide,this),autohide):this._autohide=autohide:(this._autohide=null,this._autohide_timeout&&(clearTimeout(this._autohide_timeout),this._autohide_timeout=null));return this};_proto.setSummary=function setSummary(summary){var node=this._nodes.summary;require("DOM").setContent(node,this._format(summary||""));require("CSS").conditionShow(node,!!summary);return this};_proto.setButtons=function setButtons(b){var buttons,button;!Array.isArray(b)?buttons=Array.from(arguments):buttons=b;for(var i=0;i<buttons.length;++i){var currButton=buttons[i];typeof currButton==="string"&&(button=Dialog._findButton(Dialog._STANDARD_BUTTONS,currButton),buttons[i]=button)}this._buttons=buttons;var button_content=[];if(buttons&&buttons.length>0)for(var ii=0;ii<buttons.length;ii++){button=buttons[ii];if(!button)continue;var button_input=require("DOM").create("input",{type:"button",name:button.name||"",value:button.label}),button_node=require("DOM").create("label",{className:"uiButton uiButtonLarge uiButtonConfirm"},button_input);button.className&&(button.className.split(/\s+/).forEach(function(e){require("CSS").addClass(button_node,e)}),require("CSS").hasClass(button_node,"inputaux")&&(require("CSS").removeClass(button_node,"inputaux"),require("CSS").removeClass(button_node,"uiButtonConfirm")),require("CSS").hasClass(button_node,"uiButtonSpecial")&&require("CSS").removeClass(button_node,"uiButtonConfirm"));button.icon&&require("DOM").prependContent(button_node,require("DOM").create("img",{src:button.icon,className:"img mrs"}));button.disabled&&require("Button").setEnabled(button_node,!1);require("Event").listen(button_input,"click",this._handleButton.bind(this,button.name));for(var attr in button)attr.indexOf("data-")===0&&attr.length>5&&button_input.setAttribute(attr,button[attr]);button_content.push(button_node)}require("DOM").setContent(this._nodes.buttons,button_content);this._updateButtonVisibility();return this};_proto.setButtonsMessage=function setButtonsMessage(message){require("DOM").setContent(this._nodes.button_message,this._format(message||""));this._has_button_message=!!message;this._updateButtonVisibility();return this};_proto._updateButtonVisibility=function _updateButtonVisibility(){var show=this._buttons.length>0||this._has_button_message;require("CSS").conditionShow(this._nodes.button_wrapper,show);require("CSS").conditionClass(this._obj,"omitDialogFooter",!show)};_proto.setClickButtonOnEnter=function setClickButtonOnEnter(input_id,button){this._clickOnEnterTarget=input_id;this._clickOnEnterListener||(this._clickOnEnterListener=require("Event").listen(this._nodes.body,"keypress",function(event){var target=event.getTarget();target&&target.id===this._clickOnEnterTarget&&(require("Event").getKeyCode(event)==require("Keys").RETURN&&(this._handleButton(button),event.kill()));return!0}.bind(this)));return this};_proto.setStackable=function setStackable(stackable,shown){this._is_stackable=stackable;this._shown_while_stacked=stackable&&shown;return this};_proto.setHandler=function setHandler(handler){this._handler=handler;return this};_proto.setCancelHandler=function setCancelHandler(cancelHandler){this._cancelHandler=Dialog.call_or_eval.bind(null,this,cancelHandler);return this};_proto.setCloseHandler=function setCloseHandler(close_handler){this._close_handler=Dialog.call_or_eval.bind(null,this,close_handler);return this};_proto.clearHandler=function clearHandler(){return this.setHandler(null)};_proto.setPostURI=function setPostURI(post_uri,asynchronous,useParent){asynchronous===void 0&&(asynchronous=!0);if(useParent&&(c_Env||(c_Env=require("Env"))).isCQuick){require("PageTransitions").go(post_uri);return this}asynchronous?this.setHandler(this._submitForm.bind(this,"POST",post_uri)):this.setHandler(function(){require("Form").post(post_uri,this.getFormData()),this.hide()}.bind(this));return this};_proto.setGetURI=function setGetURI(get_uri){this.setHandler(this._submitForm.bind(this,"GET",get_uri));return this};_proto.setModal=function setModal(modal){this._modal=modal;require("CSS").conditionClass(this._obj,"generic_dialog_modal",modal);return this};_proto.setSemiModal=function setSemiModal(clickout){clickout?(this.setModal(!0),this._semiModalListener=require("Event").listen(this._obj,"click",function(e){require("DOM").contains(this._popup,e.getTarget())||this.hide()}.bind(this))):this._semiModalListener&&this._semiModalListener.remove();this._semi_modal=clickout;return this};_proto.setWideDialog=function setWideDialog(is_wide){this._wide_dialog=is_wide;this._updateWidth();return this};_proto.setContentWidth=function setContentWidth(width){this._content_width=width;this._updateWidth();return this};_proto.setTitleLoading=function setTitleLoading(loading){loading===void 0&&(loading=!0);var header=require("DOM").find(this._popup,"h2.dialog_title");header&&require("CSS").conditionClass(header,"loading",loading);return this};_proto.setSecure=function setSecure(is_secure){require("CSS").conditionClass(this._nodes.title,"secure",is_secure);return this};_proto.setClassName=function setClassName(class_name){class_name.split(/\s+/).forEach(require("CSS").addClass.bind(require("CSS"),this._obj));return this};_proto.setFadeEnabled=function setFadeEnabled(enabled){this._fade_enabled=enabled;return this};_proto.setFooter=function setFooter(footer){var node=this._nodes.footer;require("DOM").setContent(node,this._format(footer||""));require("CSS").conditionShow(node,!!footer);return this};_proto.setAutoFocus=function setAutoFocus(focus){this._auto_focus=focus;return this};_proto.setTop=function setTop(top){this._top=top;this._resetDialogObj();return this};_proto.onloadRegister=function onloadRegister(handler){var _this=this;require("createArrayFromMixed")(handler).forEach(function(i){typeof i==="string"&&(i=new Function(i)),_this._onload_handlers.push(i.bind(_this))});return this};_proto.setAsyncURL=function setAsyncURL(url){return this.setAsync(new(require("AsyncRequest"))(url))};_proto.setAsync=function setAsync(async_request){var handler=function(response){if(this._async_request!=async_request)return;this._async_request=null;var payload=response.getPayload(),dialog=payload;this._loading&&(this._showing=!0);typeof dialog==="string"?this.setBody(dialog):this._setFromModel(dialog);this._update()}.bind(this),data=async_request.getData();data.__d=1;async_request.setData(data);var orig_handler=async_request.getHandler()||require("emptyFunction");async_request.setHandler(function(response){orig_handler(response),handler(response)});var request=async_request,orig_error_handler=request.getErrorHandler()||require("emptyFunction"),orig_trans_error_handler=request.getTransportErrorHandler()||require("emptyFunction"),handle_error=function(){this._async_request=null,this._loading=!1,this._showing&&this._shown_while_stacked?this._update():this._hide(this._is_stackable)}.bind(this),server_cancel_handler=request.getServerDialogCancelHandler()||handle_error;request.setAllowCrossPageTransition(this._cross_transition).setErrorHandler(function(response){handle_error(),orig_error_handler(response)}).setTransportErrorHandler(function(response){handle_error(),orig_trans_error_handler(response)}).setServerDialogCancelHandler(server_cancel_handler);async_request.send();this._async_request=async_request;this._showing&&this.show();return this};_proto._format=function _format(content,sane){sane===void 0&&(sane=!1);typeof content==="string"?sane||(content=require("HTML")(content)):content=require("HTML").replaceJSONWrapper(content);content instanceof require("HTML")&&content.setDeferred(!0);return content};_proto._update=function _update(){if(!this._showing)return;this._autohide&&!this._async_request&&!this._autohide_timeout&&(this._autohide_timeout=setTimeout(require("bind")(this,"hide"),this._autohide));require("CSS").removeClass(this._frame,"dialog_loading_shown");this._loading=!1;this._renderDialog();this._runOnloads();this._previous_focus=document.activeElement;require("Focus").set(this._frame)};_proto._runOnloads=function _runOnloads(){for(var i=0;i<this._onload_handlers.length;++i)try{this._onload_handlers[i]()}catch(_unused){}this._onload_handlers=[]};_proto._updateWidth=function _updateWidth(){var dialog_width=2*(Dialog._BORDER_WIDTH+Dialog._HALO_WIDTH);this._content_width?(dialog_width+=this._content_width,this._full_bleed||(dialog_width+=2*Dialog._PADDING_WIDTH)):this._wide_dialog?dialog_width+=Dialog.SIZE.WIDE:dialog_width+=Dialog.SIZE.STANDARD;this._popup.style.width=dialog_width+"px"};_proto._updateZIndex=function _updateZIndex(){if(!this._hasSetZIndex&&this._causal_elem){var z_index=require("getOverlayZIndex")(this._causal_elem),node=this._causal_elem;while(!z_index&&(node=require("ContextualThing").getContext(node)))z_index=require("getOverlayZIndex")(node);this._hasSetZIndex=z_index>(this._modal?400:200);require("Style").set(this._obj,"z-index",this._hasSetZIndex?z_index:"")}};_proto._renderDialog=function _renderDialog(){this._updateZIndex();this._pushOntoStack();this._obj.style.height=null;this._obj&&this._obj.style.display?(this._obj.style.visibility="hidden",this._obj.style.display="",this.resetDialogPosition(),this._obj.style.visibility="",this._obj.dialog=this):this.resetDialogPosition();clearInterval(this.active_hiding);this.active_hiding=setInterval(this._activeResize.bind(this),500);this._submit_on_enter=!1;if(this._auto_focus){var input=require("Form").getFirstElement(this._content,['input[type="text"]',"textarea",'input[type="password"]']);input?setTimeout(require("Form").focusFirst.bind(this,this._content),0):this._submit_on_enter=!0}var bottom=require("Vector").getElementDimensions(this._content).y+require("Vector").getElementPosition(this._content).y;Dialog._bottoms.push(bottom);this._bottom=bottom;Dialog._updateMaxBottom();return this};_proto._buildDialog=function _buildDialog(){this._obj=require("DOM").create("div",{className:"generic_dialog",id:this._uniqueID});this._obj.style.display="none";require("DOM").appendContent(document.body,this._obj);this._popup||(this._popup=require("DOM").create("div",{className:"generic_dialog_popup"}));this._obj.appendChild(this._popup);require("CSS").addClass(this._obj,"pop_dialog");require("Locale").isRTL()&&require("CSS").addClass(this._obj,"pop_dialog_rtl");require("DOM").setContent(this._popup,require("DOM").create("div",{className:"pop_container_advanced"},require("DOM").create("div",{className:"pop_content",id:"pop_content"})));var frame=require("DOM").find(this._popup,"div.pop_content");frame.setAttribute("tabIndex","0");frame.setAttribute("role","alertdialog");this._frame=this._content=frame;var loading=require("DOM").create("div",{className:"dialog_loading"},fbt._("Loading...")),title_inner=require("DOM").create("span"),title=require("DOM").create("h2",{className:"dialog_title hidden_elem",id:"title_"+this._uniqueID},title_inner),summary=require("DOM").create("div",{className:"dialog_summary hidden_elem"}),body=require("DOM").create("div",{className:"dialog_body"}),buttons=require("DOM").create("div",{className:"rfloat mlm"}),button_message=require("DOM").create("div",{className:"dialog_buttons_msg"}),button_wrapper=require("DOM").create("div",{className:"dialog_buttons clearfix hidden_elem"},[buttons,button_message]),footer=require("DOM").create("div",{className:"dialog_footer hidden_elem"}),hidden_fields=require("DOM").create("div",{className:"hidden_elem"}),content=require("DOM").create("div",{className:"dialog_content"},[summary,body,button_wrapper,footer,hidden_fields]);this._nodes={summary:summary,body:body,buttons:buttons,button_message:button_message,button_wrapper:button_wrapper,footer:footer,hidden_fields:hidden_fields,content:content,title:title,title_inner:title_inner};require("DOM").setContent(this._frame,[title,content,loading])};_proto._activeResize=function _activeResize(){this.last_offset_height!=this._content.offsetHeight&&(this.last_offset_height=this._content.offsetHeight,this.resetDialogPosition())};_proto.resetDialogPosition=function resetDialogPosition(){if(!this._popup)return;this._resetDialogObj()};_proto._resetDialogObj=function _resetDialogObj(){var total_margin=2*Dialog._PAGE_MARGIN,viewport_dimensions=require("Vector").getViewportDimensions(),viewport_width=viewport_dimensions.x-total_margin,viewport_height=viewport_dimensions.y-total_margin,total_halo_width=2*Dialog._HALO_WIDTH,content_dimensions=require("Vector").getElementDimensions(this._content),content_width=content_dimensions.x+total_halo_width,content_height=content_dimensions.y+total_halo_width,top=this._top,empty_horiz_space=viewport_width-content_width,empty_vertical_space=viewport_height-content_height;empty_vertical_space<0?top=Dialog._PAGE_MARGIN:top>empty_vertical_space&&(top=Dialog._PAGE_MARGIN+Math.max(empty_vertical_space,0)/2);var is_fixed=_supportsPositionFixed2();is_fixed||(top+=require("Vector").getScrollPosition().y);require("Style").set(this._popup,"marginTop",top+"px");var scroll=is_fixed&&(empty_horiz_space<0||empty_vertical_space<0);require("CSS").conditionClass(this._obj,"generic_dialog_fixed_overflow",scroll);var documentEl=document.documentElement;documentEl&&require("CSS").conditionClass(documentEl,"generic_dialog_overflow_mode",scroll)};_proto._fadeOut=function _fadeOut(temporary){if(!this._popup)return;try{new(require("Animation"))(this._obj).duration(0).checkpoint().to("opacity",0).hide().duration(250).ondone(this._hide.bind(this,temporary)).go()}catch(_unused2){this._hide(temporary)}};_proto._hide=function _hide(temporary){this._obj&&(this._obj.style.display="none");var documentEl=document.documentElement;documentEl&&require("CSS").removeClass(documentEl,"generic_dialog_overflow_mode");clearInterval(this.active_hiding);if(this._bottom){var bs=Dialog._bottoms;bs.splice(bs.indexOf(this._bottom),1);Dialog._updateMaxBottom()}this._previous_focus&&document.activeElement&&require("DOM").contains(this._obj,document.activeElement)&&require("Focus").set(this._previous_focus);if(temporary)return;this.destroy()};_proto.destroy=function destroy(){this._popFromStack(),clearInterval(this.active_hiding),this._obj&&(require("DOM").remove(this._obj),this._obj=null),this._clickOnEnterListener&&this._clickOnEnterListener.remove(),this._close_handler&&this._close_handler({return_data:this._return_data})};_proto._handleButton=function _handleButton(button){typeof button==="string"&&(button=Dialog._findButton(this._buttons,button));if(!button)return;var value=Dialog.call_or_eval(button,button.handler);if(value===!1)return;button.name=="cancel"?this.cancel():Dialog.call_or_eval(this,this._handler,{button:button})!==!1&&this.hide()};_proto._submitForm=function _submitForm(method,uri,button){var data=this.getFormData();button&&(data[button.name]=button.name);this._extra_data&&Object.assign(data,this._extra_data);var async_request=new(require("AsyncRequest"))().setURI(uri).setData(data).setMethod(method).setNectarModuleDataSafe(this._causal_elem).setReadOnly(method=="GET");this.setAsync(async_request);return!1};_proto._setFromModel=function _setFromModel(original_model){var model={};Object.assign(model,original_model);for(var propertyName in model){if(propertyName=="onloadRegister"){this.onloadRegister(model[propertyName]);continue}var mutator=this["set"+propertyName.substr(0,1).toUpperCase()+propertyName.substr(1)];mutator.apply(this,require("createArrayFromMixed")(model[propertyName]))}};_proto._updateBottom=function _updateBottom(){var bottom=require("Vector").getElementDimensions(this._content).y+require("Vector").getElementPosition(this._content).y;Dialog._bottoms[Dialog._bottoms.length-1]=bottom;Dialog._updateMaxBottom()};_proto._pushOntoStack=function _pushOntoStack(){var stack=Dialog._stack;stack.length||require("Arbiter").inform("layer_shown",{type:"Dialog"});require("removeFromArray")(stack,this);stack.push(this);for(var i=stack.length-2;i>=0;i--){var prev_dialog=stack[i];!prev_dialog._is_stackable&&!prev_dialog._async_request?prev_dialog._hide():prev_dialog._shown_while_stacked||prev_dialog._hide(!0)}};_proto._popFromStack=function _popFromStack(){var stack=Dialog._stack,was_top=stack[stack.length-1]===this;require("removeFromArray")(stack,this);stack.length?was_top&&stack[stack.length-1].show():require("Arbiter").inform("layer_hidden",{type:"Dialog"})};Dialog._updateMaxBottom=function _updateMaxBottom(){Dialog.max_bottom=Math.max.apply(Math,Dialog._bottoms)};Dialog.newButton=function newButton(name,label,className,handler){var button={name:name,label:label,className:void 0,handler:void 0};className&&(button.className=className);handler&&(button.handler=handler);return button};Dialog.getCurrent=function getCurrent(){var stack=Dialog._stack;return stack.length?stack[stack.length-1]:null};Dialog.hideCurrent=function hideCurrent(){var dialog=Dialog.getCurrent();dialog&&dialog.hide()};Dialog.bootstrap=function bootstrap(uri,data,read_only,method,model,elem){data=data||{};Object.assign(data,new(c_URI||(c_URI=require("URI")))(uri).getQueryData());method=method||(read_only?"GET":"POST");var status_elem=require("Parent").byClass(elem,"stat_elem")||elem;if(status_elem&&require("CSS").hasClass(status_elem,"async_saving"))return!1;if(!(status_elem instanceof HTMLElement))return!1;var request=new(require("AsyncRequest"))().setReadOnly(!!read_only).setMethod(method).setRelativeTo(elem).setStatusElement(status_elem).setURI(uri).setNectarModuleDataSafe(elem).setData(data),dialog=new Dialog(model).setCausalElement(elem).setAsync(request);dialog.show();return!1};Dialog.showFromModel=function showFromModel(model,causal_element){var dialog=new Dialog(model).setCausalElement(causal_element).show();model.hiding&&dialog.hide()};Dialog._init=function _init(){this._init=require("emptyFunction"),require("Run").onLeave(require("shield")(Dialog._tearDown,null,!1)),require("Arbiter").subscribe("page_transition",require("shield")(Dialog._tearDown,null,!0)),require("Event").listen(document.documentElement,"keydown",function(event){require("Event").getKeyCode(event)==require("Keys").ESC&&!event.getModifiers().any?Dialog._escape()&&event.kill():require("Event").getKeyCode(event)==require("Keys").RETURN&&!event.getModifiers().any&&(Dialog._enter()&&event.kill())}),require("Event").listen(window,"resize",function(event){var dialog=Dialog.getCurrent();dialog&&dialog._resetDialogObj()})};Dialog._findButton=function _findButton(buttons,name){if(buttons)for(var i=0;i<buttons.length;++i)if(buttons[i].name==name)return buttons[i];return null};Dialog._tearDown=function _tearDown(is_page_transition){var stack=Dialog._stack.slice();for(var ii=stack.length-1;ii>=0;ii--)(is_page_transition&&!stack[ii]._cross_transition||!is_page_transition&&!stack[ii]._cross_quickling)&&stack[ii].hide()};Dialog._escape=function _escape(){var dialog=Dialog.getCurrent();if(!dialog)return!1;var semi_modal=dialog._semi_modal,buttons=dialog._buttons;if(!buttons.length&&!semi_modal)return!1;if(semi_modal&&!buttons.length){dialog.hide();return!0}var button_to_simulate,cancel_button=Dialog._findButton(buttons,"cancel");if(dialog._cancelHandler){dialog.cancel();return!0}else if(cancel_button)button_to_simulate=cancel_button;else if(buttons.length==1)button_to_simulate=buttons[0];else return!1;dialog._handleButton(button_to_simulate);return!0};Dialog._enter=function _enter(){var dialog=Dialog.getCurrent();if(!dialog||!dialog._submit_on_enter)return!1;if(document.activeElement!=dialog._frame)return!1;var buttons=dialog._buttons;if(!buttons)return!1;dialog._handleButton(buttons[0]);return!0};Dialog.call_or_eval=function call_or_eval(obj,func,args){if(!func)return void 0;args=args||{};if(typeof func==="string"){var params=Object.keys(args).join(", ");func=eval("({f: function("+params+") { "+func+"}})").f}return func.apply(obj,require("getObjectValues")(args))};return Dialog}();module.exports=Dialog;Dialog.OK={name:"ok",label:fbt._("OK")};Dialog.CANCEL={name:"cancel",label:fbt._("Cancel"),className:"inputaux"};Dialog.CLOSE={name:"close",label:fbt._("Close")};Dialog.NEXT={name:"next",label:fbt._("Next")};Dialog.SAVE={name:"save",label:fbt._("Save")};Dialog.SUBMIT={name:"submit",label:fbt._("Submit")};Dialog.CONFIRM={name:"confirm",label:fbt._("Confirm")};Dialog.DELETE={name:"delete",label:fbt._("Delete")};Dialog._bottoms=[0];Dialog.max_bottom=0;Dialog._globalCount=0;Dialog.OK_AND_CANCEL=[Dialog.OK,Dialog.CANCEL];Dialog._STANDARD_BUTTONS=[Dialog.OK,Dialog.CANCEL,Dialog.CLOSE,Dialog.SAVE,Dialog.SUBMIT,Dialog.CONFIRM,Dialog.DELETE];Dialog.SIZE={WIDE:555,STANDARD:445};Dialog._HALO_WIDTH=10;Dialog._BORDER_WIDTH=1;Dialog._PADDING_WIDTH=10;Dialog._PAGE_MARGIN=40;Dialog._stack=[];global.Dialog=Dialog}),null);
__d("MercuryExperimentUtils",["fbt","qex"],(function(a,b,c,d,e,f,g){"use strict";f.getMaxAttachmentSizeExceededDialog=a;function a(){var a=b("qex")._("1269176");a===null&&(a=26214400);var c;switch(a){case 52428800:c=50;break;case 78643200:c=75;break;default:c=25}a=g._("The file you have selected is too large. The maximum size is {=size}MB",[g._param("=size",c)]);return a.toString()}}),null);
__d("MessengerUploadFilesStore",["fbt","ChatFileUploadLoggingUtils","Dialog","FantaTypeFileUploader","FantaTypeFileUploaderFile","FBLogger","LogHistory","MercuryConstants","MercuryExperimentUtils","MessengerActions","MessengerStore","PhotosUploadID","gkx","immutable"],(function(a,b,c,d,e,f,g){"use strict";var h=b("LogHistory").getInstance("messenger_share_file_preview");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$MessengerUploadFilesStore1=b("immutable").Map({});return c}var d=c.prototype;d.getState=function(){return this.$MessengerUploadFilesStore1};d.__onDispatch=function(a){var c,d=a.threadID,e=a.uploadID;switch(a.type){case b("MessengerActions").Types.PREPARE_FILES_FOR_SEND:h.log("Add files "+d,JSON.stringify(a));var f=a.files;this.$MessengerUploadFilesStore1=j(this.$MessengerUploadFilesStore1,d,f);this.emitChange();break;case b("MessengerActions").Types.CANCEL_FILE_UPLOAD:h.debug("Remove file "+d,JSON.stringify(a));f=this.$MessengerUploadFilesStore1.get(d);c=f.get("uploadingFiles").get(e);c?this.$MessengerUploadFilesStore1=this.$MessengerUploadFilesStore1.deleteIn([d,"uploadingFiles",e]):(c=f.get("uploadedFiles").get(e),c&&(this.$MessengerUploadFilesStore1=this.$MessengerUploadFilesStore1.deleteIn([d,"uploadedFiles",e])));this.emitChange();break;case b("MessengerActions").Types.EMPTY_FILES:h.debug("Empty files "+d,JSON.stringify(a));this.$MessengerUploadFilesStore1=this.$MessengerUploadFilesStore1.withMutations(function(a){a.get(d)&&a.set(d,new(b("FantaTypeFileUploader"))())});this.emitChange();break}};return c}(b("MessengerStore"));function i(a,c){new(b("Dialog"))().setTitle(a).setBody(c).setButtons(b("Dialog").OK).setSemiModal(!0).show()}function j(a,c,d){if(d.length>b("MercuryConstants").attachmentMaxLimit){i(g._("The number of files you have selected is too large.").toString(),g._("You can send maximum {max number of files} files.",[g._param("max number of files",b("MercuryConstants").AttachmentMaxLimit)]).toString());b("FBLogger")("messenger_upload_file").warn("Attachment limit reached");return a}for(var e=0;e<d.length;e++){var f=d[e];b("ChatFileUploadLoggingUtils").log(f);if(f.size>b("MercuryConstants").AttachmentMaxSize){f=b("MercuryExperimentUtils").getMaxAttachmentSizeExceededDialog();i(g._("The file you have selected is too large").toString(),b("gkx")("1147754")?g._("The file you have selected is too large. The maximum size is 75MB").toString():f);b("FBLogger")("messenger_upload_file").warn("Uploading file is too large");return a}}for(var f=0;f<d.length;f++){e=d[f];var h=l();a=k(a,c,h,e)}return a}function k(a,c,d,e){return a.withMutations(function(a){a.get(c)||a.set(c,new(b("FantaTypeFileUploader"))());var f=a.get(c);a.set(c,f.setIn(["uploadedFiles",d],new(b("FantaTypeFileUploaderFile"))({file:e,id:d,startTime:Date.now()})))})}function l(){return"upload_"+b("PhotosUploadID").getNewID()}c=new a();e.exports=c}),null);
__d("MessengerSecondarySearchFunnelLogger",["FunnelLogger","MercuryConfig","MessengerSecondarySearchFunnelConstants"],(function(a,b,c,d,e,f){"use strict";var g,h=(g=b("MessengerSecondarySearchFunnelConstants")).FUNNEL_NAME,i=g.ENTRY_SURFACES,j=g.EVENTS,k=g.SEARCH_SURFACES,l=g.MICRO_SESSION_TYPES,m=g.END_ACTIONS,n=new Map(),o=new Map(),p=new Map(),q=new Map(),r=0;function a(a,c,d,e,f){if(!f)return;b("FunnelLogger").startFunnel(h,f);b("FunnelLogger").setFunnelTimeout(h,86400);p.set(f.toString(),c);b("FunnelLogger").appendActionWithPayloadIfNew(h,f,j.START,{search_surface:c,entry_surface:d,thread_fbid:e,client:a});(b("MercuryConfig").ChatComposer||c!==k.OMNIPICKER)&&w(f)}function c(a,c,d,e,f){if(!d)return;var g=o.get(d.toString()),i=n.get(d.toString());i=i?l.QUERY:l.NO_QUERY;g!==null&&(x(d,i),p["delete"](d.toString()));b("FunnelLogger").appendActionWithPayloadIfNew(h,d,j.END,{end_reason:a,action_name:c,thread_fbid:e,is_new_thread:f});b("FunnelLogger").endFunnel(h,d)}function d(a,c){if(!c)return;var d=c.toString(),e=n.get(d),f=p.get(d);!e&&!!a?((b("MercuryConfig").ChatComposer||f===k.BROADCAST||f===k.GROUP_CREATION||f===i.COMPOSER)&&x(c,l.NO_QUERY),w(c)):e&&a===""&&e!==""&&(x(c,l.QUERY),(b("MercuryConfig").ChatComposer||f===k.BROADCAST||f===k.GROUP_CREATION||f===i.COMPOSER)&&w(c));n.set(d,a);b("FunnelLogger").appendActionWithPayload(h,c,j.QUERY_CHANGED,{query_string:a})}function f(a,c,d,e,f,g,i,m){if(!i)return;var r=i.toString(),s=p.get(r),t=o.get(r);q.set(t,!0);b("FunnelLogger").appendActionWithPayload(h,i,j.RESULT_SELECTED,{query_string:e,result_fbid:a,result_type:d,result_index:c,data_source:[f],search_surface:g,micro_session_id:t,selection_type:m});s===k.OMNIPICKER?(x(i,l.QUERY),b("MercuryConfig").ChatComposer?(n.set(r,""),w(i)):n["delete"](r)):e&&s===k.GROUP_CREATION&&(n.set(r,""),x(i,l.QUERY),w(i))}function s(a,c,d){if(!d)return;b("FunnelLogger").appendActionWithPayload(h,d,j.SOURCE_STARTED,{query_string:a,data_source:[c]})}function t(a,c,d,e,f,g){if(!g)return;b("FunnelLogger").appendActionWithPayload(h,g,j.SOURCE_ENDED,{query_string:a,results_count:c,data_source:[d],status:e,result_used:f})}function u(a,c,d,e){if(!e)return;if(c.length===0)return;b("FunnelLogger").appendActionWithPayload(h,e,j.IMPRESSIONS,{query_string:a,impression_list:c})}function v(a,c,d){if(!d)return;b("FunnelLogger").appendActionWithPayload(h,d,j.TOKEN_REMOVED,{deleted_result_id:a,cleared_all_tokens:c})}function w(a){b("FunnelLogger").appendActionWithPayload(h,a,j.MICRO_SESSION_STARTED,{micro_session_id:r}),o.set(a.toString(),r),q.set(r,!1),r+=1}function x(a,c){var d=o.get(a.toString());b("FunnelLogger").appendActionWithPayload(h,a,j.MICRO_SESSION_ENDED,{micro_session_id:d,micro_session_end_reason:q.get(d)?m.RESULT_SELECTED:m.ABANDON,micro_session_type:c});q["delete"](d);o["delete"](a.toString())}function y(a){b("FunnelLogger").appendAction(h,a,j.REENTER_OMNIPICKER)}function z(a){b("FunnelLogger").appendAction(h,a,j.CLICK_OTHER_THREAD)}e.exports={endFunnel:c,impressions:u,queryChanged:d,reenterSearch:y,resultSelected:f,sourceEnded:t,sourceStarted:s,startFunnel:a,tokenRemoved:v,unfocusSearch:z}}),null);
__d("InstantGamesFunnelEvent",[],(function(a,b,c,d,e,f){a=Object.freeze({CLOUD_GAMING_TOS_SHOW:"cloud_gaming_tos_show",GAME_ACTIVE:"game_active",GAME_BACKGROUNDED:"game_backgrounded",GAME_CHALLENGE_LIST_SHOWN:"game_challenge_list_shown",GAME_CHAT_SEND_HOT_LIKE:"game_chat_send_hot_like",GAME_CHAT_SEND_MESSEAGE:"game_chat_send_message",GAME_CONTAINER_CLOSE:"game_container_close",GAME_CONTAINER_SHOW:"game_container_show",GAME_CONTEXT_UPDATE:"game_context_update",GAME_CONTEXT_UPDATED:"game_context_updated",GAME_HOST_START:"game_host_start",GAME_INFO_FETCH:"game_info_fetch",GAME_INFO_QUERY_SUCCESS:"game_info_query_success",GAME_LIST_DISMISS:"game_list_dismiss",GAME_LIST_OPEN:"game_list_open",GAME_LIST_SHOW:"game_list_show",GAME_PLAY_ALL_MATCHES:"game_play_all_matches",GAME_PLAY_CURRENT_MATCH:"game_play_current_match",GAME_PLAY_END:"game_play_end",GAME_PLAY_SOLO:"game_play_solo",GAME_PLAY_START:"game_play_start",GAME_PLAY_TOP_SCORES:"game_play_top_scores",GAME_READY:"game_ready",GAME_SELECT:"game_select",GAME_SESSION_BEGIN:"game_session_begin",GAME_SESSION_RESTART:"game_session_restart",GAME_SWITCH:"game_switch",GAME_SWITCH_DIALOG_ACCEPTED:"game_switch_dialog_accepted",GAME_SWITCH_DIALOG_DISMISSED:"game_switch_dialog_dissmissed",GAME_SWITCH_DIALOG_SHOWN:"game_switch_dialog_shown",GAMER_PROFILE_GRANT_EXISTING_TOS_DARK:"gamer_profile_grant_existing_tos_dark",GAMER_PROFILE_GRANT_EXISTING_TOS_LIGHT:"gamer_profile_grant_existing_tos_light",GAMER_PROFILE_GRANT_ONE_TOS:"gamer_profile_grant_one_tos",GAMER_PROFILE_GRANT_ONE_TOS_DARK:"gamer_profile_grant_one_tos_dark",GAMER_PROFILE_GRANT_TOS:"gamer_profile_grant_tos",GAMER_PROFILE_PLAYER_NAME_EDIT_END:"gamer_profile_player_name_edit_end",GAMER_PROFILE_PLAYER_NAME_EDIT_START:"gamer_profile_player_name_edit_start",GAMER_PROFILE_SHOW_EXISTING_TOS_DARK:"gamer_profile_show_existing_tos_dark",GAMER_PROFILE_SHOW_EXISTING_TOS_LIGHT:"gamer_profile_show_existing_tos_light",GAMER_PROFILE_SHOW_ONE_TOS:"gamer_profile_show_one_tos",GAMER_PROFILE_SHOW_ONE_TOS_DARK:"gamer_profile_show_one_tos_dark",GAMER_PROFILE_SHOW_TOS:"gamer_profile_show_tos",GAMER_PROFILE_SHOW_TOS_WITH_EDIT:"gamer_profile_show_tos_with_edit",HEARTBEAT:"heartbeat",LOADING_STARTED:"loading_started",NOT_SUPPORTED:"not_supported",PLAY_FUNNEL_END:"play_funnel_end",PLAY_FUNNEL_START:"play_funnel_start",PRIVACY_INFO_GRANT_PERMISSIONS:"privacy_info_grant_permissions",PRIVACY_INFO_SHOW:"privacy_info_show",QUICKSILVER_AVERAGE_FRAME_TIME:"quicksilver_average_frame_time",QUICKSILVER_END:"quicksilver_end",QUICKSILVER_START:"quicksilver_start",TAG_ADDED:"tag_added",YIELDED_CONTROL:"yielded_control"});e.exports=a}),null);
__d("InstantGamesWebFunnelEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743696");c=b("FalcoLoggerInternal").create("instant_games_web_funnel_event",a);e.exports=c}),null);
__d("GamesQuicksilverFunnelLogger",["FunnelLogger","InstantGamesFunnelEvent","InstantGamesWebFunnelEventFalcoEvent","Random","gkx"],(function(a,b,c,d,e,f){"use strict";var g=null,h=[];function a(){return"GAMES_QUICKSILVER_FUNNEL"}function i(){return b("gkx")("1629947")}function j(){g==null&&(g=b("Random").uint32().toString()+b("Random").uint32().toString().slice(0,8),h=[]);return g}function k(){return h}function l(){g=null,h=[]}function m(a){b("FunnelLogger").startFunnel(a)}function c(a,c){b("FunnelLogger").setFunnelTimeout(a,c)}function d(a,c,d){c=G(c,d);b("FunnelLogger").addFunnelTag(a,c);i()&&h.push(c)}function n(a){if(i()){if(g!=null)return;j();p(a,"play_funnel_start");return}b("FunnelLogger").getFunnelInstance(a)||m(a)}function o(a){if(i()){p(a,"play_funnel_end");l();return}b("FunnelLogger").endFunnel(a)}function p(a,c,d,e){d===void 0&&(d=null);e===void 0&&(e=null);n(a);if(i()){b("InstantGamesWebFunnelEventFalcoEvent").log(function(){return{action:c,action_tag:d,action_payload:e||{},funnel_tags:k(),funnel_payload:{},session_key:j()}});return}d===null&&e===null?b("FunnelLogger").appendAction(a,c):d!=null&&e!=null?b("FunnelLogger").appendActionWithTagAndPayload(a,c,d,e):d!=null?b("FunnelLogger").appendActionWithTag(a,c,d):b("FunnelLogger").appendActionWithPayload(a,c,e)}function f(a){p(a,"quicksilver_start")}function q(a){if(i()&&g==null)return;p(a,"quicksilver_end");o(a)}function r(a){p(a,"game_list_open")}function s(a){p(a,"game_list_show")}function t(a){if(i()&&g==null)return;p(a,"game_list_dismiss");o(a)}function u(a,b,c){p(a,"not_supported",b,{reason:c})}function v(a){p(a,"game_select")}function w(a,b,c,d,e){p(a,"game_play_start",c,{source:b,thread_id:d==="THREAD"?e:null,group_id:d==="GROUP"?e:null,story_token:d==="STORY"?e:null})}function x(a,b,c,d){p(a,"game_play_end",b,{thread_id:c==="THREAD"?d:null,group_id:c==="GROUP"?d:null,story_token:c==="STORY"?d:null})}function y(a,b){p(a,"game_switch",b,{game_id:b})}function z(a,b){p(a,"game_switch_dialog_shown",b,{game_id:b})}function A(a,b,c){c=c?"game_switch_dialog_accepted":"game_switch_dialog_dissmissed";p(a,c,b,{game_id:b})}function B(a,b,c,d,e){p(a,"game_context_update",c,{source:b,thread_id:d==="THREAD"?e:null,group_id:d==="GROUP"?e:null,story_token:d==="STORY"?e:null})}function C(a,b,c){p(a,"heartbeat",b,{heartbeat_interval:c})}function D(a){p(a,"game_chat_send_message")}function E(a){p(a,"game_chat_send_hot_like")}function F(a){p(a,"game_host_start")}function G(a,b){return b==null||b===""?a:a+": "+b}e.exports={getDefaultFunnelName:a,setFunnelTimeout:c,startFunnelIfNotStarted:n,addTag:d,logAction:p,logGameChatSendMessage:D,logGameChatSendHotLike:E,logGameEnd:q,logGameListOpen:r,logGameListShow:s,logGameListDismiss:t,logGameNotSupported:u,logGamePlayStart:w,logGamePlayEnd:x,logGameSelect:v,logGameStart:f,logGameSwitch:y,logGameSwitchDialogResult:A,logGameSwitchDialogShown:z,logGameContextUpdate:B,logHeartbeat:C,logGameHostStart:F}}),null);